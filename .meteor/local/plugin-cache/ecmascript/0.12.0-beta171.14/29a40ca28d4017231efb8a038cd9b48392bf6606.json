{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"PrivateName":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"C:\\Users\\wayne\\src\\kwaiette\\tmp\\padawan\\imports\\ui\\pages\\add_questions\\add_questions.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining","pipelineOperator","throwExpressions","dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"imports/ui/pages/add_questions/add_questions.js","filename":"C:\\Users\\wayne\\src\\kwaiette\\tmp\\padawan\\imports\\ui\\pages\\add_questions\\add_questions.js","passPerPreset":false,"envName":"development","cwd":"C:\\Users\\wayne\\src\\kwaiette\\tmp\\padawan","root":"C:\\Users\\wayne\\src\\kwaiette\\tmp\\padawan","generatorOpts":{"filename":"C:\\Users\\wayne\\src\\kwaiette\\tmp\\padawan\\imports\\ui\\pages\\add_questions\\add_questions.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/ui/pages/add_questions/add_questions.js"}},"code":"var Question;\nmodule.watch(require(\"/imports/api/questions/questions.js\"), {\n  Question: function (v) {\n    Question = v;\n  }\n}, 0);\nvar User;\nmodule.watch(require(\"/imports/api/users/users.js\"), {\n  User: function (v) {\n    User = v;\n  }\n}, 1);\nvar FlowRouter;\nmodule.watch(require(\"meteor/kadira:flow-router\"), {\n  FlowRouter: function (v) {\n    FlowRouter = v;\n  }\n}, 2);\nvar Meteor;\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 3);\nvar TypeReading;\nmodule.watch(require(\"/imports/api/type_readings/type_readings.js\"), {\n  TypeReading: function (v) {\n    TypeReading = v;\n  }\n}, 4);\nvar UserSegment;\nmodule.watch(require(\"/imports/api/user_segments/user_segments.js\"), {\n  UserSegment: function (v) {\n    UserSegment = v;\n  }\n}, 5);\nmodule.watch(require(\"./add_questions.html\"));\nTemplate.add_questions.onCreated(function () {\n  function add_questionsOnCreated() {\n    var _this = this;\n\n    this._category = new ReactiveVar(FlowRouter.getParam('category'));\n\n    this.category = function () {\n      return _this._category.get();\n    };\n\n    this.convertCategory = function (cat) {\n      if (cat === 'IE') {\n        return 0;\n      }\n\n      if (cat === 'NS') {\n        return 1;\n      }\n\n      if (cat === 'TF') {\n        return 2;\n      }\n\n      if (cat === 'JP') {\n        return 3;\n      }\n\n      return -1;\n    };\n\n    this.categoryToIndex = new ReactiveVar(this.convertCategory(this._category.get()));\n\n    this.categoryCheck = function () {\n      return {\n        IE: _this.category() === 'IE',\n        NS: _this.category() === 'NS',\n        TF: _this.category() === 'TF',\n        JP: _this.category() === 'JP'\n      };\n    };\n\n    this.showModal = function (stuff) {\n      var m = $('#tempModal');\n      m.find('h4.modal-title').html(stuff.Title);\n      m.find('div.modal-body').html(stuff.Body);\n      m.find('div.modal-footer button.closebtn').html(stuff.CloseText);\n      m.find('div.modal-footer button.savebtn').html(stuff.SaveText).click(stuff.SaveFunction);\n\n      _.each(stuff.data, function (name, val) {\n        m.data(name, val);\n      });\n\n      m.modal('show');\n    };\n\n    this.fixTabs = function () {\n      var active = $('li[role=presentation].active a').data('type');\n      console.log(active);\n      $('tbody.edit-body').hide();\n      $('#' + active + \"Table\").show();\n    };\n\n    this.makeModalStuff = function (title, body, closeText, saveText, saveFunction, data) {\n      return {\n        Title: title,\n        Body: body,\n        CloseText: closeText,\n        SaveText: saveText,\n        SaveFunction: saveFunction,\n        data: data\n      };\n    };\n\n    this.autorun(function () {\n      console.log(\"autorunning...\", _this.categoryToIndex.get());\n      _this.subscription = _this.subscribe('questions.bycategory', _this.categoryToIndex.get(), {\n        onStop: function () {\n          console.log(\"Subscription stopped! \", arguments, this);\n        },\n        onReady: function () {\n          console.log(\"Subscription ready! \", arguments, this);\n        },\n        sort: {\n          createdAt: -1\n        }\n      });\n      console.log(_this.subscription);\n      _this.subscription3 = _this.subscribe('segmentList', _this.userId, {\n        onStop: function () {\n          console.log(\"Segment List subscription stopped! \", arguments, this);\n        },\n        onReady: function () {\n          console.log(\"Segment List subscription ready! \", arguments, this);\n        }\n      });\n      console.log(_this.subscription3);\n    });\n  }\n\n  return add_questionsOnCreated;\n}());\nTemplate.add_questions.helpers({\n  category: function () {\n    return Template.instance().category();\n  },\n  categoryCheck: function () {\n    return Template.instance().categoryCheck();\n  },\n  userSegmentList: function () {\n    var segList = [];\n    var s = UserSegment.find();\n    s.forEach(function (m) {\n      segList.push({\n        value: m._id,\n        text: m.name\n      });\n    });\n    return segList;\n  },\n  assignedUserSegments: function (q) {\n    console.log(\"sssssssssssss\", q);\n\n    if (typeof q === \"undefined\") {\n      return [];\n    }\n\n    var assigned = [];\n\n    for (var i = 0; i < q.segments.length; i++) {\n      var seg = UserSegment.findOne({\n        _id: q.segments[i]\n      });\n      assigned.push({\n        value: q.segments[i],\n        text: seg.name\n      });\n    }\n\n    return assigned;\n  },\n  questions: function () {\n    var x = Question.find({\n      Categories: parseInt(Template.instance().categoryToIndex.get())\n    }, {\n      sort: {\n        createdAt: -1\n      }\n    });\n    return x;\n  },\n  questionAuthor: function (question) {\n    var u = User.findOne(question.CreatedBy);\n    return \"<span style='white-space:nowrap;'>\" + u.MyProfile.fullName() + \" <span class='label label-warning'>\" + u.MyProfile.UserType.Personality.getFourLetter() + \"</span></span>\";\n  },\n  getUserName: function (userId) {\n    var u = User.findOne({\n      _id: userId\n    });\n    u.callMethod('fullName', function (err, result) {\n      console.log(err, result);\n      return result;\n    }); //return u.fullName();\n  },\n  indexToCategory: function (ind) {\n    if (ind === 0) {\n      return 'IE';\n    }\n\n    if (ind === 1) {\n      return 'NS';\n    }\n\n    if (ind === 2) {\n      return 'TF';\n    }\n\n    if (ind === 3) {\n      return 'JP';\n    }\n\n    return 'UN';\n  },\n  categoryToIndex: function (cat) {\n    if (cat === 'IE') {\n      return 0;\n    }\n\n    if (cat === 'NS') {\n      return 1;\n    }\n\n    if (cat === 'TF') {\n      return 2;\n    }\n\n    if (cat === 'JP') {\n      return 3;\n    }\n\n    return -1;\n  },\n  categoryList: function () {\n    var categories = [{\n      text: 'IE',\n      value: 0\n    }, {\n      text: 'NS',\n      value: 1\n    }, {\n      text: 'TF',\n      value: 2\n    }, {\n      text: 'JP',\n      value: 3\n    }];\n    return categories;\n  },\n  averageAnswer: function (times, sum) {\n    if (times === 0) {\n      return 0;\n    }\n\n    return Math.round(Math.abs(sum) / times);\n  },\n  totalAnswers: function (right, left) {\n    return right + left;\n  },\n  canDelete: function (question) {\n    return question.TimesAnswered.LeftSum + question.TimesAnswered.RightSum < 1;\n  }\n});\nTemplate.add_questions.events({\n  'click button.quest-cat-select': function (event, instance) {\n    console.log('click button.quest-cat-select =>', event, instance);\n    var newCat = $(event.target).data('category');\n    FlowRouter.go(\"/addQuestions/\" + newCat);\n\n    instance._category.set(newCat);\n\n    instance.categoryToIndex.set(instance.convertCategory(newCat));\n    instance.fixTabs();\n  },\n  'click button.dropdown-toggle': function (event, instance) {\n    event.preventDefault();\n    console.log('click button.dropdown-toggle => ', event, instance);\n  },\n  'click ul.dropdown-menu li a': function (event, instance) {\n    event.preventDefault();\n    console.log('click ul.dropdown-menu li a => ', event, instance);\n    var newCat = $(event.target).html();\n    FlowRouter.go($(event.target).attr('href'));\n\n    instance._category.set(newCat);\n\n    instance.categoryToIndex.set(instance.convertCategory(newCat)); //$('.Selected-Category').html(newCat);\n\n    $('[name=Category]').val($(event.target).data('value'));\n    $('button.quest-cat-select.cat-' + newCat).addClass('active');\n    instance.fixTabs();\n  },\n  'click span.toggle-enable': function (event, instance) {\n    console.log('click span.toggle-enable => ', event, instance);\n    var qid = $(event.target).closest('tr').data('id');\n    var q = Question.findOne({\n      _id: qid\n    });\n    q.Active = !q.Active;\n    q.save();\n  },\n  'click span.delete': function (event, instance) {\n    event.preventDefault();\n    console.log('click span.delete => ', event, instance);\n    var target = event.target;\n    var qid = $(target).data('qid');\n    var vals = instance.makeModalStuff(\"Are you really sure?\", \"<h5>Do you really want to delete the question:</h5><table class='table table-bordered'><tr>\" + $(\"#\" + qid).html() + \"</tr></table>\", \"No!\", \"I guess...\", function (event) {\n      $('#tempModal').modal('hide');\n      $(this).off(event);\n      Meteor.call('question.delete', qid, function (error) {\n        if (error) {\n          console.log(\"Error on delete: \", error);\n        } else {\n          console.log(qid + \" should be deleted...\");\n        }\n      });\n    }, {\n      qid: qid\n    });\n    instance.showModal(vals);\n  },\n  'submit #newQuestion': function (event, instance) {\n    event.preventDefault();\n    console.log('submit #newQuestion => ', event, instance);\n    var target = event.target;\n    var values = {\n      //'Category':target.Category.value,\n      'Categories': $(target).find(\"#select-categories\")[0].selectize.items,\n      'Text': target.Text.value,\n      'LeftText': target.LeftText.value,\n      'RightText': target.RightText.value,\n      'segments': $(target).find(\"#select-segments\")[0].selectize ? $(target).find(\"#select-segments\")[0].selectize.items : []\n    };\n    console.log(values);\n    Meteor.call('question.insert', values.Categories, values.Text, values.LeftText, values.RightText, values.segments, function (error) {\n      if (error) {\n        console.log(\"EEEEEERRRORRRRR: \", error);\n      } else {\n        target.Text.value = '';\n        target.LeftText.value = '';\n        target.RightText.value = '';\n      }\n    });\n  }\n});\nTemplate.add_questions.onRendered(function () {\n  $('.dropdown-toggle').dropdown();\n  $('ul.nav-tabs li a').click(function (e) {\n    e.preventDefault();\n    $(this).tab('show');\n    $('tbody.edit-body').hide();\n    $('#' + $(this).data('type') + \"Table\").show();\n  });\n});","map":{"version":3,"sources":["imports/ui/pages/add_questions/add_questions.js"],"names":["Question","module","watch","require","v","User","FlowRouter","Meteor","TypeReading","UserSegment","Template","add_questions","onCreated","add_questionsOnCreated","_category","ReactiveVar","getParam","category","get","convertCategory","cat","categoryToIndex","categoryCheck","IE","NS","TF","JP","showModal","stuff","m","$","find","html","Title","Body","CloseText","SaveText","click","SaveFunction","_","each","data","name","val","modal","fixTabs","active","console","log","hide","show","makeModalStuff","title","body","closeText","saveText","saveFunction","autorun","subscription","subscribe","onStop","arguments","onReady","sort","createdAt","subscription3","userId","helpers","instance","userSegmentList","segList","s","forEach","push","value","_id","text","assignedUserSegments","q","assigned","i","segments","length","seg","findOne","questions","x","Categories","parseInt","questionAuthor","question","u","CreatedBy","MyProfile","fullName","UserType","Personality","getFourLetter","getUserName","callMethod","err","result","indexToCategory","ind","categoryList","categories","averageAnswer","times","sum","Math","round","abs","totalAnswers","right","left","canDelete","TimesAnswered","LeftSum","RightSum","events","event","newCat","target","go","set","preventDefault","attr","addClass","qid","closest","Active","save","vals","off","call","error","values","selectize","items","Text","LeftText","RightText","onRendered","dropdown","e","tab"],"mappings":"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","sourcesContent":["import { Question } from '/imports/api/questions/questions.js';\nimport { User } from '/imports/api/users/users.js';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Meteor } from 'meteor/meteor';\nimport { TypeReading } from '/imports/api/type_readings/type_readings.js';\nimport { UserSegment } from '/imports/api/user_segments/user_segments.js';\nimport './add_questions.html';\n\nTemplate.add_questions.onCreated(function add_questionsOnCreated() {\n    this._category = new ReactiveVar(FlowRouter.getParam('category'));\n    this.category = () => this._category.get();\n    this.convertCategory = (cat) => {\n        if(cat === 'IE') { return 0; }\n        if(cat === 'NS') { return 1; }\n        if(cat === 'TF') { return 2; }\n        if(cat === 'JP') { return 3; }\n        return -1;\n    };\n    this.categoryToIndex = new ReactiveVar(this.convertCategory(this._category.get()));\n    this.categoryCheck = () => {\n        return {\n            IE: this.category() === 'IE',\n            NS: this.category() === 'NS',\n            TF: this.category() === 'TF',\n            JP: this.category() === 'JP'\n        };\n    };\n\n    this.showModal = function(stuff) {\n        let m = $('#tempModal');\n        m.find('h4.modal-title').html(stuff.Title);\n        m.find('div.modal-body').html(stuff.Body);\n        m.find('div.modal-footer button.closebtn').html(stuff.CloseText);\n        m.find('div.modal-footer button.savebtn').html(stuff.SaveText).click(stuff.SaveFunction);\n        _.each(stuff.data, function (name, val) {\n            m.data(name, val);\n        });\n        m.modal('show');\n    };\n    this.fixTabs = () => {\n        let active = $('li[role=presentation].active a').data('type');\n        console.log(active);\n        $('tbody.edit-body').hide();\n        $('#'+active+\"Table\").show();\n    };\n    this.makeModalStuff = function(title, body, closeText, saveText, saveFunction, data) {\n        return {\n            Title: title,\n            Body: body,\n            CloseText: closeText,\n            SaveText: saveText,\n            SaveFunction: saveFunction,\n            data: data\n        };\n    };\n    this.autorun( () => { console.log(\"autorunning...\", this.categoryToIndex.get());\n        this.subscription = this.subscribe('questions.bycategory', this.categoryToIndex.get(), {\n            onStop: function () {\n                console.log(\"Subscription stopped! \", arguments, this);\n            }, onReady: function () {\n                console.log(\"Subscription ready! \", arguments, this);\n            },\n            sort: {createdAt: -1}\n        });\n        console.log(this.subscription);\n        this.subscription3 = this.subscribe('segmentList', this.userId, {\n            onStop: function () {\n                console.log(\"Segment List subscription stopped! \", arguments, this);\n            },\n            onReady: function () {\n                console.log(\"Segment List subscription ready! \", arguments, this);\n            }\n        });\n        console.log(this.subscription3);\n    });\n});\n\nTemplate.add_questions.helpers({\n    category() {\n        return Template.instance().category();\n    },\n    categoryCheck() {\n        return Template.instance().categoryCheck();\n    },\n    userSegmentList() {\n        let segList = [];\n        let s = UserSegment.find( );\n\n        s.forEach((m) => {\n            segList.push( {\n                value: m._id,\n                text: m.name\n            });\n        });\n        return segList;\n    },\n    assignedUserSegments(q) {\n        console.log(\"sssssssssssss\",q);\n        if (typeof q === \"undefined\") {\n            return [];\n        }\n        let assigned = [];\n\n        for (let i = 0; i < q.segments.length; i++) {\n            let seg = UserSegment.findOne( {_id:q.segments[i]} );\n            assigned.push( {\n                value: q.segments[i],\n                text: seg.name\n            } );\n        }\n        return assigned;\n    },\n    questions() {\n        let x = Question.find({\n            Categories:parseInt(Template.instance().categoryToIndex.get())\n        },{ sort: { createdAt: -1 } });\n        return x;\n    },\n    questionAuthor(question) {\n        let u = User.findOne(question.CreatedBy);\n        return \"<span style='white-space:nowrap;'>\"+u.MyProfile.fullName()+\" <span class='label label-warning'>\"+u.MyProfile.UserType.Personality.getFourLetter()+\"</span></span>\";\n    },\n    getUserName(userId) {\n        let u = User.findOne({_id:userId});\n        u.callMethod('fullName', (err, result) => {\n            console.log(err, result);\n            return result;\n        });\n        //return u.fullName();\n    },\n    indexToCategory(ind) {\n        if(ind === 0) { return 'IE'; }\n        if(ind === 1) { return 'NS'; }\n        if(ind === 2) { return 'TF'; }\n        if(ind === 3) { return 'JP'; }\n        return 'UN';\n    },\n    categoryToIndex(cat) {\n        if(cat === 'IE') { return 0; }\n        if(cat === 'NS') { return 1; }\n        if(cat === 'TF') { return 2; }\n        if(cat === 'JP') { return 3; }\n        return -1;\n    },\n    categoryList() {\n        let categories = [\n            {text:'IE', value:0},\n            {text:'NS', value:1},\n            {text:'TF', value:2},\n            {text:'JP', value:3}\n        ];\n        return categories;\n    },\n    averageAnswer(times, sum) {\n        if(times === 0) { return 0; }\n        return Math.round((Math.abs(sum) / times));\n    },\n    totalAnswers(right, left) {\n        return right + left;\n    },\n    canDelete(question) {\n        return (question.TimesAnswered.LeftSum + question.TimesAnswered.RightSum) < 1;\n    }\n});\n\nTemplate.add_questions.events({\n    'click button.quest-cat-select'(event, instance) {\n        console.log('click button.quest-cat-select =>', event, instance);\n        let newCat = $(event.target).data('category');\n        FlowRouter.go(\"/addQuestions/\"+newCat);\n        instance._category.set(newCat);\n        instance.categoryToIndex.set(instance.convertCategory(newCat));\n        instance.fixTabs();\n    },\n    'click button.dropdown-toggle'(event, instance) {\n        event.preventDefault();\n        console.log('click button.dropdown-toggle => ',event, instance);\n    },\n    'click ul.dropdown-menu li a'(event, instance) {\n        event.preventDefault();\n        console.log('click ul.dropdown-menu li a => ', event, instance);\n        let newCat = $(event.target).html();\n        FlowRouter.go($(event.target).attr('href'));\n        instance._category.set(newCat);\n        instance.categoryToIndex.set(instance.convertCategory(newCat));\n        //$('.Selected-Category').html(newCat);\n        $('[name=Category]').val($(event.target).data('value'));\n        $('button.quest-cat-select.cat-'+newCat).addClass('active');\n        instance.fixTabs();\n    },\n    'click span.toggle-enable'(event, instance) {\n        console.log('click span.toggle-enable => ', event, instance);\n        let qid = $(event.target).closest('tr').data('id');\n        let q = Question.findOne({_id:qid});\n        q.Active = !q.Active;\n        q.save();\n    },\n    'click span.delete'(event, instance) {\n        event.preventDefault();\n        console.log('click span.delete => ', event, instance);\n        const target = event.target;\n        let qid = $(target).data('qid');\n        let vals = instance.makeModalStuff(\"Are you really sure?\", \"<h5>Do you really want to delete the question:</h5><table class='table table-bordered'><tr>\"+$(\"#\"+qid).html()+\"</tr></table>\", \"No!\", \"I guess...\", function (event) {\n            $('#tempModal').modal('hide');\n            $(this).off(event);\n            Meteor.call('question.delete', qid, (error)=> {\n                if(error) { console.log(\"Error on delete: \", error); }\n                else {\n                    console.log(qid+\" should be deleted...\");\n                }\n            });\n        }, {qid:qid});\n        instance.showModal(vals);\n    },\n    'submit #newQuestion'(event, instance) {\n        event.preventDefault();\n        console.log('submit #newQuestion => ', event, instance);\n\n        const target = event.target;\n        const values = {\n            //'Category':target.Category.value,\n            'Categories':$(target).find(\"#select-categories\")[0].selectize.items,\n            'Text':target.Text.value,\n            'LeftText':target.LeftText.value,\n            'RightText':target.RightText.value,\n            'segments':($(target).find(\"#select-segments\")[0].selectize ? $(target).find(\"#select-segments\")[0].selectize.items : [])\n        };\n        console.log(values);\n\n        Meteor.call('question.insert', values.Categories, values.Text, values.LeftText, values.RightText, values.segments, (error) => {\n            if (error) {\n                console.log(\"EEEEEERRRORRRRR: \", error);\n            } else {\n                target.Text.value = '';\n                target.LeftText.value = '';\n                target.RightText.value = '';\n            }\n        });\n    }\n});\n\nTemplate.add_questions.onRendered(function() {\n    $('.dropdown-toggle').dropdown();\n    $('ul.nav-tabs li a').click(function (e) { e.preventDefault(); $(this).tab('show'); $('tbody.edit-body').hide(); $('#'+$(this).data('type')+\"Table\").show(); });\n});\n"]},"sourceType":"script","hash":"29a40ca28d4017231efb8a038cd9b48392bf6606"}
