{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"PrivateName":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"C:\\Users\\wayne\\src\\kwaiette\\tmp\\padawan\\imports\\api\\categories\\categories.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining","pipelineOperator","throwExpressions","dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"imports/api/categories/categories.js","filename":"C:\\Users\\wayne\\src\\kwaiette\\tmp\\padawan\\imports\\api\\categories\\categories.js","passPerPreset":false,"envName":"development","cwd":"C:\\Users\\wayne\\src\\kwaiette\\tmp\\padawan","root":"C:\\Users\\wayne\\src\\kwaiette\\tmp\\padawan","generatorOpts":{"filename":"C:\\Users\\wayne\\src\\kwaiette\\tmp\\padawan\\imports\\api\\categories\\categories.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/api/categories/categories.js"}},"code":"module.export({\n  Category: function () {\n    return Category;\n  },\n  CategoryManager: function () {\n    return CategoryManager;\n  }\n});\nvar Class;\nmodule.watch(require(\"meteor/jagi:astronomy\"), {\n  Class: function (v) {\n    Class = v;\n  }\n}, 0);\nvar check;\nmodule.watch(require(\"meteor/check\"), {\n  check: function (v) {\n    check = v;\n  }\n}, 1);\nvar DefaultCategoryID = \"xhKdwhacaWTcBTGPn\";\nvar TypeStats = Class.create({\n  name: 'TypeStats',\n  fields: {\n    num: {\n      type: Number,\n      \"default\": 0\n    }\n  }\n});\nvar Category = Class.create({\n  name: 'Category',\n  collection: new Mongo.Collection('categories'),\n  fields: {\n    name: {\n      type: String,\n      \"default\": \"the Unnamed Category\"\n    },\n    description: {\n      type: String,\n      \"default\": \"this is the default stuff for a Category\"\n    },\n    stats: {\n      type: Object,\n      \"default\": function () {\n        return {};\n      }\n    }\n  },\n  helpers: {\n    addByType: function (type) {\n      if (!this.getStatsByType(type)) {\n        this.stats[type] = new TypeStats();\n      }\n\n      this.getStatsByType(type).num++;\n      this.save();\n    },\n    removeByType: function (type) {\n      if (!this.getStatsByType(type)) {\n        return false;\n      }\n\n      this.getStatsByType(type).num--;\n      this.save();\n    },\n    getStatsByType: function (type) {\n      return this.stats[type];\n    }\n  },\n  meteorMethods: {\n    update: function (name, dscr) {\n      if (Roles.userIsInRole(Meteor.userId(), 'admin', Roles.GLOBAL_GROUP)) {\n        this.name = name;\n        this.description = dscr;\n        console.log(this.save());\n      }\n    }\n  }\n});\nCategory.Default = Category.findOne({\n  _id: DefaultCategoryID\n});\n\nif (typeof Category.Default === \"undefined\") {\n  Category.Default = new Category({\n    _id: DefaultCategoryID\n  });\n\n  if (Meteor.isServer) {\n    Category.Default.save();\n  }\n}\n\nvar CategoryManager = Class.create({\n  name: 'CategoryManager',\n  fields: {\n    Categories: {\n      type: [String],\n      \"default\": function () {\n        return [];\n      }\n    },\n    Type: {\n      type: String,\n      \"default\": \"um... what!?\"\n    }\n  },\n  helpers: {\n    length: function () {\n      return this.Categories.length;\n    },\n    areIntersected: function (categoryManager) {\n      for (var i = 0; i < this.Categories.length; i++) {\n        for (var j = 0; j < categoryManager.Categories.length; i++) {\n          if (this.Categories[i] == categoryManager.Categories[j]) {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    },\n    addCategory: function (category, type) {\n      if (!type) {\n        type = this.Type;\n      }\n\n      this.Categories.push(category._id);\n      category.addByType(type);\n    },\n    hasCategory: function (category) {\n      if (this.Categories.length == 0) {\n        this.addCategory(Category.Default, this.Type);\n      }\n\n      return _.find(this.Categories, function (catId) {\n        return category._id == catId;\n      });\n    },\n    removeCategory: function (category, type, skipSlice) {\n      var index = -1;\n\n      _.each(this.Categories, function (catId, i) {\n        if (catId == category._id) {\n          index = i;\n        }\n      });\n\n      if (index < 0) {\n        return false;\n      }\n\n      if (!skipSlice) {\n        if (index == 0) {\n          this.Categories.shift();\n        } else if (index == this.Categories.length - 1) {\n          this.Categories.pop();\n        } else {\n          this.Categories = this.Categories.slice(0, index).concat(this.Categories.slice(index + 1));\n        }\n      }\n\n      category.removeByType(type);\n    }\n  }\n});\n\nCategoryManager.OfType = function (type) {\n  var c = new CategoryManager();\n  c.Type = type;\n  return c;\n};","map":{"version":3,"sources":["imports/api/categories/categories.js"],"names":["module","export","Category","CategoryManager","Class","watch","require","v","check","DefaultCategoryID","TypeStats","create","name","fields","num","type","Number","collection","Mongo","Collection","String","description","stats","Object","helpers","addByType","getStatsByType","save","removeByType","meteorMethods","update","dscr","Roles","userIsInRole","Meteor","userId","GLOBAL_GROUP","console","log","Default","findOne","_id","isServer","Categories","Type","length","areIntersected","categoryManager","i","j","addCategory","category","push","hasCategory","_","find","catId","removeCategory","skipSlice","index","each","shift","pop","slice","concat","OfType","c"],"mappings":"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","sourcesContent":["import { Class } from 'meteor/jagi:astronomy';\nimport { check } from 'meteor/check';\nconst DefaultCategoryID = \"xhKdwhacaWTcBTGPn\";\nconst TypeStats = Class.create({\n    name: 'TypeStats',\n    fields: {\n        num: {\n            type: Number,\n            default: 0\n        }\n    }\n});\nconst Category = Class.create({\n    name: 'Category',\n    collection: new Mongo.Collection('categories'),\n    fields: {\n        name: {\n            type: String,\n            default: \"the Unnamed Category\"\n        },\n        description: {\n            type: String,\n            default: \"this is the default stuff for a Category\"\n        },\n        stats: {\n            type: Object,\n            default: function () { return {}; }\n        }\n    },\n    helpers: {\n        addByType(type) {\n            if(!this.getStatsByType(type)) { this.stats[type] = new TypeStats(); }\n            this.getStatsByType(type).num++;\n            this.save();\n        },\n        removeByType(type) {\n            if(!this.getStatsByType(type)) { return false; }\n            this.getStatsByType(type).num--;\n            this.save();\n        },\n        getStatsByType(type) {\n            return this.stats[type];\n        }\n    },\n    meteorMethods: {\n        update(name, dscr) {\n            if (Roles.userIsInRole(Meteor.userId(), 'admin', Roles.GLOBAL_GROUP)) {\n                this.name = name;\n                this.description = dscr;\n                console.log(this.save());\n            }\n        }\n    }\n});\nCategory.Default = Category.findOne({_id:DefaultCategoryID});\nif (typeof Category.Default === \"undefined\") {\n    Category.Default = new Category({_id:DefaultCategoryID});\n    if (Meteor.isServer) {\n        Category.Default.save();\n    }\n}\n\nconst CategoryManager = Class.create({\n    name: 'CategoryManager',\n    fields: {\n        Categories: {\n            type: [String],\n            default: function () {\n                return [];\n            }\n        },\n        Type: {\n            type: String,\n            default: \"um... what!?\"\n        }\n    },\n    helpers: {\n        length() {\n            return this.Categories.length;\n        },\n        areIntersected(categoryManager) {\n            for(let i = 0; i < this.Categories.length; i++) {\n                for(let j = 0; j < categoryManager.Categories.length; i++) {\n                    if(this.Categories[i] == categoryManager.Categories[j]) { return true; }\n                }\n            }\n            return false;\n        },\n        addCategory(category, type) {\n            if(!type) { type = this.Type; }\n            this.Categories.push(category._id);\n            category.addByType(type);\n        },\n        hasCategory(category) {\n            if(this.Categories.length == 0) {\n                this.addCategory(Category.Default, this.Type);\n            }\n            return _.find(this.Categories, function (catId) {\n                return category._id == catId;\n            });\n        },\n        removeCategory(category, type, skipSlice) {\n            let index = -1;\n            _.each(this.Categories, function (catId, i) {\n                if(catId == category._id) {\n                    index = i;\n                }\n            });\n            if(index < 0) { return false; }\n            if(!skipSlice) {\n                if(index == 0) {\n                    this.Categories.shift();\n                } else if(index == this.Categories.length - 1) {\n                    this.Categories.pop();\n                } else {\n                    this.Categories = this.Categories.slice(0,index).concat(this.Categories.slice(index+1));\n                }\n            }\n            category.removeByType(type);\n        }\n    }\n});\nCategoryManager.OfType = function (type) {\n    let c = new CategoryManager();\n    c.Type = type;\n    return c;\n}\n\nexport { Category, CategoryManager };\n"]},"sourceType":"script","hash":"895501fb54f1c51b9ceb918ac7a5bb6ef65d237f"}
