{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"PrivateName":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"C:\\Users\\wayne\\src\\kwaiette\\tmp\\padawan\\imports\\ui\\pages\\add_readings\\add_readings.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining","pipelineOperator","throwExpressions","dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"imports/ui/pages/add_readings/add_readings.js","filename":"C:\\Users\\wayne\\src\\kwaiette\\tmp\\padawan\\imports\\ui\\pages\\add_readings\\add_readings.js","passPerPreset":false,"envName":"development","cwd":"C:\\Users\\wayne\\src\\kwaiette\\tmp\\padawan","root":"C:\\Users\\wayne\\src\\kwaiette\\tmp\\padawan","generatorOpts":{"filename":"C:\\Users\\wayne\\src\\kwaiette\\tmp\\padawan\\imports\\ui\\pages\\add_readings\\add_readings.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/ui/pages/add_readings/add_readings.js"}},"code":"var Question;\nmodule.watch(require(\"/imports/api/questions/questions.js\"), {\n  Question: function (v) {\n    Question = v;\n  }\n}, 0);\nvar User;\nmodule.watch(require(\"/imports/api/users/users.js\"), {\n  User: function (v) {\n    User = v;\n  }\n}, 1);\nvar FlowRouter;\nmodule.watch(require(\"meteor/kadira:flow-router\"), {\n  FlowRouter: function (v) {\n    FlowRouter = v;\n  }\n}, 2);\nvar Meteor;\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 3);\nvar TypeReading;\nmodule.watch(require(\"/imports/api/type_readings/type_readings.js\"), {\n  TypeReading: function (v) {\n    TypeReading = v;\n  }\n}, 4);\nmodule.watch(require(\"./add_readings.html\"));\nTemplate.add_readings.onCreated(function () {\n  function add_readingsOnCreated() {\n    var _this = this;\n\n    this.showModal = function (stuff) {\n      var m = $('#tempModal');\n      m.find('h4.modal-title').html(stuff.Title);\n      m.find('div.modal-body').html(stuff.Body);\n      m.find('div.modal-footer button.closebtn').html(stuff.CloseText);\n      m.find('div.modal-footer button.savebtn').html(stuff.SaveText).click(stuff.SaveFunction);\n\n      _.each(stuff.data, function (name, val) {\n        m.data(name, val);\n      });\n\n      m.modal('show');\n    };\n\n    this.makeModalStuff = function (title, body, closeText, saveText, saveFunction, data) {\n      return {\n        Title: title,\n        Body: body,\n        CloseText: closeText,\n        SaveText: saveText,\n        SaveFunction: saveFunction,\n        data: data\n      };\n    };\n\n    this.autorun(function () {\n      _this.subscription = _this.subscribe('typereadings.getAll', {\n        onStop: function () {\n          console.log(\"Subscription stopped! \", arguments, this);\n        },\n        onReady: function () {\n          console.log(\"Subscription ready! \", arguments, this);\n        },\n        sort: {\n          \"TypeReadingCategories.Range.Delta\": -1\n        }\n      });\n      console.log(_this.subscription);\n    });\n  }\n\n  return add_readingsOnCreated;\n}());\nTemplate.add_readings.helpers({\n  readings: function () {\n    return TypeReading.find({}, {\n      sort: {\n        \"TypeReadingCategories.Range.low\": 1,\n        \"TypeReadingCategories.Range.Delta\": -1\n      }\n    });\n  },\n  indexToCategory: function (ind) {\n    if (ind === 0) {\n      return 'IE';\n    }\n\n    if (ind === 1) {\n      return 'NS';\n    }\n\n    if (ind === 2) {\n      return 'TF';\n    }\n\n    if (ind === 3) {\n      return 'JP';\n    }\n\n    return 'UN';\n  },\n  categoryToIndex: function (cat) {\n    if (cat === 'IE') {\n      return 0;\n    }\n\n    if (cat === 'NS') {\n      return 1;\n    }\n\n    if (cat === 'TF') {\n      return 2;\n    }\n\n    if (cat === 'JP') {\n      return 3;\n    }\n\n    return -1;\n  },\n  readingHasCategory: function (reading, category) {\n    return !!reading.TypeReadingCategories[category];\n  },\n  readingCategory: function (reading, category) {\n    if (!reading.TypeReadingCategories[category]) {\n      return \"-\";\n    } else {\n      return \"from \" + reading.TypeReadingCategories[category].Range.low + \" to \" + reading.TypeReadingCategories[category].Range.high;\n    }\n  },\n  getRange: function (reading, category, isHigh) {\n    if (!reading.TypeReadingCategories[category]) {\n      return \"\";\n    }\n\n    return isHigh ? reading.TypeReadingCategories[category].Range.high : reading.TypeReadingCategories[category].Range.low;\n  },\n  readingAuthor: function (reading) {\n    var u = User.findOne(reading.CreatedBy);\n    return u.MyProfile.fullName() + \" <span class='label label-warning'>\" + u.MyProfile.UserType.Personality.getFourLetter() + \"</span>\";\n  },\n  getUserName: function (userId) {\n    var u = User.findOne({\n      _id: userId\n    });\n    u.callMethod('fullName', function (err, result) {\n      console.log(err, result);\n      return result;\n    }); //return u.fullName();\n  }\n});\nTemplate.add_readings.events({\n  'click span.toggle-enable-reading': function (event, instance) {\n    console.log('click span.toggle-enable-reading => ', event, instance);\n    var rid = $(event.target).closest('tr').data('id');\n    Meteor.call('typereadings.toggle', rid, function (error) {\n      if (error) {\n        console.log(\"Error on toggle reading: \", error);\n      } else {\n        console.log(rid + \" should be toggled.\");\n      }\n    });\n  },\n  'click span.delete-reading': function (event, instance) {\n    event.preventDefault();\n    console.log('click span.delete-reading => ', event, instance);\n    var target = event.target;\n    var rid = $(target).data('rid');\n    var vals = instance.makeModalStuff(\"Are you really sure?\", \"<h5>Do you really want to delete the reading:</h5><table class='table table-bordered'><tr>\" + $(\"#\" + rid).html() + \"</tr></table>\", \"No!\", \"I guess...\", function (event) {\n      $('#tempModal').modal('hide');\n      $(this).off(event);\n      Meteor.call('typereadings.delete', rid, function (error) {\n        if (error) {\n          console.log(\"Error on delete: \", error);\n        } else {\n          console.log(rid + \" should be deleted...\");\n        }\n      });\n    }, {\n      rid: rid\n    });\n    instance.showModal(vals);\n  },\n  'click #addTypeReadingLink': function (event, instance) {\n    event.preventDefault();\n\n    if ($('span', event.target).hasClass('glyphicon-chevron-down')) {\n      $('span', event.target).removeClass('glyphicon-chevron-down').addClass('glyphicon-chevron-up');\n      $('div.add-type-reading').slideDown(300);\n    } else {\n      $('span', event.target).removeClass('glyphicon-chevron-up').addClass('glyphicon-chevron-down');\n      $('div.add-type-reading').slideUp(300);\n    }\n  },\n  'click a.readingCategoryLink': function (event, instance) {\n    event.preventDefault();\n    var me = $(event.target);\n    var parentData = me.parent().get(0).dataset;\n    var cat = parseInt(parentData.category);\n    var hi = parentData.high;\n    var low = parentData.low;\n    var mom = me.parents('div.row:first');\n    mom.find('input[name=Category]').val(cat);\n    mom.find('span.readingCategoryDisplay').html(instance.view.template.__helpers[\" indexToCategory\"](cat));\n    mom.find('input[name=Low]').val(low);\n    mom.find('input[name=High]').val(hi);\n\n    if (!mom.find('.expansion-drawer').is(':visible')) {\n      $('.expansion-drawer').slideUp(300);\n      mom.find('.expansion-drawer').slideDown(300);\n    }\n  },\n  'submit #newReading': function (event, instance) {\n    event.preventDefault();\n    console.log('submit #newReading => ', event, instance);\n    var target = event.target;\n    var values = {\n      'Header': target.Header.value,\n      'Body': target.Body.value\n    };\n    console.log(values);\n    Meteor.call('typereadings.insert', values.Header, values.Body, function (error) {\n      if (error) {\n        console.log(\"EEEEEERRRORRRRR: \", error);\n      } else {\n        target.Header.value = '';\n        target.Body.value = '';\n      }\n    });\n  },\n  'submit form.addCategoryToReadingForm': function (event, instance) {\n    event.preventDefault();\n    var target = event.target;\n    var values = {\n      Category: target.Category.value,\n      High: target.High.value,\n      Low: target.Low.value,\n      ReadingId: target.readingId.value\n    };\n    Meteor.call('typereadings.addCategoryToReading', values.ReadingId, values.Category, values.High, values.Low, function (error) {\n      if (error) {\n        console.log(\"EEEEEEEEEEERRRRRRRRRRROOOOOOOOORRRRR: \", error);\n      } else {\n        console.log(\"We good, man!\");\n        target.Low.value = '';\n        target.High.value = '';\n      }\n    });\n  }\n});\nTemplate.add_readings.onRendered(function () {});","map":{"version":3,"sources":["imports/ui/pages/add_readings/add_readings.js"],"names":["Question","module","watch","require","v","User","FlowRouter","Meteor","TypeReading","Template","add_readings","onCreated","add_readingsOnCreated","showModal","stuff","m","$","find","html","Title","Body","CloseText","SaveText","click","SaveFunction","_","each","data","name","val","modal","makeModalStuff","title","body","closeText","saveText","saveFunction","autorun","subscription","subscribe","onStop","console","log","arguments","onReady","sort","helpers","readings","indexToCategory","ind","categoryToIndex","cat","readingHasCategory","reading","category","TypeReadingCategories","readingCategory","Range","low","high","getRange","isHigh","readingAuthor","u","findOne","CreatedBy","MyProfile","fullName","UserType","Personality","getFourLetter","getUserName","userId","_id","callMethod","err","result","events","event","instance","rid","target","closest","call","error","preventDefault","vals","off","hasClass","removeClass","addClass","slideDown","slideUp","me","parentData","parent","get","dataset","parseInt","hi","mom","parents","view","template","__helpers","is","values","Header","value","Category","High","Low","ReadingId","readingId","onRendered"],"mappings":"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","sourcesContent":["import { Question } from '/imports/api/questions/questions.js';\nimport { User } from '/imports/api/users/users.js';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Meteor } from 'meteor/meteor';\nimport { TypeReading } from '/imports/api/type_readings/type_readings.js';\nimport './add_readings.html';\n\nTemplate.add_readings.onCreated(function add_readingsOnCreated() {\n        \n    this.showModal = function(stuff) {\n        let m = $('#tempModal');\n        m.find('h4.modal-title').html(stuff.Title);\n        m.find('div.modal-body').html(stuff.Body);\n        m.find('div.modal-footer button.closebtn').html(stuff.CloseText);\n        m.find('div.modal-footer button.savebtn').html(stuff.SaveText).click(stuff.SaveFunction);\n        _.each(stuff.data, function (name, val) {\n            m.data(name, val);\n        });\n        m.modal('show');\n    };\n    this.makeModalStuff = function(title, body, closeText, saveText, saveFunction, data) {\n        return { \n            Title: title,\n            Body: body,\n            CloseText: closeText,\n            SaveText: saveText, \n            SaveFunction: saveFunction,\n            data: data\n        };\n    };\n    this.autorun( () => { \n        this.subscription = this.subscribe('typereadings.getAll', {\n            onStop: function () {\n                console.log(\"Subscription stopped! \", arguments, this);\n            }, onReady: function () {\n                console.log(\"Subscription ready! \", arguments, this);\n            },\n            sort: { \"TypeReadingCategories.Range.Delta\": -1 }\n        });\n        console.log(this.subscription);\n    });\n});\n\nTemplate.add_readings.helpers({\n    readings() {\n        return TypeReading.find({ },{ sort: { \"TypeReadingCategories.Range.low\": 1, \"TypeReadingCategories.Range.Delta\": -1 } });\n    },\n    indexToCategory(ind) {\n        if(ind === 0) { return 'IE'; }\n        if(ind === 1) { return 'NS'; }\n        if(ind === 2) { return 'TF'; }\n        if(ind === 3) { return 'JP'; }\n        return 'UN';\n    },\n    categoryToIndex(cat) {\n        if(cat === 'IE') { return 0; }\n        if(cat === 'NS') { return 1; }\n        if(cat === 'TF') { return 2; }\n        if(cat === 'JP') { return 3; }\n        return -1;\n    },\n    readingHasCategory(reading, category) {\n        return (!!reading.TypeReadingCategories[category]);\n    },\n    readingCategory(reading, category) {\n        if(!reading.TypeReadingCategories[category]) {\n            return \"-\";\n        } else {\n            return \"from \"+reading.TypeReadingCategories[category].Range.low + \" to \" + reading.TypeReadingCategories[category].Range.high;\n        }\n    },\n    getRange(reading, category, isHigh) {\n        if(!reading.TypeReadingCategories[category]) {\n            return \"\";\n        }\n        return (isHigh ? reading.TypeReadingCategories[category].Range.high : reading.TypeReadingCategories[category].Range.low);\n    },\n    readingAuthor(reading) {\n        let u = User.findOne(reading.CreatedBy);\n        return u.MyProfile.fullName()+\" <span class='label label-warning'>\"+u.MyProfile.UserType.Personality.getFourLetter()+\"</span>\";\n    },\n    getUserName(userId) {\n        let u = User.findOne({_id:userId});\n        u.callMethod('fullName', (err, result) => {\n            console.log(err, result);\n            return result;\n        });\n        //return u.fullName();\n    }\n});\n\nTemplate.add_readings.events({\n    'click span.toggle-enable-reading'(event, instance) {\n        console.log('click span.toggle-enable-reading => ', event, instance);\n        let rid = $(event.target).closest('tr').data('id');\n        Meteor.call('typereadings.toggle', rid, (error) => {\n            if(error) { console.log(\"Error on toggle reading: \",error); }\n            else { console.log(rid+\" should be toggled.\"); }\n        });\n    },\n    'click span.delete-reading'(event, instance) {\n        event.preventDefault();\n        console.log('click span.delete-reading => ', event, instance);\n        const target = event.target;\n        let rid = $(target).data('rid');\n        let vals = instance.makeModalStuff(\"Are you really sure?\", \"<h5>Do you really want to delete the reading:</h5><table class='table table-bordered'><tr>\"+$(\"#\"+rid).html()+\"</tr></table>\", \"No!\", \"I guess...\", function (event) {\n            $('#tempModal').modal('hide');\n            $(this).off(event);\n            Meteor.call('typereadings.delete', rid, (error)=> {\n                if(error) { console.log(\"Error on delete: \", error); }\n                else {\n                    console.log(rid+\" should be deleted...\");\n                }\n            });\n        }, {rid:rid});\n        instance.showModal(vals);\n    },\n    'click #addTypeReadingLink'(event, instance) {\n        event.preventDefault();\n        if($('span', event.target).hasClass('glyphicon-chevron-down')) {\n            $('span', event.target).removeClass('glyphicon-chevron-down').addClass('glyphicon-chevron-up');\n            $('div.add-type-reading').slideDown(300);\n        } else {\n            $('span', event.target).removeClass('glyphicon-chevron-up').addClass('glyphicon-chevron-down');\n            $('div.add-type-reading').slideUp(300);\n        }\n    },\n    'click a.readingCategoryLink'(event, instance) {\n        event.preventDefault();\n        var me = $(event.target);\n        var parentData = me.parent().get(0).dataset;\n        var cat = parseInt(parentData.category);\n        var hi  = parentData.high;\n        var low = parentData.low;\n        var mom = me.parents('div.row:first');\n        mom.find('input[name=Category]').val(cat);\n        mom.find('span.readingCategoryDisplay').html(instance.view.template.__helpers[\" indexToCategory\"](cat));\n        mom.find('input[name=Low]').val(low);\n        mom.find('input[name=High]').val(hi);\n        if(!mom.find('.expansion-drawer').is(':visible')) {\n            $('.expansion-drawer').slideUp(300);\n            mom.find('.expansion-drawer').slideDown(300);\n        }\n    },\n    'submit #newReading'(event, instance) {\n        event.preventDefault();\n        console.log('submit #newReading => ', event, instance);\n        \n        const target = event.target;\n        const values = {\n            'Header':target.Header.value,\n            'Body':target.Body.value,\n        };\n        console.log(values);\n\n        Meteor.call('typereadings.insert', values.Header, values.Body, (error) => {\n            if (error) {\n                console.log(\"EEEEEERRRORRRRR: \", error);\n            } else {\n                target.Header.value = '';\n                target.Body.value = '';\n            }\n        });\n    },\n    'submit form.addCategoryToReadingForm'(event, instance) {\n        event.preventDefault();\n        const target = event.target;\n        const values = {\n            Category: target.Category.value,\n            High: target.High.value,\n            Low: target.Low.value,\n            ReadingId: target.readingId.value\n        };\n        Meteor.call('typereadings.addCategoryToReading', values.ReadingId, values.Category, values.High, values.Low, (error) => {\n            if(error) {\n                console.log(\"EEEEEEEEEEERRRRRRRRRRROOOOOOOOORRRRR: \", error);\n            } else {\n                console.log(\"We good, man!\");\n                target.Low.value = '';\n                target.High.value = '';\n            }\n        });\n    }\n});\n\nTemplate.add_readings.onRendered(function() {\n    \n});"]},"sourceType":"script","hash":"786b818855eb34d52553063eb2cc8d53bdad889b"}
