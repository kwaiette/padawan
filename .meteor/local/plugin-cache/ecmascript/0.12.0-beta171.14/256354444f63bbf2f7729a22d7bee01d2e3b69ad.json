{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":true}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"PrivateName":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$4","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$5","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$6","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$7","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$9","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}}],"presets":[],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"C:\\Users\\wayne\\src\\kwaiette\\tmp\\padawan\\imports\\ui\\components\\personality\\personality.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining","pipelineOperator","throwExpressions","dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"imports/ui/components/personality/personality.js","filename":"C:\\Users\\wayne\\src\\kwaiette\\tmp\\padawan\\imports\\ui\\components\\personality\\personality.js","passPerPreset":false,"envName":"development","cwd":"C:\\Users\\wayne\\src\\kwaiette\\tmp\\padawan","root":"C:\\Users\\wayne\\src\\kwaiette\\tmp\\padawan","generatorOpts":{"filename":"C:\\Users\\wayne\\src\\kwaiette\\tmp\\padawan\\imports\\ui\\components\\personality\\personality.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/ui/components/personality/personality.js"}},"code":"let Question;\nmodule.watch(require(\"/imports/api/questions/questions.js\"), {\n  Question(v) {\n    Question = v;\n  }\n\n}, 0);\nlet User, Profile, UserType, MyersBriggs, Answer;\nmodule.watch(require(\"/imports/api/users/users.js\"), {\n  User(v) {\n    User = v;\n  },\n\n  Profile(v) {\n    Profile = v;\n  },\n\n  UserType(v) {\n    UserType = v;\n  },\n\n  MyersBriggs(v) {\n    MyersBriggs = v;\n  },\n\n  Answer(v) {\n    Answer = v;\n  }\n\n}, 1);\nlet TypeReading;\nmodule.watch(require(\"/imports/api/type_readings/type_readings.js\"), {\n  TypeReading(v) {\n    TypeReading = v;\n  }\n\n}, 2);\nlet Meteor;\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 3);\nmodule.watch(require(\"./personality.html\"));\nvar minQuestionsAnswered = 72;\nTemplate.personality.onCreated(function () {\n  if (this.data.userId) {\n    this.userId = this.data.userId;\n  } else {\n    this.userId = Meteor.userId();\n  }\n\n  this.autorun(() => {\n    console.log(\"autorunning...\");\n    this.subscription = this.subscribe('userData', this.userId, {\n      onStop: function () {\n        console.log(\"Subscription stopped! \", arguments, this);\n      },\n      onReady: function () {\n        console.log(\"Subscription ready! \", arguments, this);\n      }\n    });\n    console.log(this.subscription);\n    this.subscription2 = this.subscribe('typereadings.myReadings', this.userId, {\n      onStop: function () {\n        console.log(\"Readings subscription stopped! \", arguments, this);\n      },\n      onReady: function () {\n        console.log(\"Readings subscription ready! \", arguments, this);\n      }\n    });\n    console.log(this.subscription2);\n  });\n});\nTemplate.personality.helpers({\n  readings() {\n    let tr = TypeReading.find({});\n    console.log(\"1234\", tr.fetch());\n    return tr;\n  },\n\n  user() {\n    return User.findOne({\n      _id: Template.instance().userId\n    });\n  },\n\n  isMinMet() {\n    let u = User.findOne({\n      _id: Template.instance().userId\n    });\n    if (!u) return false;\n    console.log(u);\n\n    if (u.MyProfile.UserType.AnsweredQuestions.length >= minQuestionsAnswered) {\n      return true;\n    } else {\n      return false;\n    }\n\n    return false;\n  },\n\n  remainingMinQCount() {\n    let u = User.findOne({\n      _id: Template.instance().userId\n    });\n    console.log(u);\n    if (!u) return -1;\n    let rmn = Math.max(0, minQuestionsAnswered - u.MyProfile.UserType.AnsweredQuestions.length);\n    console.log(\"yyyyy\", minQuestionsAnswered, u.MyProfile.UserType.AnsweredQuestions.length, rmn); //let rmn = 0;\n\n    return rmn;\n  },\n\n  opacityByCategory(category, userObj) {\n    //console.log(category, userObj); //return;\n    if (typeof userObj === \"undefined\") return false;\n    var value = userObj.MyProfile.UserType.Personality[userObj.MyProfile.UserType.Personality.getIdentifierById(category)]; //console.log(value);\n\n    return Math.abs(value.Value) * 2 / 100;\n  },\n\n  percentByCategory(category, userObj) {\n    if (typeof userObj === \"undefined\") return false;\n    var value = userObj.MyProfile.UserType.Personality[userObj.MyProfile.UserType.Personality.getIdentifierById(category)];\n    console.log(\"555555\", value);\n    return Math.round(Math.abs(value.Value) * 2);\n  },\n\n  letterByCategory(category, userObj) {\n    //console.log(category, userObj); //return;\n    if (typeof userObj === \"undefined\") return false;\n    var identifier = userObj.MyProfile.UserType.Personality.getIdentifierById(category);\n    var value = userObj.MyProfile.UserType.Personality[identifier].Value;\n    console.log(category, value, identifier);\n\n    if (userObj.MyProfile.UserType.AnsweredQuestions.length >= minQuestionsAnswered) {\n      return value === 0 ? \"?\" : value < 0 ? identifier.slice(0, 1) : identifier.slice(1, 2);\n    } else {\n      return \"?\";\n    }\n  },\n\n  userImageUrl(userObj) {\n    if (typeof userObj === \"undefined\") return false;\n    return Gravatar.imageUrl(userObj.emails[0].address, {\n      size: 50,\n      default: 'mm'\n    });\n  }\n\n});\nTemplate.personality.events({\n  'click div.personality-display'(event, instance) {\n    console.log('click div.personality-display =>', event, instance);\n    $('#personality-readings').modal('show'); //$('.Selected-Category').html(newCat);\n  }\n\n});\nTemplate.singleReading.helpers({\n  getHSize(reading) {\n    console.log(\"asdf\", reading);\n    let count = delta = 0;\n\n    _.forEach(reading.TypeReadingCategories, cat => {\n      if (cat == null) {\n        return;\n      }\n\n      count++;\n      delta += cat.Range.Delta;\n    });\n\n    delta /= count;\n\n    if (!reading.Header) {\n      return \"\";\n    }\n\n    if (delta >= 50) {\n      return \"<h1>\" + reading.Header + \"</h1>\";\n    }\n\n    if (delta >= 40) {\n      return \"<h2>\" + reading.Header + \"</h2>\";\n    }\n\n    if (delta >= 30) {\n      return \"<h3>\" + reading.Header + \"</h3>\";\n    }\n\n    if (delta >= 20) {\n      return \"<h4>\" + reading.Header + \"</h4>\";\n    }\n\n    if (delta >= 10) {\n      return \"<h5>\" + reading.Header + \"</h5>\";\n    }\n\n    return \"<h6>\" + reading.Header + \"</h6>\";\n  }\n\n});","map":{"version":3,"sources":["imports/ui/components/personality/personality.js"],"names":["Question","module","watch","require","v","User","Profile","UserType","MyersBriggs","Answer","TypeReading","Meteor","minQuestionsAnswered","Template","personality","onCreated","data","userId","autorun","console","log","subscription","subscribe","onStop","arguments","onReady","subscription2","helpers","readings","tr","find","fetch","user","findOne","_id","instance","isMinMet","u","MyProfile","AnsweredQuestions","length","remainingMinQCount","rmn","Math","max","opacityByCategory","category","userObj","value","Personality","getIdentifierById","abs","Value","percentByCategory","round","letterByCategory","identifier","slice","userImageUrl","Gravatar","imageUrl","emails","address","size","default","events","event","$","modal","singleReading","getHSize","reading","count","delta","_","forEach","TypeReadingCategories","cat","Range","Delta","Header"],"mappings":"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","sourcesContent":["import { Question } from '/imports/api/questions/questions.js';\nimport { User, Profile, UserType, MyersBriggs, Answer } from '/imports/api/users/users.js';\nimport { TypeReading } from '/imports/api/type_readings/type_readings.js';\nimport { Meteor } from 'meteor/meteor';\nimport './personality.html';\n\nvar minQuestionsAnswered = 72;\n\nTemplate.personality.onCreated(function () {\n    if (this.data.userId) {\n        this.userId = this.data.userId;\n    } else {\n        this.userId = Meteor.userId();\n    }\n    this.autorun( () => { console.log(\"autorunning...\");\n        this.subscription = this.subscribe('userData', this.userId, {\n            onStop: function () {\n                console.log(\"Subscription stopped! \", arguments, this);\n            }, onReady: function () {\n                console.log(\"Subscription ready! \", arguments, this);\n            }\n        });\n        console.log(this.subscription);\n        this.subscription2 = this.subscribe('typereadings.myReadings', this.userId, {\n            onStop: function () {\n                console.log(\"Readings subscription stopped! \", arguments, this);\n            }, onReady: function () {\n                console.log(\"Readings subscription ready! \", arguments, this);\n            }\n        });\n        console.log(this.subscription2);\n    });\n});\n\nTemplate.personality.helpers({\n    readings() {\n        let tr = TypeReading.find({});\n        console.log(\"1234\",tr.fetch());\n        return tr;\n    },\n    user() {\n        return User.findOne({_id:Template.instance().userId});\n    },\n    isMinMet() {\n        let u = User.findOne({_id:Template.instance().userId});\n        if (!u) return false;\n        console.log(u);\n        if (u.MyProfile.UserType.AnsweredQuestions.length >= minQuestionsAnswered) {\n            return true;\n        } else {\n            return false;\n        }\n        return false;\n    },\n    remainingMinQCount() {\n        let u = User.findOne({_id:Template.instance().userId});\n        console.log(u);\n        if (!u) return -1;\n        let rmn = Math.max(0, (minQuestionsAnswered - u.MyProfile.UserType.AnsweredQuestions.length));\n        console.log(\"yyyyy\",minQuestionsAnswered, u.MyProfile.UserType.AnsweredQuestions.length, rmn);\n        //let rmn = 0;\n        return rmn;\n    },\n    opacityByCategory(category, userObj) {\n        //console.log(category, userObj); //return;\n        if (typeof userObj === \"undefined\") return false;\n        var value = userObj.MyProfile.UserType.Personality[userObj.MyProfile.UserType.Personality.getIdentifierById(category)];\n        //console.log(value);\n        return (Math.abs(value.Value) * 2) / 100;\n    },\n    percentByCategory(category, userObj) {\n        if (typeof userObj === \"undefined\") return false;\n        var value = userObj.MyProfile.UserType.Personality[userObj.MyProfile.UserType.Personality.getIdentifierById(category)];\n        console.log(\"555555\",value);\n        return Math.round(Math.abs(value.Value) * 2);\n    },\n    letterByCategory(category, userObj) {\n        //console.log(category, userObj); //return;\n        if (typeof userObj === \"undefined\") return false;\n        var identifier = userObj.MyProfile.UserType.Personality.getIdentifierById(category);\n        var value = userObj.MyProfile.UserType.Personality[identifier].Value;\n        console.log(category, value, identifier);\n        if (userObj.MyProfile.UserType.AnsweredQuestions.length >= minQuestionsAnswered) {\n            return (value === 0 ? \"?\" : (value < 0 ? identifier.slice(0,1) : identifier.slice(1,2)));\n        } else {\n            return \"?\";\n        }\n    },\n    userImageUrl(userObj) {\n        if (typeof userObj === \"undefined\") return false;\n        return Gravatar.imageUrl(userObj.emails[0].address, { size: 50, default: 'mm' });\n    }\n});\n\nTemplate.personality.events({\n    'click div.personality-display'(event, instance) {\n        console.log('click div.personality-display =>', event, instance);\n        $('#personality-readings').modal('show');\n        //$('.Selected-Category').html(newCat);\n    }\n});\n\nTemplate.singleReading.helpers({\n    getHSize(reading) {\n        console.log(\"asdf\",reading);\n        let count = delta = 0;\n        _.forEach(reading.TypeReadingCategories, (cat) => {\n            if(cat == null) { return; }\n            count++;\n            delta += cat.Range.Delta;\n        });\n        delta /= count;\n        if(!reading.Header) { return \"\"; }\n        if(delta >= 50) { return \"<h1>\"+reading.Header+\"</h1>\"; }\n        if(delta >= 40) { return \"<h2>\"+reading.Header+\"</h2>\"; }\n        if(delta >= 30) { return \"<h3>\"+reading.Header+\"</h3>\"; }\n        if(delta >= 20) { return \"<h4>\"+reading.Header+\"</h4>\"; }\n        if(delta >= 10) { return \"<h5>\"+reading.Header+\"</h5>\"; }\n        return \"<h6>\"+reading.Header+\"</h6>\";\n    }\n});\n"]},"sourceType":"script","hash":"256354444f63bbf2f7729a22d7bee01d2e3b69ad"}
