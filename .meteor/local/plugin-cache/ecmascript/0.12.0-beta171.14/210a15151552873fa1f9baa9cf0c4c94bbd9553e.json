{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":true}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"PrivateName":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$4","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$5","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$6","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$7","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$9","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}}],"presets":[],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"C:\\Users\\wayne\\src\\kwaiette\\tmp\\padawan\\imports\\ui\\pages\\add_questions\\add_questions.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining","pipelineOperator","throwExpressions","dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"imports/ui/pages/add_questions/add_questions.js","filename":"C:\\Users\\wayne\\src\\kwaiette\\tmp\\padawan\\imports\\ui\\pages\\add_questions\\add_questions.js","passPerPreset":false,"envName":"development","cwd":"C:\\Users\\wayne\\src\\kwaiette\\tmp\\padawan","root":"C:\\Users\\wayne\\src\\kwaiette\\tmp\\padawan","generatorOpts":{"filename":"C:\\Users\\wayne\\src\\kwaiette\\tmp\\padawan\\imports\\ui\\pages\\add_questions\\add_questions.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/ui/pages/add_questions/add_questions.js"}},"code":"let Question;\nmodule.watch(require(\"/imports/api/questions/questions.js\"), {\n  Question(v) {\n    Question = v;\n  }\n\n}, 0);\nlet User;\nmodule.watch(require(\"/imports/api/users/users.js\"), {\n  User(v) {\n    User = v;\n  }\n\n}, 1);\nlet FlowRouter;\nmodule.watch(require(\"meteor/kadira:flow-router\"), {\n  FlowRouter(v) {\n    FlowRouter = v;\n  }\n\n}, 2);\nlet Meteor;\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 3);\nlet TypeReading;\nmodule.watch(require(\"/imports/api/type_readings/type_readings.js\"), {\n  TypeReading(v) {\n    TypeReading = v;\n  }\n\n}, 4);\nlet UserSegment;\nmodule.watch(require(\"/imports/api/user_segments/user_segments.js\"), {\n  UserSegment(v) {\n    UserSegment = v;\n  }\n\n}, 5);\nmodule.watch(require(\"./add_questions.html\"));\nTemplate.add_questions.onCreated(function add_questionsOnCreated() {\n  this._category = new ReactiveVar(FlowRouter.getParam('category'));\n\n  this.category = () => this._category.get();\n\n  this.convertCategory = cat => {\n    if (cat === 'IE') {\n      return 0;\n    }\n\n    if (cat === 'NS') {\n      return 1;\n    }\n\n    if (cat === 'TF') {\n      return 2;\n    }\n\n    if (cat === 'JP') {\n      return 3;\n    }\n\n    return -1;\n  };\n\n  this.categoryToIndex = new ReactiveVar(this.convertCategory(this._category.get()));\n\n  this.categoryCheck = () => {\n    return {\n      IE: this.category() === 'IE',\n      NS: this.category() === 'NS',\n      TF: this.category() === 'TF',\n      JP: this.category() === 'JP'\n    };\n  };\n\n  this.showModal = function (stuff) {\n    let m = $('#tempModal');\n    m.find('h4.modal-title').html(stuff.Title);\n    m.find('div.modal-body').html(stuff.Body);\n    m.find('div.modal-footer button.closebtn').html(stuff.CloseText);\n    m.find('div.modal-footer button.savebtn').html(stuff.SaveText).click(stuff.SaveFunction);\n\n    _.each(stuff.data, function (name, val) {\n      m.data(name, val);\n    });\n\n    m.modal('show');\n  };\n\n  this.fixTabs = () => {\n    let active = $('li[role=presentation].active a').data('type');\n    console.log(active);\n    $('tbody.edit-body').hide();\n    $('#' + active + \"Table\").show();\n  };\n\n  this.makeModalStuff = function (title, body, closeText, saveText, saveFunction, data) {\n    return {\n      Title: title,\n      Body: body,\n      CloseText: closeText,\n      SaveText: saveText,\n      SaveFunction: saveFunction,\n      data: data\n    };\n  };\n\n  this.autorun(() => {\n    console.log(\"autorunning...\", this.categoryToIndex.get());\n    this.subscription = this.subscribe('questions.bycategory', this.categoryToIndex.get(), {\n      onStop: function () {\n        console.log(\"Subscription stopped! \", arguments, this);\n      },\n      onReady: function () {\n        console.log(\"Subscription ready! \", arguments, this);\n      },\n      sort: {\n        createdAt: -1\n      }\n    });\n    console.log(this.subscription);\n    this.subscription3 = this.subscribe('segmentList', this.userId, {\n      onStop: function () {\n        console.log(\"Segment List subscription stopped! \", arguments, this);\n      },\n      onReady: function () {\n        console.log(\"Segment List subscription ready! \", arguments, this);\n      }\n    });\n    console.log(this.subscription3);\n  });\n});\nTemplate.add_questions.helpers({\n  category() {\n    return Template.instance().category();\n  },\n\n  categoryCheck() {\n    return Template.instance().categoryCheck();\n  },\n\n  userSegmentList() {\n    let segList = [];\n    let s = UserSegment.find();\n    s.forEach(m => {\n      segList.push({\n        value: m._id,\n        text: m.name\n      });\n    });\n    return segList;\n  },\n\n  assignedUserSegments(q) {\n    console.log(\"sssssssssssss\", q);\n\n    if (typeof q === \"undefined\") {\n      return [];\n    }\n\n    let assigned = [];\n\n    for (let i = 0; i < q.segments.length; i++) {\n      let seg = UserSegment.findOne({\n        _id: q.segments[i]\n      });\n      assigned.push({\n        value: q.segments[i],\n        text: seg.name\n      });\n    }\n\n    return assigned;\n  },\n\n  questions() {\n    let x = Question.find({\n      Categories: parseInt(Template.instance().categoryToIndex.get())\n    }, {\n      sort: {\n        createdAt: -1\n      }\n    });\n    return x;\n  },\n\n  questionAuthor(question) {\n    let u = User.findOne(question.CreatedBy);\n    return \"<span style='white-space:nowrap;'>\" + u.MyProfile.fullName() + \" <span class='label label-warning'>\" + u.MyProfile.UserType.Personality.getFourLetter() + \"</span></span>\";\n  },\n\n  getUserName(userId) {\n    let u = User.findOne({\n      _id: userId\n    });\n    u.callMethod('fullName', (err, result) => {\n      console.log(err, result);\n      return result;\n    }); //return u.fullName();\n  },\n\n  indexToCategory(ind) {\n    if (ind === 0) {\n      return 'IE';\n    }\n\n    if (ind === 1) {\n      return 'NS';\n    }\n\n    if (ind === 2) {\n      return 'TF';\n    }\n\n    if (ind === 3) {\n      return 'JP';\n    }\n\n    return 'UN';\n  },\n\n  categoryToIndex(cat) {\n    if (cat === 'IE') {\n      return 0;\n    }\n\n    if (cat === 'NS') {\n      return 1;\n    }\n\n    if (cat === 'TF') {\n      return 2;\n    }\n\n    if (cat === 'JP') {\n      return 3;\n    }\n\n    return -1;\n  },\n\n  categoryList() {\n    let categories = [{\n      text: 'IE',\n      value: 0\n    }, {\n      text: 'NS',\n      value: 1\n    }, {\n      text: 'TF',\n      value: 2\n    }, {\n      text: 'JP',\n      value: 3\n    }];\n    return categories;\n  },\n\n  averageAnswer(times, sum) {\n    if (times === 0) {\n      return 0;\n    }\n\n    return Math.round(Math.abs(sum) / times);\n  },\n\n  totalAnswers(right, left) {\n    return right + left;\n  },\n\n  canDelete(question) {\n    return question.TimesAnswered.LeftSum + question.TimesAnswered.RightSum < 1;\n  }\n\n});\nTemplate.add_questions.events({\n  'click button.quest-cat-select'(event, instance) {\n    console.log('click button.quest-cat-select =>', event, instance);\n    let newCat = $(event.target).data('category');\n    FlowRouter.go(\"/addQuestions/\" + newCat);\n\n    instance._category.set(newCat);\n\n    instance.categoryToIndex.set(instance.convertCategory(newCat));\n    instance.fixTabs();\n  },\n\n  'click button.dropdown-toggle'(event, instance) {\n    event.preventDefault();\n    console.log('click button.dropdown-toggle => ', event, instance);\n  },\n\n  'click ul.dropdown-menu li a'(event, instance) {\n    event.preventDefault();\n    console.log('click ul.dropdown-menu li a => ', event, instance);\n    let newCat = $(event.target).html();\n    FlowRouter.go($(event.target).attr('href'));\n\n    instance._category.set(newCat);\n\n    instance.categoryToIndex.set(instance.convertCategory(newCat)); //$('.Selected-Category').html(newCat);\n\n    $('[name=Category]').val($(event.target).data('value'));\n    $('button.quest-cat-select.cat-' + newCat).addClass('active');\n    instance.fixTabs();\n  },\n\n  'click span.toggle-enable'(event, instance) {\n    console.log('click span.toggle-enable => ', event, instance);\n    let qid = $(event.target).closest('tr').data('id');\n    let q = Question.findOne({\n      _id: qid\n    });\n    q.Active = !q.Active;\n    q.save();\n  },\n\n  'click span.delete'(event, instance) {\n    event.preventDefault();\n    console.log('click span.delete => ', event, instance);\n    const target = event.target;\n    let qid = $(target).data('qid');\n    let vals = instance.makeModalStuff(\"Are you really sure?\", \"<h5>Do you really want to delete the question:</h5><table class='table table-bordered'><tr>\" + $(\"#\" + qid).html() + \"</tr></table>\", \"No!\", \"I guess...\", function (event) {\n      $('#tempModal').modal('hide');\n      $(this).off(event);\n      Meteor.call('question.delete', qid, error => {\n        if (error) {\n          console.log(\"Error on delete: \", error);\n        } else {\n          console.log(qid + \" should be deleted...\");\n        }\n      });\n    }, {\n      qid: qid\n    });\n    instance.showModal(vals);\n  },\n\n  'submit #newQuestion'(event, instance) {\n    event.preventDefault();\n    console.log('submit #newQuestion => ', event, instance);\n    const target = event.target;\n    const values = {\n      //'Category':target.Category.value,\n      'Categories': $(target).find(\"#select-categories\")[0].selectize.items,\n      'Text': target.Text.value,\n      'LeftText': target.LeftText.value,\n      'RightText': target.RightText.value,\n      'segments': $(target).find(\"#select-segments\")[0].selectize ? $(target).find(\"#select-segments\")[0].selectize.items : []\n    };\n    console.log(values);\n    Meteor.call('question.insert', values.Categories, values.Text, values.LeftText, values.RightText, values.segments, error => {\n      if (error) {\n        console.log(\"EEEEEERRRORRRRR: \", error);\n      } else {\n        target.Text.value = '';\n        target.LeftText.value = '';\n        target.RightText.value = '';\n      }\n    });\n  }\n\n});\nTemplate.add_questions.onRendered(function () {\n  $('.dropdown-toggle').dropdown();\n  $('ul.nav-tabs li a').click(function (e) {\n    e.preventDefault();\n    $(this).tab('show');\n    $('tbody.edit-body').hide();\n    $('#' + $(this).data('type') + \"Table\").show();\n  });\n});","map":{"version":3,"sources":["imports/ui/pages/add_questions/add_questions.js"],"names":["Question","module","watch","require","v","User","FlowRouter","Meteor","TypeReading","UserSegment","Template","add_questions","onCreated","add_questionsOnCreated","_category","ReactiveVar","getParam","category","get","convertCategory","cat","categoryToIndex","categoryCheck","IE","NS","TF","JP","showModal","stuff","m","$","find","html","Title","Body","CloseText","SaveText","click","SaveFunction","_","each","data","name","val","modal","fixTabs","active","console","log","hide","show","makeModalStuff","title","body","closeText","saveText","saveFunction","autorun","subscription","subscribe","onStop","arguments","onReady","sort","createdAt","subscription3","userId","helpers","instance","userSegmentList","segList","s","forEach","push","value","_id","text","assignedUserSegments","q","assigned","i","segments","length","seg","findOne","questions","x","Categories","parseInt","questionAuthor","question","u","CreatedBy","MyProfile","fullName","UserType","Personality","getFourLetter","getUserName","callMethod","err","result","indexToCategory","ind","categoryList","categories","averageAnswer","times","sum","Math","round","abs","totalAnswers","right","left","canDelete","TimesAnswered","LeftSum","RightSum","events","event","newCat","target","go","set","preventDefault","attr","addClass","qid","closest","Active","save","vals","off","call","error","values","selectize","items","Text","LeftText","RightText","onRendered","dropdown","e","tab"],"mappings":"AAAA,IAAIA,QAAJ;AAAaC,OAAOC,KAAP,CAAaC,QAAQ,qCAAR,CAAb,EAA4D;AAACH,WAASI,CAAT,EAAW;AAACJ,eAASI,CAAT;AAAW;;AAAxB,CAA5D,EAAsF,CAAtF;AAAyF,IAAIC,IAAJ;AAASJ,OAAOC,KAAP,CAAaC,QAAQ,6BAAR,CAAb,EAAoD;AAACE,OAAKD,CAAL,EAAO;AAACC,WAAKD,CAAL;AAAO;;AAAhB,CAApD,EAAsE,CAAtE;AAAyE,IAAIE,UAAJ;AAAeL,OAAOC,KAAP,CAAaC,QAAQ,2BAAR,CAAb,EAAkD;AAACG,aAAWF,CAAX,EAAa;AAACE,iBAAWF,CAAX;AAAa;;AAA5B,CAAlD,EAAgF,CAAhF;AAAmF,IAAIG,MAAJ;AAAWN,OAAOC,KAAP,CAAaC,QAAQ,eAAR,CAAb,EAAsC;AAACI,SAAOH,CAAP,EAAS;AAACG,aAAOH,CAAP;AAAS;;AAApB,CAAtC,EAA4D,CAA5D;AAA+D,IAAII,WAAJ;AAAgBP,OAAOC,KAAP,CAAaC,QAAQ,6CAAR,CAAb,EAAoE;AAACK,cAAYJ,CAAZ,EAAc;AAACI,kBAAYJ,CAAZ;AAAc;;AAA9B,CAApE,EAAoG,CAApG;AAAuG,IAAIK,WAAJ;AAAgBR,OAAOC,KAAP,CAAaC,QAAQ,6CAAR,CAAb,EAAoE;AAACM,cAAYL,CAAZ,EAAc;AAACK,kBAAYL,CAAZ;AAAc;;AAA9B,CAApE,EAAoG,CAApG;AAAuGH,OAAOC,KAAP,CAAaC,QAAQ,sBAAR,CAAb;AAQllBO,SAASC,aAAT,CAAuBC,SAAvB,CAAiC,SAASC,sBAAT,GAAkC;AAC/D,OAAKC,SAAL,GAAiB,IAAIC,WAAJ,CAAgBT,WAAWU,QAAX,CAAoB,UAApB,CAAhB,CAAjB;;AACA,OAAKC,QAAL,GAAgB,MAAM,KAAKH,SAAL,CAAeI,GAAf,EAAtB;;AACA,OAAKC,eAAL,GAAwBC,GAAD,IAAS;AAC5B,QAAGA,QAAQ,IAAX,EAAiB;AAAE,aAAO,CAAP;AAAW;;AAC9B,QAAGA,QAAQ,IAAX,EAAiB;AAAE,aAAO,CAAP;AAAW;;AAC9B,QAAGA,QAAQ,IAAX,EAAiB;AAAE,aAAO,CAAP;AAAW;;AAC9B,QAAGA,QAAQ,IAAX,EAAiB;AAAE,aAAO,CAAP;AAAW;;AAC9B,WAAO,CAAC,CAAR;AACH,GAND;;AAOA,OAAKC,eAAL,GAAuB,IAAIN,WAAJ,CAAgB,KAAKI,eAAL,CAAqB,KAAKL,SAAL,CAAeI,GAAf,EAArB,CAAhB,CAAvB;;AACA,OAAKI,aAAL,GAAqB,MAAM;AACvB,WAAO;AACHC,UAAI,KAAKN,QAAL,OAAoB,IADrB;AAEHO,UAAI,KAAKP,QAAL,OAAoB,IAFrB;AAGHQ,UAAI,KAAKR,QAAL,OAAoB,IAHrB;AAIHS,UAAI,KAAKT,QAAL,OAAoB;AAJrB,KAAP;AAMH,GAPD;;AASA,OAAKU,SAAL,GAAiB,UAASC,KAAT,EAAgB;AAC7B,QAAIC,IAAIC,EAAE,YAAF,CAAR;AACAD,MAAEE,IAAF,CAAO,gBAAP,EAAyBC,IAAzB,CAA8BJ,MAAMK,KAApC;AACAJ,MAAEE,IAAF,CAAO,gBAAP,EAAyBC,IAAzB,CAA8BJ,MAAMM,IAApC;AACAL,MAAEE,IAAF,CAAO,kCAAP,EAA2CC,IAA3C,CAAgDJ,MAAMO,SAAtD;AACAN,MAAEE,IAAF,CAAO,iCAAP,EAA0CC,IAA1C,CAA+CJ,MAAMQ,QAArD,EAA+DC,KAA/D,CAAqET,MAAMU,YAA3E;;AACAC,MAAEC,IAAF,CAAOZ,MAAMa,IAAb,EAAmB,UAAUC,IAAV,EAAgBC,GAAhB,EAAqB;AACpCd,QAAEY,IAAF,CAAOC,IAAP,EAAaC,GAAb;AACH,KAFD;;AAGAd,MAAEe,KAAF,CAAQ,MAAR;AACH,GAVD;;AAWA,OAAKC,OAAL,GAAe,MAAM;AACjB,QAAIC,SAAShB,EAAE,gCAAF,EAAoCW,IAApC,CAAyC,MAAzC,CAAb;AACAM,YAAQC,GAAR,CAAYF,MAAZ;AACAhB,MAAE,iBAAF,EAAqBmB,IAArB;AACAnB,MAAE,MAAIgB,MAAJ,GAAW,OAAb,EAAsBI,IAAtB;AACH,GALD;;AAMA,OAAKC,cAAL,GAAsB,UAASC,KAAT,EAAgBC,IAAhB,EAAsBC,SAAtB,EAAiCC,QAAjC,EAA2CC,YAA3C,EAAyDf,IAAzD,EAA+D;AACjF,WAAO;AACHR,aAAOmB,KADJ;AAEHlB,YAAMmB,IAFH;AAGHlB,iBAAWmB,SAHR;AAIHlB,gBAAUmB,QAJP;AAKHjB,oBAAckB,YALX;AAMHf,YAAMA;AANH,KAAP;AAQH,GATD;;AAUA,OAAKgB,OAAL,CAAc,MAAM;AAAEV,YAAQC,GAAR,CAAY,gBAAZ,EAA8B,KAAK3B,eAAL,CAAqBH,GAArB,EAA9B;AAClB,SAAKwC,YAAL,GAAoB,KAAKC,SAAL,CAAe,sBAAf,EAAuC,KAAKtC,eAAL,CAAqBH,GAArB,EAAvC,EAAmE;AACnF0C,cAAQ,YAAY;AAChBb,gBAAQC,GAAR,CAAY,wBAAZ,EAAsCa,SAAtC,EAAiD,IAAjD;AACH,OAHkF;AAGhFC,eAAS,YAAY;AACpBf,gBAAQC,GAAR,CAAY,sBAAZ,EAAoCa,SAApC,EAA+C,IAA/C;AACH,OALkF;AAMnFE,YAAM;AAACC,mBAAW,CAAC;AAAb;AAN6E,KAAnE,CAApB;AAQAjB,YAAQC,GAAR,CAAY,KAAKU,YAAjB;AACA,SAAKO,aAAL,GAAqB,KAAKN,SAAL,CAAe,aAAf,EAA8B,KAAKO,MAAnC,EAA2C;AAC5DN,cAAQ,YAAY;AAChBb,gBAAQC,GAAR,CAAY,qCAAZ,EAAmDa,SAAnD,EAA8D,IAA9D;AACH,OAH2D;AAI5DC,eAAS,YAAY;AACjBf,gBAAQC,GAAR,CAAY,mCAAZ,EAAiDa,SAAjD,EAA4D,IAA5D;AACH;AAN2D,KAA3C,CAArB;AAQAd,YAAQC,GAAR,CAAY,KAAKiB,aAAjB;AACH,GAnBD;AAoBH,CAnED;AAqEAvD,SAASC,aAAT,CAAuBwD,OAAvB,CAA+B;AAC3BlD,aAAW;AACP,WAAOP,SAAS0D,QAAT,GAAoBnD,QAApB,EAAP;AACH,GAH0B;;AAI3BK,kBAAgB;AACZ,WAAOZ,SAAS0D,QAAT,GAAoB9C,aAApB,EAAP;AACH,GAN0B;;AAO3B+C,oBAAkB;AACd,QAAIC,UAAU,EAAd;AACA,QAAIC,IAAI9D,YAAYsB,IAAZ,EAAR;AAEAwC,MAAEC,OAAF,CAAW3C,CAAD,IAAO;AACbyC,cAAQG,IAAR,CAAc;AACVC,eAAO7C,EAAE8C,GADC;AAEVC,cAAM/C,EAAEa;AAFE,OAAd;AAIH,KALD;AAMA,WAAO4B,OAAP;AACH,GAlB0B;;AAmB3BO,uBAAqBC,CAArB,EAAwB;AACpB/B,YAAQC,GAAR,CAAY,eAAZ,EAA4B8B,CAA5B;;AACA,QAAI,OAAOA,CAAP,KAAa,WAAjB,EAA8B;AAC1B,aAAO,EAAP;AACH;;AACD,QAAIC,WAAW,EAAf;;AAEA,SAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIF,EAAEG,QAAF,CAAWC,MAA/B,EAAuCF,GAAvC,EAA4C;AACxC,UAAIG,MAAM1E,YAAY2E,OAAZ,CAAqB;AAACT,aAAIG,EAAEG,QAAF,CAAWD,CAAX;AAAL,OAArB,CAAV;AACAD,eAASN,IAAT,CAAe;AACXC,eAAOI,EAAEG,QAAF,CAAWD,CAAX,CADI;AAEXJ,cAAMO,IAAIzC;AAFC,OAAf;AAIH;;AACD,WAAOqC,QAAP;AACH,GAlC0B;;AAmC3BM,cAAY;AACR,QAAIC,IAAItF,SAAS+B,IAAT,CAAc;AAClBwD,kBAAWC,SAAS9E,SAAS0D,QAAT,GAAoB/C,eAApB,CAAoCH,GAApC,EAAT;AADO,KAAd,EAEN;AAAE6C,YAAM;AAAEC,mBAAW,CAAC;AAAd;AAAR,KAFM,CAAR;AAGA,WAAOsB,CAAP;AACH,GAxC0B;;AAyC3BG,iBAAeC,QAAf,EAAyB;AACrB,QAAIC,IAAItF,KAAK+E,OAAL,CAAaM,SAASE,SAAtB,CAAR;AACA,WAAO,uCAAqCD,EAAEE,SAAF,CAAYC,QAAZ,EAArC,GAA4D,qCAA5D,GAAkGH,EAAEE,SAAF,CAAYE,QAAZ,CAAqBC,WAArB,CAAiCC,aAAjC,EAAlG,GAAmJ,gBAA1J;AACH,GA5C0B;;AA6C3BC,cAAYhC,MAAZ,EAAoB;AAChB,QAAIyB,IAAItF,KAAK+E,OAAL,CAAa;AAACT,WAAIT;AAAL,KAAb,CAAR;AACAyB,MAAEQ,UAAF,CAAa,UAAb,EAAyB,CAACC,GAAD,EAAMC,MAAN,KAAiB;AACtCtD,cAAQC,GAAR,CAAYoD,GAAZ,EAAiBC,MAAjB;AACA,aAAOA,MAAP;AACH,KAHD,EAFgB,CAMhB;AACH,GApD0B;;AAqD3BC,kBAAgBC,GAAhB,EAAqB;AACjB,QAAGA,QAAQ,CAAX,EAAc;AAAE,aAAO,IAAP;AAAc;;AAC9B,QAAGA,QAAQ,CAAX,EAAc;AAAE,aAAO,IAAP;AAAc;;AAC9B,QAAGA,QAAQ,CAAX,EAAc;AAAE,aAAO,IAAP;AAAc;;AAC9B,QAAGA,QAAQ,CAAX,EAAc;AAAE,aAAO,IAAP;AAAc;;AAC9B,WAAO,IAAP;AACH,GA3D0B;;AA4D3BlF,kBAAgBD,GAAhB,EAAqB;AACjB,QAAGA,QAAQ,IAAX,EAAiB;AAAE,aAAO,CAAP;AAAW;;AAC9B,QAAGA,QAAQ,IAAX,EAAiB;AAAE,aAAO,CAAP;AAAW;;AAC9B,QAAGA,QAAQ,IAAX,EAAiB;AAAE,aAAO,CAAP;AAAW;;AAC9B,QAAGA,QAAQ,IAAX,EAAiB;AAAE,aAAO,CAAP;AAAW;;AAC9B,WAAO,CAAC,CAAR;AACH,GAlE0B;;AAmE3BoF,iBAAe;AACX,QAAIC,aAAa,CACb;AAAC7B,YAAK,IAAN;AAAYF,aAAM;AAAlB,KADa,EAEb;AAACE,YAAK,IAAN;AAAYF,aAAM;AAAlB,KAFa,EAGb;AAACE,YAAK,IAAN;AAAYF,aAAM;AAAlB,KAHa,EAIb;AAACE,YAAK,IAAN;AAAYF,aAAM;AAAlB,KAJa,CAAjB;AAMA,WAAO+B,UAAP;AACH,GA3E0B;;AA4E3BC,gBAAcC,KAAd,EAAqBC,GAArB,EAA0B;AACtB,QAAGD,UAAU,CAAb,EAAgB;AAAE,aAAO,CAAP;AAAW;;AAC7B,WAAOE,KAAKC,KAAL,CAAYD,KAAKE,GAAL,CAASH,GAAT,IAAgBD,KAA5B,CAAP;AACH,GA/E0B;;AAgF3BK,eAAaC,KAAb,EAAoBC,IAApB,EAA0B;AACtB,WAAOD,QAAQC,IAAf;AACH,GAlF0B;;AAmF3BC,YAAUzB,QAAV,EAAoB;AAChB,WAAQA,SAAS0B,aAAT,CAAuBC,OAAvB,GAAiC3B,SAAS0B,aAAT,CAAuBE,QAAzD,GAAqE,CAA5E;AACH;;AArF0B,CAA/B;AAwFA5G,SAASC,aAAT,CAAuB4G,MAAvB,CAA8B;AAC1B,kCAAgCC,KAAhC,EAAuCpD,QAAvC,EAAiD;AAC7CrB,YAAQC,GAAR,CAAY,kCAAZ,EAAgDwE,KAAhD,EAAuDpD,QAAvD;AACA,QAAIqD,SAAS3F,EAAE0F,MAAME,MAAR,EAAgBjF,IAAhB,CAAqB,UAArB,CAAb;AACAnC,eAAWqH,EAAX,CAAc,mBAAiBF,MAA/B;;AACArD,aAAStD,SAAT,CAAmB8G,GAAnB,CAAuBH,MAAvB;;AACArD,aAAS/C,eAAT,CAAyBuG,GAAzB,CAA6BxD,SAASjD,eAAT,CAAyBsG,MAAzB,CAA7B;AACArD,aAASvB,OAAT;AACH,GARyB;;AAS1B,iCAA+B2E,KAA/B,EAAsCpD,QAAtC,EAAgD;AAC5CoD,UAAMK,cAAN;AACA9E,YAAQC,GAAR,CAAY,kCAAZ,EAA+CwE,KAA/C,EAAsDpD,QAAtD;AACH,GAZyB;;AAa1B,gCAA8BoD,KAA9B,EAAqCpD,QAArC,EAA+C;AAC3CoD,UAAMK,cAAN;AACA9E,YAAQC,GAAR,CAAY,iCAAZ,EAA+CwE,KAA/C,EAAsDpD,QAAtD;AACA,QAAIqD,SAAS3F,EAAE0F,MAAME,MAAR,EAAgB1F,IAAhB,EAAb;AACA1B,eAAWqH,EAAX,CAAc7F,EAAE0F,MAAME,MAAR,EAAgBI,IAAhB,CAAqB,MAArB,CAAd;;AACA1D,aAAStD,SAAT,CAAmB8G,GAAnB,CAAuBH,MAAvB;;AACArD,aAAS/C,eAAT,CAAyBuG,GAAzB,CAA6BxD,SAASjD,eAAT,CAAyBsG,MAAzB,CAA7B,EAN2C,CAO3C;;AACA3F,MAAE,iBAAF,EAAqBa,GAArB,CAAyBb,EAAE0F,MAAME,MAAR,EAAgBjF,IAAhB,CAAqB,OAArB,CAAzB;AACAX,MAAE,iCAA+B2F,MAAjC,EAAyCM,QAAzC,CAAkD,QAAlD;AACA3D,aAASvB,OAAT;AACH,GAxByB;;AAyB1B,6BAA2B2E,KAA3B,EAAkCpD,QAAlC,EAA4C;AACxCrB,YAAQC,GAAR,CAAY,8BAAZ,EAA4CwE,KAA5C,EAAmDpD,QAAnD;AACA,QAAI4D,MAAMlG,EAAE0F,MAAME,MAAR,EAAgBO,OAAhB,CAAwB,IAAxB,EAA8BxF,IAA9B,CAAmC,IAAnC,CAAV;AACA,QAAIqC,IAAI9E,SAASoF,OAAT,CAAiB;AAACT,WAAIqD;AAAL,KAAjB,CAAR;AACAlD,MAAEoD,MAAF,GAAW,CAACpD,EAAEoD,MAAd;AACApD,MAAEqD,IAAF;AACH,GA/ByB;;AAgC1B,sBAAoBX,KAApB,EAA2BpD,QAA3B,EAAqC;AACjCoD,UAAMK,cAAN;AACA9E,YAAQC,GAAR,CAAY,uBAAZ,EAAqCwE,KAArC,EAA4CpD,QAA5C;AACA,UAAMsD,SAASF,MAAME,MAArB;AACA,QAAIM,MAAMlG,EAAE4F,MAAF,EAAUjF,IAAV,CAAe,KAAf,CAAV;AACA,QAAI2F,OAAOhE,SAASjB,cAAT,CAAwB,sBAAxB,EAAgD,gGAA8FrB,EAAE,MAAIkG,GAAN,EAAWhG,IAAX,EAA9F,GAAgH,eAAhK,EAAiL,KAAjL,EAAwL,YAAxL,EAAsM,UAAUwF,KAAV,EAAiB;AAC9N1F,QAAE,YAAF,EAAgBc,KAAhB,CAAsB,MAAtB;AACAd,QAAE,IAAF,EAAQuG,GAAR,CAAYb,KAAZ;AACAjH,aAAO+H,IAAP,CAAY,iBAAZ,EAA+BN,GAA/B,EAAqCO,KAAD,IAAU;AAC1C,YAAGA,KAAH,EAAU;AAAExF,kBAAQC,GAAR,CAAY,mBAAZ,EAAiCuF,KAAjC;AAA0C,SAAtD,MACK;AACDxF,kBAAQC,GAAR,CAAYgF,MAAI,uBAAhB;AACH;AACJ,OALD;AAMH,KATU,EASR;AAACA,WAAIA;AAAL,KATQ,CAAX;AAUA5D,aAASzC,SAAT,CAAmByG,IAAnB;AACH,GAhDyB;;AAiD1B,wBAAsBZ,KAAtB,EAA6BpD,QAA7B,EAAuC;AACnCoD,UAAMK,cAAN;AACA9E,YAAQC,GAAR,CAAY,yBAAZ,EAAuCwE,KAAvC,EAA8CpD,QAA9C;AAEA,UAAMsD,SAASF,MAAME,MAArB;AACA,UAAMc,SAAS;AACX;AACA,oBAAa1G,EAAE4F,MAAF,EAAU3F,IAAV,CAAe,oBAAf,EAAqC,CAArC,EAAwC0G,SAAxC,CAAkDC,KAFpD;AAGX,cAAOhB,OAAOiB,IAAP,CAAYjE,KAHR;AAIX,kBAAWgD,OAAOkB,QAAP,CAAgBlE,KAJhB;AAKX,mBAAYgD,OAAOmB,SAAP,CAAiBnE,KALlB;AAMX,kBAAY5C,EAAE4F,MAAF,EAAU3F,IAAV,CAAe,kBAAf,EAAmC,CAAnC,EAAsC0G,SAAtC,GAAkD3G,EAAE4F,MAAF,EAAU3F,IAAV,CAAe,kBAAf,EAAmC,CAAnC,EAAsC0G,SAAtC,CAAgDC,KAAlG,GAA0G;AAN3G,KAAf;AAQA3F,YAAQC,GAAR,CAAYwF,MAAZ;AAEAjI,WAAO+H,IAAP,CAAY,iBAAZ,EAA+BE,OAAOjD,UAAtC,EAAkDiD,OAAOG,IAAzD,EAA+DH,OAAOI,QAAtE,EAAgFJ,OAAOK,SAAvF,EAAkGL,OAAOvD,QAAzG,EAAoHsD,KAAD,IAAW;AAC1H,UAAIA,KAAJ,EAAW;AACPxF,gBAAQC,GAAR,CAAY,mBAAZ,EAAiCuF,KAAjC;AACH,OAFD,MAEO;AACHb,eAAOiB,IAAP,CAAYjE,KAAZ,GAAoB,EAApB;AACAgD,eAAOkB,QAAP,CAAgBlE,KAAhB,GAAwB,EAAxB;AACAgD,eAAOmB,SAAP,CAAiBnE,KAAjB,GAAyB,EAAzB;AACH;AACJ,KARD;AASH;;AAzEyB,CAA9B;AA4EAhE,SAASC,aAAT,CAAuBmI,UAAvB,CAAkC,YAAW;AACzChH,IAAE,kBAAF,EAAsBiH,QAAtB;AACAjH,IAAE,kBAAF,EAAsBO,KAAtB,CAA4B,UAAU2G,CAAV,EAAa;AAAEA,MAAEnB,cAAF;AAAoB/F,MAAE,IAAF,EAAQmH,GAAR,CAAY,MAAZ;AAAqBnH,MAAE,iBAAF,EAAqBmB,IAArB;AAA6BnB,MAAE,MAAIA,EAAE,IAAF,EAAQW,IAAR,CAAa,MAAb,CAAJ,GAAyB,OAA3B,EAAoCS,IAApC;AAA6C,GAA9J;AACH,CAHD","sourcesContent":["import { Question } from '/imports/api/questions/questions.js';\nimport { User } from '/imports/api/users/users.js';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Meteor } from 'meteor/meteor';\nimport { TypeReading } from '/imports/api/type_readings/type_readings.js';\nimport { UserSegment } from '/imports/api/user_segments/user_segments.js';\nimport './add_questions.html';\n\nTemplate.add_questions.onCreated(function add_questionsOnCreated() {\n    this._category = new ReactiveVar(FlowRouter.getParam('category'));\n    this.category = () => this._category.get();\n    this.convertCategory = (cat) => {\n        if(cat === 'IE') { return 0; }\n        if(cat === 'NS') { return 1; }\n        if(cat === 'TF') { return 2; }\n        if(cat === 'JP') { return 3; }\n        return -1;\n    };\n    this.categoryToIndex = new ReactiveVar(this.convertCategory(this._category.get()));\n    this.categoryCheck = () => {\n        return {\n            IE: this.category() === 'IE',\n            NS: this.category() === 'NS',\n            TF: this.category() === 'TF',\n            JP: this.category() === 'JP'\n        };\n    };\n\n    this.showModal = function(stuff) {\n        let m = $('#tempModal');\n        m.find('h4.modal-title').html(stuff.Title);\n        m.find('div.modal-body').html(stuff.Body);\n        m.find('div.modal-footer button.closebtn').html(stuff.CloseText);\n        m.find('div.modal-footer button.savebtn').html(stuff.SaveText).click(stuff.SaveFunction);\n        _.each(stuff.data, function (name, val) {\n            m.data(name, val);\n        });\n        m.modal('show');\n    };\n    this.fixTabs = () => {\n        let active = $('li[role=presentation].active a').data('type');\n        console.log(active);\n        $('tbody.edit-body').hide();\n        $('#'+active+\"Table\").show();\n    };\n    this.makeModalStuff = function(title, body, closeText, saveText, saveFunction, data) {\n        return {\n            Title: title,\n            Body: body,\n            CloseText: closeText,\n            SaveText: saveText,\n            SaveFunction: saveFunction,\n            data: data\n        };\n    };\n    this.autorun( () => { console.log(\"autorunning...\", this.categoryToIndex.get());\n        this.subscription = this.subscribe('questions.bycategory', this.categoryToIndex.get(), {\n            onStop: function () {\n                console.log(\"Subscription stopped! \", arguments, this);\n            }, onReady: function () {\n                console.log(\"Subscription ready! \", arguments, this);\n            },\n            sort: {createdAt: -1}\n        });\n        console.log(this.subscription);\n        this.subscription3 = this.subscribe('segmentList', this.userId, {\n            onStop: function () {\n                console.log(\"Segment List subscription stopped! \", arguments, this);\n            },\n            onReady: function () {\n                console.log(\"Segment List subscription ready! \", arguments, this);\n            }\n        });\n        console.log(this.subscription3);\n    });\n});\n\nTemplate.add_questions.helpers({\n    category() {\n        return Template.instance().category();\n    },\n    categoryCheck() {\n        return Template.instance().categoryCheck();\n    },\n    userSegmentList() {\n        let segList = [];\n        let s = UserSegment.find( );\n\n        s.forEach((m) => {\n            segList.push( {\n                value: m._id,\n                text: m.name\n            });\n        });\n        return segList;\n    },\n    assignedUserSegments(q) {\n        console.log(\"sssssssssssss\",q);\n        if (typeof q === \"undefined\") {\n            return [];\n        }\n        let assigned = [];\n\n        for (let i = 0; i < q.segments.length; i++) {\n            let seg = UserSegment.findOne( {_id:q.segments[i]} );\n            assigned.push( {\n                value: q.segments[i],\n                text: seg.name\n            } );\n        }\n        return assigned;\n    },\n    questions() {\n        let x = Question.find({\n            Categories:parseInt(Template.instance().categoryToIndex.get())\n        },{ sort: { createdAt: -1 } });\n        return x;\n    },\n    questionAuthor(question) {\n        let u = User.findOne(question.CreatedBy);\n        return \"<span style='white-space:nowrap;'>\"+u.MyProfile.fullName()+\" <span class='label label-warning'>\"+u.MyProfile.UserType.Personality.getFourLetter()+\"</span></span>\";\n    },\n    getUserName(userId) {\n        let u = User.findOne({_id:userId});\n        u.callMethod('fullName', (err, result) => {\n            console.log(err, result);\n            return result;\n        });\n        //return u.fullName();\n    },\n    indexToCategory(ind) {\n        if(ind === 0) { return 'IE'; }\n        if(ind === 1) { return 'NS'; }\n        if(ind === 2) { return 'TF'; }\n        if(ind === 3) { return 'JP'; }\n        return 'UN';\n    },\n    categoryToIndex(cat) {\n        if(cat === 'IE') { return 0; }\n        if(cat === 'NS') { return 1; }\n        if(cat === 'TF') { return 2; }\n        if(cat === 'JP') { return 3; }\n        return -1;\n    },\n    categoryList() {\n        let categories = [\n            {text:'IE', value:0},\n            {text:'NS', value:1},\n            {text:'TF', value:2},\n            {text:'JP', value:3}\n        ];\n        return categories;\n    },\n    averageAnswer(times, sum) {\n        if(times === 0) { return 0; }\n        return Math.round((Math.abs(sum) / times));\n    },\n    totalAnswers(right, left) {\n        return right + left;\n    },\n    canDelete(question) {\n        return (question.TimesAnswered.LeftSum + question.TimesAnswered.RightSum) < 1;\n    }\n});\n\nTemplate.add_questions.events({\n    'click button.quest-cat-select'(event, instance) {\n        console.log('click button.quest-cat-select =>', event, instance);\n        let newCat = $(event.target).data('category');\n        FlowRouter.go(\"/addQuestions/\"+newCat);\n        instance._category.set(newCat);\n        instance.categoryToIndex.set(instance.convertCategory(newCat));\n        instance.fixTabs();\n    },\n    'click button.dropdown-toggle'(event, instance) {\n        event.preventDefault();\n        console.log('click button.dropdown-toggle => ',event, instance);\n    },\n    'click ul.dropdown-menu li a'(event, instance) {\n        event.preventDefault();\n        console.log('click ul.dropdown-menu li a => ', event, instance);\n        let newCat = $(event.target).html();\n        FlowRouter.go($(event.target).attr('href'));\n        instance._category.set(newCat);\n        instance.categoryToIndex.set(instance.convertCategory(newCat));\n        //$('.Selected-Category').html(newCat);\n        $('[name=Category]').val($(event.target).data('value'));\n        $('button.quest-cat-select.cat-'+newCat).addClass('active');\n        instance.fixTabs();\n    },\n    'click span.toggle-enable'(event, instance) {\n        console.log('click span.toggle-enable => ', event, instance);\n        let qid = $(event.target).closest('tr').data('id');\n        let q = Question.findOne({_id:qid});\n        q.Active = !q.Active;\n        q.save();\n    },\n    'click span.delete'(event, instance) {\n        event.preventDefault();\n        console.log('click span.delete => ', event, instance);\n        const target = event.target;\n        let qid = $(target).data('qid');\n        let vals = instance.makeModalStuff(\"Are you really sure?\", \"<h5>Do you really want to delete the question:</h5><table class='table table-bordered'><tr>\"+$(\"#\"+qid).html()+\"</tr></table>\", \"No!\", \"I guess...\", function (event) {\n            $('#tempModal').modal('hide');\n            $(this).off(event);\n            Meteor.call('question.delete', qid, (error)=> {\n                if(error) { console.log(\"Error on delete: \", error); }\n                else {\n                    console.log(qid+\" should be deleted...\");\n                }\n            });\n        }, {qid:qid});\n        instance.showModal(vals);\n    },\n    'submit #newQuestion'(event, instance) {\n        event.preventDefault();\n        console.log('submit #newQuestion => ', event, instance);\n\n        const target = event.target;\n        const values = {\n            //'Category':target.Category.value,\n            'Categories':$(target).find(\"#select-categories\")[0].selectize.items,\n            'Text':target.Text.value,\n            'LeftText':target.LeftText.value,\n            'RightText':target.RightText.value,\n            'segments':($(target).find(\"#select-segments\")[0].selectize ? $(target).find(\"#select-segments\")[0].selectize.items : [])\n        };\n        console.log(values);\n\n        Meteor.call('question.insert', values.Categories, values.Text, values.LeftText, values.RightText, values.segments, (error) => {\n            if (error) {\n                console.log(\"EEEEEERRRORRRRR: \", error);\n            } else {\n                target.Text.value = '';\n                target.LeftText.value = '';\n                target.RightText.value = '';\n            }\n        });\n    }\n});\n\nTemplate.add_questions.onRendered(function() {\n    $('.dropdown-toggle').dropdown();\n    $('ul.nav-tabs li a').click(function (e) { e.preventDefault(); $(this).tab('show'); $('tbody.edit-body').hide(); $('#'+$(this).data('type')+\"Table\").show(); });\n});\n"]},"sourceType":"script","hash":"210a15151552873fa1f9baa9cf0c4c94bbd9553e"}
