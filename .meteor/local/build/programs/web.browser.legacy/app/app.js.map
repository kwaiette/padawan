{"version":3,"sources":["meteor://ðŸ’»app/imports/ui/components/header/header.js","meteor://ðŸ’»app/imports/ui/components/label_list/label_list.js","meteor://ðŸ’»app/imports/ui/components/notification_list/notification_list.js","meteor://ðŸ’»app/imports/ui/components/personality/personality.js","meteor://ðŸ’»app/imports/ui/components/questions/questions.js","meteor://ðŸ’»app/imports/ui/components/select_autocomplete/select_autocomplete.js","meteor://ðŸ’»app/imports/ui/components/select_feedback/select_feedback.js","meteor://ðŸ’»app/imports/ui/components/video_embed/video_embed.js","meteor://ðŸ’»app/imports/ui/layouts/body/body.js","meteor://ðŸ’»app/imports/ui/layouts/login/login.js","meteor://ðŸ’»app/imports/ui/pages/add_questions/add_questions.js","meteor://ðŸ’»app/imports/ui/pages/add_readings/add_readings.js","meteor://ðŸ’»app/imports/ui/pages/admin_teams/admin_teams.js","meteor://ðŸ’»app/imports/ui/pages/ask_questions/ask_questions.js","meteor://ðŸ’»app/imports/ui/pages/dash_min/dash_min.js","meteor://ðŸ’»app/imports/ui/pages/home/home.js","meteor://ðŸ’»app/imports/ui/pages/individual_goals/individual_goals.js","meteor://ðŸ’»app/imports/ui/pages/learn_share/learn_share.js","meteor://ðŸ’»app/imports/ui/pages/learn_share_list/learn_share_list.js","meteor://ðŸ’»app/imports/ui/pages/not-found/not-found.js","meteor://ðŸ’»app/imports/ui/pages/team_goals/team_goals.js","meteor://ðŸ’»app/imports/ui/pages/user_dashboard/user_dashboard.js","meteor://ðŸ’»app/imports/ui/pages/user_profile/user_profile.js","meteor://ðŸ’»app/imports/ui/pages/user_segments/user_segments.js","meteor://ðŸ’»app/imports/ui/pages/verify/verify.js","meteor://ðŸ’»app/imports/api/categories/categories.js","meteor://ðŸ’»app/imports/api/individual_goals/individual_goals.js","meteor://ðŸ’»app/imports/api/learn_share/learn_share.js","meteor://ðŸ’»app/imports/api/questions/questions.js","meteor://ðŸ’»app/imports/api/team_goals/team_goals.js","meteor://ðŸ’»app/imports/api/teams/teams.js","meteor://ðŸ’»app/imports/api/type_readings/type_readings.js","meteor://ðŸ’»app/imports/api/user_feedback/user_feedback.js","meteor://ðŸ’»app/imports/api/user_notify/user_notify.js","meteor://ðŸ’»app/imports/api/user_segments/user_segments.js","meteor://ðŸ’»app/imports/api/users/users.js","meteor://ðŸ’»app/imports/startup/both/at_config.js","meteor://ðŸ’»app/imports/startup/both/defaults.js","meteor://ðŸ’»app/imports/startup/both/index.js","meteor://ðŸ’»app/imports/startup/client/config.js","meteor://ðŸ’»app/imports/startup/client/index.js","meteor://ðŸ’»app/imports/startup/client/routes.js","meteor://ðŸ’»app/client/main.js"],"names":["module","watch","require","User","v","FlowRouter","Template","header","onCreated","autorun","subscription","subscribe","teamName","onStop","console","log","arguments","onReady","helpers","userName","u","findOne","_id","Meteor","userId","MyProfile","fullName","events","event","instance","preventDefault","go","label_list","customClass","item","value","slice","UserNotify","notificationClickAct","action","length","notification_list","notifications","MAX_NOTIFICATIONS","n","find","sort","createdDate","noteList","forEach","note","push","title","body","isRead","isPushed","Date","markNotified","pushNotify","onclick","nid","target","data","un","markRead","close","split","when","secondsAgo","parseInt","toLocaleDateString","read","is","hasUnread","fetch","$target","$","$li","closest","noteActionStr","noteAction","Question","Profile","UserType","MyersBriggs","Answer","TypeReading","minQuestionsAnswered","personality","subscription2","readings","tr","user","isMinMet","AnsweredQuestions","remainingMinQCount","rmn","Math","max","opacityByCategory","category","userObj","Personality","getIdentifierById","abs","Value","percentByCategory","round","letterByCategory","identifier","userImageUrl","Gravatar","imageUrl","emails","address","size","modal","singleReading","getHSize","reading","count","delta","_","TypeReadingCategories","cat","Range","Delta","Header","questions","Session","get","useg","segments","conditions","$exists","$eq","$in","$or","reversed","index","isRemainingGreaterThan","num","getTemplate","questionTemplate","questionTemplateReversed","answeredQuestionsLength","totalQuestions","total","getTotalQuestions","call","error","result","setTotalQuestions","document","getElementById","innerHTML","parent","values","questionId","isReversed","remove","set","random","question","getReadingsAsJSON","JSON","stringify","Readings","onRendered","updateValue","elem","html","updateBGOpacity","updateReading","curMax","each","i","Rank","Text","m","css","replace","btn","parents","newRGBA","firstNode","noUiSlider","start","step","range","min","on","val","select_autocomplete","self","dat","currentData","list","params","plugins","options","onItemAdd","onItemRemove","readOnly","create","$select","id","id2","selectize","clear","clearOptions","addOption","selected","o","addItem","refreshItems","UserFeedback","selectedText","selectionHandler","$box","window","getSelection","toString","hide","show","select_feedback","onDestroyed","off","commentsMade","uf","source","prop","fbk","context","comment","err","rslt","video_embed","_fileExists","ReactiveVar","fileExists","fname","UserSegment","add_questions","add_questionsOnCreated","_category","getParam","convertCategory","categoryToIndex","categoryCheck","IE","NS","TF","JP","showModal","stuff","Title","Body","CloseText","SaveText","click","SaveFunction","name","fixTabs","active","makeModalStuff","closeText","saveText","saveFunction","createdAt","subscription3","userSegmentList","segList","s","text","assignedUserSegments","q","assigned","seg","x","Categories","questionAuthor","CreatedBy","getFourLetter","getUserName","callMethod","indexToCategory","ind","categoryList","categories","averageAnswer","times","sum","totalAnswers","right","left","canDelete","TimesAnswered","LeftSum","RightSum","newCat","attr","addClass","qid","Active","save","vals","items","LeftText","RightText","dropdown","e","tab","add_readings","add_readingsOnCreated","readingHasCategory","readingCategory","low","high","getRange","isHigh","readingAuthor","rid","hasClass","removeClass","slideDown","slideUp","me","parentData","dataset","hi","mom","view","template","__helpers","Category","High","Low","ReadingId","readingId","Team","TeamIcon","TeamGoal","admin_teams","join","setTimeout","$item","t","Name","addRole","$control","removeRole","specificTeam","teams","t_invited","t_member","t_else","team","Roles","userIsInRole","Members","includes","concat","teamsMemberOf","GLOBAL_GROUP","filter","tm","Default","teamsOther","teamMembers","teamRole","memberList","firstName","lastName","roles","uniqueId","idLength","possible","charAt","floor","teamRequests","requestList","rolesList","getAllRoles","r","users","userAddList","addList","teamChanged","$g","teamUnchanged","saveTeam","teamId","saveObj","Description","updateFromObj","file","currentTarget","files","reader","FileReader","onload","fileLoadEvent","uploadIcon","readAsBinaryString","$team","$t","newTeamName","newTeamDescription","newTeam","fadeOut","stopPropagation","userList","adminRequestUserJoin","toggleClass","userAcceptJoin","userDeclineJoin","userRequestJoin","adminAcceptJoin","adminRejectJoin","role","$teamContainer","$targetExpandBtn","animate","scrollTop","offset","top","uid","team_view","fldEnabled","fld","g","hasModifyPerm","iconData64","Icon64","hasTeamRequests","hasTeamInvites","teamInvites","inviteList","ask_questions","dash_min","IndividualGoal","BLANK_GOAL","description","_hasSubgoalView","_subgoalId","individual_goals","userSubscriptionReady","modalGoalId","getUserId","datetimepicker","format","useCurrent","showClear","showClose","$newgoal","detach","append","resetNewGoalForm","valInputs","saveGoal","goalId","privacy","startDate","dueDate","rvwDate","reviewDate","parentId","reviewedOnDate","reachedDate","goalChanged","goalUnchanged","$goal","$modalParent","$btnAdd","$comment","newComment","addComment","addReviewComment","$btnCancel","fadeIn","$goalContainer","debounce","gid","goalReload","hasGoals","hasGoalsTeam","tid","individualGoals","individualGoalsTeam","ownList","blankGoal","Object","assign","hasSubgoalView","hasView","subgoal","subgoalId","goalComments","c","reviewComments","formatDate","dateObj","teamList","igoal_view","childGoals","goal","children","hasChildren","doesHave","dateField","d","dateText","getTime","getTimezoneOffset","toISOString","progressPct","currDt","totalDuration","timeSinceStart","pct","userHasModifyPerm","isNew","teamSelected","privacySelected","privVal","collapsed","pid","child_igoal_view","LearnShareSession","generateGuestId","app","client_id","meeting","version","initSkypeAPI","sessionStorage","hasToken","test","location","hash","apiAccessToken","hasError","pathParts","pathname","lastLearnShareId","origin","tokenresponse","parseHashParams","access_token","Skype","initialize","apiKey","correlationIds","sessionId","api","application","apiSignIn","paramarray","param","signInManager","signIn","cors","redirect_uri","origins","then","a","createMeeting","conversationsManager","subject","accessLevel","onlineMeetingUri","uri","uriChunks","skypeUser","emlUser","emlDomain","mtgId","url","trigger","learn_share","lssid","gname","lssess","state","addParticipantSelf","selectControl","participants","presenters","not","saveGuest","focus","participant","ls","removeGuest","addParticipant","removeParticipant","canEdit","canEditAdmin","sessionPresenters","sessionParticipants","sessionParticipantItems","participantIds","sessionGuests","guests","sessionGuestItems","guestIds","roParticipantNames","participantList","itemRemoveHandler","numSelected","itemRemoveGuestHandler","itemAddHandler","itemAddGuestHandler","order","idx","sessionActive","notes","skypeUrl","guestName","pickRandom","availableItems","$picking","uploadRecording","pickingId","prevPickingId","$prevPicked","pickedId","picked","$pickedItem","addPresenter","lockSession","unlockSession","setSkypeUrl","learn_share_list","lsSessList","lst","sess","unshift","hasSessions","team_goals","slzInputs","slAssigned","slMentors","slAdmins","assignList","getValue","mentorList","adminList","tplTeamName","assignedTo","mentors","admins","getTeamName","hasReachedGoals","$ne","teamGoals","teamReachedGoals","teamSlug","goal_view","commaListUsers","nameList","child_goal_view","user_dashboard","dashboardPanes","route","user_profile","segs","segTxt","userField","fldName","gender","birthDate","genderSelected","label","emailAddress","emailAddresses","uprofile","profileUpdate","reset","user_segments","segmentList","segid","dscr","update","verify","export","CategoryManager","Class","check","DefaultCategoryID","TypeStats","fields","type","Number","collection","Mongo","Collection","String","stats","addByType","getStatsByType","removeByType","meteorMethods","isServer","Type","areIntersected","categoryManager","j","addCategory","hasCategory","catId","removeCategory","skipSlice","shift","pop","OfType","Enum","GoalComment","assignedToStr","optional","createdBy","behaviors","timestamp","getGoalRoleGroup","userIsAdmin","userIsMentor","userIsAssigned","setDateField","fieldName","rdate","getUserFullNameX","notifyNew","oldList","newList","diffList","difference","add","beforeSave","setDueDate","Error","setGoalReached","setReviewDate","setGoalReviewedOn","commentTxt","date","createNewGoal","setTitle","setDescription","descr","setAssignedTo","ulist","setMentors","setAdmins","getUserFullName","invocation","DDP","_CurrentInvocation","isSimulation","updObj","permError","Array","isArray","isEqual","fs","Npm","LSUser","lsUser","removePresenter","lsu","guestId","guestObj","fileInfo","fileData","uploadPath","writeFile","Reading","MyersBriggsCategory","Defaults","identifiers","validators","resolveParam","PolarStats","Boolean","SumOfAnswers","getUser","addAnswer","answer","removeAnswer","allAnsweredUsers","unanswerAll","noSave","b","unAnswerQuestion","getAnswerForQuestion","softremove","secured","beforeInsert","username","beforeUpdate","allowed","doc","fieldNames","getModified","indexOf","mentorsStr","adminsStr","egoal","flds","addUsersToRoles","DefaultTeamID","contentType","IconType","defaut","Icon","Public","indexes","nameIndex","unique","removeUsersFromRoles","addUsers","base64Image","Buffer","groupAdminList","getUsersInRole","currUserRoles","removeUsers","removeUsersFromTeamRoles","afterInit","ReadingRange","TypeReadingCategory","setDelta","Create","FullHigh","FullLow","Enabled","toggle","addTypeCategory","dateCreated","Email","isEmailed","opts","noteOpts","icon","browserNote","alert","Notification","permission","requestPermission","addr","send","to","from","isClient","notify","MyersBriggsBit","Totals","QuestionCount","addValue","removeValue","addByCategory","removeByCategory","categoryId","IEL","NSL","TFL","JPL","QuestionID","Reversed","AnsweredAt","getQuestion","unanswer","TotalQuestions","getAnsweredQuestionsIDs","qids","ans","answerQuestion","contextThis","getAnswerIndexForQuestionID","before","DashboardPane","calculateAge","diff","now","age","getUTCFullYear","toLowerCase","toUpperCase","resolveError","nestedName","validator","addTeam","changeName","teamDoc","slug","extend","services","myPostLogout","mySubmitFunc","myPreSubmitFunc","myPostSubmitFunc","info","Accounts","emailTemplates","siteName","verifyEmail","urlWithoutHash","supportEmail","emailBody","sendVerificationEmail","AccountsTemplates","configure","confirmPassword","enablePasswordChange","forbidClientAccountCreation","overrideLoginErrors","lowercaseUsername","focusFirstInput","showAddRemoveServices","showForgotPasswordLink","showLabels","showPlaceholders","showResendVerificationEmailLink","continuousValidation","negativeFeedback","negativeValidation","positiveValidation","positiveFeedback","showValidating","privacyUrl","termsUrl","homeRoutePath","redirectTimeout","defaultTemplate","defaultLayout","defaultContentRegion","defaultLayoutRegions","onLogoutHook","onSubmitHook","preSignUpHook","postSignUpHook","texts","button","signUp","socialSignUp","socialIcons","forgotPwd","inputIcons","isValidating","hasSuccess","configureRoute","path","addFields","required","displayName","func","select","onCreateUser","email","updateAt","profile","first_name","last_name","undefined","isAdmin","validateNewUser","loggedInUser","ex","setDefault","BlazeLayout","ensureEmailVerified","verified","redirect","triggersEnter","ensureSignedIn","render","main","queryParams","token","notFound"],"mappings":"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","file":"/app.js","sourcesContent":["import './header.html';\nimport { User } from '/imports/api/users/users.js';\n\nimport '../../components/questions/questions.js';\nimport '../../components/personality/personality.js';\nimport '../../components/notification_list/notification_list.js';\n\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nTemplate.header.onCreated(function() {\n    this.autorun( () => {\n        this.subscription = this.subscribe('userData', this.teamName, {\n            onStop: function () {\n                console.log(\"User header subscription stopped! \", arguments, this);\n            },\n            onReady: function () {\n                console.log(\"User header subscription ready! \", arguments, this);\n            }\n        });\n    })\n})\nTemplate.header.helpers({\n    userName() {\n        let u = User.findOne( {_id:Meteor.userId()} );\n        if (u) {\n            return u.MyProfile.fullName('');\n        } else {\n            return \"\";\n        }\n    }\n})\nTemplate.header.events({\n    'click a#nav-answerquestions'(event, instance) {\n        event.preventDefault();\n        FlowRouter.go('/questions');\n    },\n    'click a#nav-addquestions'(event, instance) {\n        event.preventDefault();\n        FlowRouter.go('/addQuestions/IE');\n    },\n    'click a#nav-learnshare'(event, instance) {\n        event.preventDefault();\n        FlowRouter.go('/learnShareList');\n    },\n    'click a#nav-teams'(event, instance) {\n        event.preventDefault();\n        FlowRouter.go('/adminTeams');\n    },\n    'click a#nav-goals'(event, instance) {\n        event.preventDefault();\n        FlowRouter.go('/goals');\n    },\n    'click a#nav-traitdesc'(event, instance) {\n        event.preventDefault();\n        FlowRouter.go('/addTraitDescriptions');\n    },\n    'click a#nav-profile'(event, instance) {\n        event.preventDefault();\n        FlowRouter.go('/profile');\n    },\n    'click a.navbar-brand'(event, instance) {\n        event.preventDefault();\n        FlowRouter.go('/dashboard');\n    }\n});\n","import './label_list.html';\n\nTemplate.label_list.onCreated(function () {\n    //\n});\n\nTemplate.label_list.helpers({\n    customClass(item) {\n        if (\"guest\" === item.value.slice(0,5)) {\n            return \"guest\";\n        } else {\n            return \"\";\n        }\n    }\n})\n","import { UserNotify } from '/imports/api/user_notify/user_notify.js';\nimport './notification_list.html';\n\nfunction notificationClickAct(action) {\n    console.log(action);\n    switch (action[0]) {\n    case \"learnshare\":\n        FlowRouter.go('/learnShare/'+action[1]);\n        break;\n    case \"teams\":\n        if (action.length > 1) {\n            FlowRouter.go('/adminTeams/'+action[1]);\n        } else {\n            FlowRouter.go('/adminTeams');\n        }\n        break;\n    case \"teamgoals\":\n        FlowRouter.go('/teamGoals/'+action[1]);\n        break;\n    }\n}\n\nTemplate.notification_list.onCreated(function () {\n    this.autorun( () => {\n        console.log(\"autorunning notification_list...\");\n        this.subscription = this.subscribe('notificationList', Meteor.userId(), {\n            onStop: function () {\n                console.log(\"Notification List subscription stopped! \", arguments, this);\n            },\n            onReady: function () {\n                console.log(\"Notification List subscription ready! \", arguments, this);\n            }\n        });\n        console.log(this.subscription);\n    });\n});\n\nTemplate.notification_list.helpers({\n    notifications() {\n        let MAX_NOTIFICATIONS = 6;\n        let n = UserNotify.find(\n            {userId: Meteor.userId()},\n            {sort: {createdDate: -1} }\n        );\n        if (n) {\n            let noteList = [];\n            n.forEach(function (note) {\n                if (noteList.length < MAX_NOTIFICATIONS) {\n                    noteList.push(note);\n                } else if (noteList.length === MAX_NOTIFICATIONS) {\n                    noteList.push({\n                        title: \"\",\n                        body: \"See all notifications...\",\n                        isRead: true,\n                        action: \"notifications:all\"\n                    })\n                }\n                if (!note.isPushed) {\n                    if ( (new Date()) - note.createdDate > 1000*60) {\n                        //too old, don't send push notification\n                        note.markNotified();\n                    } else {\n                        note.pushNotify({onclick: function(event) {\n                            let nid = event.target.data;\n                            let un = UserNotify.findOne( {_id:nid} );\n                            un.markRead();\n                            event.target.close();\n                            notificationClickAct(un.action.split(\":\"));\n                        }});\n                        note.markNotified();\n                    }\n                }\n            });\n            return noteList;\n        } else {\n            return [];\n        }\n    },\n    when(note) {\n        let secondsAgo = ( (new Date()) - note.createdDate ) / 1000;\n        if (secondsAgo < 2) {\n            return \"Just now\";\n        } else if (secondsAgo < 60) {\n            return \"s\";\n        } else if (secondsAgo < 60*60) {\n            return parseInt(secondsAgo/60) + \"m\";\n        } else if (secondsAgo < 60*60*24) {\n            return parseInt(secondsAgo/(60*60)) + \"h\";\n        } else if (typeof note.createdDate !== 'undefined'){\n            return note.createdDate.toLocaleDateString(\"en-US\");\n        } else {\n            return \"\";\n        }\n    },\n    read(is) {\n        if (is) {\n            //return \"list-group-item-secondary\";\n            return \"\";\n        } else {\n            return \"list-group-item-info\";\n        }\n    },\n    hasUnread() {\n        let n = UserNotify.find( {userId: Meteor.userId(), isRead: false} );\n        if (n && n.fetch().length) {\n            return \"unread\";\n        } else {\n            return \"\";\n        }\n    }\n});\n\nTemplate.notification_list.events({\n    'click a.notification'(event, instance) {\n        event.preventDefault();\n        let $target = $(event.target);\n        let $li = $target.closest(\"[data-action]\");\n        let noteActionStr = $li.data(\"action\");\n        let nid = $li.data(\"nid\");\n        let noteAction = noteActionStr.split(\":\");\n\n        let un = UserNotify.findOne( {_id:nid} );\n        un.markRead();\n\n        notificationClickAct(noteAction);\n    }\n});\n","import { Question } from '/imports/api/questions/questions.js';\nimport { User, Profile, UserType, MyersBriggs, Answer } from '/imports/api/users/users.js';\nimport { TypeReading } from '/imports/api/type_readings/type_readings.js';\nimport { Meteor } from 'meteor/meteor';\nimport './personality.html';\n\nvar minQuestionsAnswered = 72;\n\nTemplate.personality.onCreated(function () {\n    if (this.data.userId) {\n        this.userId = this.data.userId;\n    } else {\n        this.userId = Meteor.userId();\n    }\n    this.autorun( () => { console.log(\"autorunning...\");\n        this.subscription = this.subscribe('userData', this.userId, {\n            onStop: function () {\n                console.log(\"Subscription stopped! \", arguments, this);\n            }, onReady: function () {\n                console.log(\"Subscription ready! \", arguments, this);\n            }\n        });\n        console.log(this.subscription);\n        this.subscription2 = this.subscribe('typereadings.myReadings', this.userId, {\n            onStop: function () {\n                console.log(\"Readings subscription stopped! \", arguments, this);\n            }, onReady: function () {\n                console.log(\"Readings subscription ready! \", arguments, this);\n            }\n        });\n        console.log(this.subscription2);\n    });\n});\n\nTemplate.personality.helpers({\n    readings() {\n        let tr = TypeReading.find({});\n        console.log(\"1234\",tr.fetch());\n        return tr;\n    },\n    user() {\n        return User.findOne({_id:Template.instance().userId});\n    },\n    isMinMet() {\n        let u = User.findOne({_id:Template.instance().userId});\n        if (!u) return false;\n        console.log(u);\n        if (u.MyProfile.UserType.AnsweredQuestions.length >= minQuestionsAnswered) {\n            return true;\n        } else {\n            return false;\n        }\n        return false;\n    },\n    remainingMinQCount() {\n        let u = User.findOne({_id:Template.instance().userId});\n        console.log(u);\n        if (!u) return -1;\n        let rmn = Math.max(0, (minQuestionsAnswered - u.MyProfile.UserType.AnsweredQuestions.length));\n        console.log(\"yyyyy\",minQuestionsAnswered, u.MyProfile.UserType.AnsweredQuestions.length, rmn);\n        //let rmn = 0;\n        return rmn;\n    },\n    opacityByCategory(category, userObj) {\n        //console.log(category, userObj); //return;\n        if (typeof userObj === \"undefined\") return false;\n        var value = userObj.MyProfile.UserType.Personality[userObj.MyProfile.UserType.Personality.getIdentifierById(category)];\n        //console.log(value);\n        return (Math.abs(value.Value) * 2) / 100;\n    },\n    percentByCategory(category, userObj) {\n        if (typeof userObj === \"undefined\") return false;\n        var value = userObj.MyProfile.UserType.Personality[userObj.MyProfile.UserType.Personality.getIdentifierById(category)];\n        console.log(\"555555\",value);\n        return Math.round(Math.abs(value.Value) * 2);\n    },\n    letterByCategory(category, userObj) {\n        //console.log(category, userObj); //return;\n        if (typeof userObj === \"undefined\") return false;\n        var identifier = userObj.MyProfile.UserType.Personality.getIdentifierById(category);\n        var value = userObj.MyProfile.UserType.Personality[identifier].Value;\n        console.log(category, value, identifier);\n        if (userObj.MyProfile.UserType.AnsweredQuestions.length >= minQuestionsAnswered) {\n            return (value === 0 ? \"?\" : (value < 0 ? identifier.slice(0,1) : identifier.slice(1,2)));\n        } else {\n            return \"?\";\n        }\n    },\n    userImageUrl(userObj) {\n        if (typeof userObj === \"undefined\") return false;\n        return Gravatar.imageUrl(userObj.emails[0].address, { size: 50, default: 'mm' });\n    }\n});\n\nTemplate.personality.events({\n    'click div.personality-display'(event, instance) {\n        console.log('click div.personality-display =>', event, instance);\n        $('#personality-readings').modal('show');\n        //$('.Selected-Category').html(newCat);\n    }\n});\n\nTemplate.singleReading.helpers({\n    getHSize(reading) {\n        console.log(\"asdf\",reading);\n        let count = delta = 0;\n        _.forEach(reading.TypeReadingCategories, (cat) => {\n            if(cat == null) { return; }\n            count++;\n            delta += cat.Range.Delta;\n        });\n        delta /= count;\n        if(!reading.Header) { return \"\"; }\n        if(delta >= 50) { return \"<h1>\"+reading.Header+\"</h1>\"; }\n        if(delta >= 40) { return \"<h2>\"+reading.Header+\"</h2>\"; }\n        if(delta >= 30) { return \"<h3>\"+reading.Header+\"</h3>\"; }\n        if(delta >= 20) { return \"<h4>\"+reading.Header+\"</h4>\"; }\n        if(delta >= 10) { return \"<h5>\"+reading.Header+\"</h5>\"; }\n        return \"<h6>\"+reading.Header+\"</h6>\";\n    }\n});\n","import { Question } from '/imports/api/questions/questions.js';\nimport { User, Profile, UserType, MyersBriggs, Answer } from '/imports/api/users/users.js';\nimport { Meteor } from 'meteor/meteor';\nimport './questions.html';\n\nvar minQuestionsAnswered = 72;\n\nTemplate.questions.onCreated(function () {\n    if (this.data.userId) {\n        this.userId = this.data.userId;\n    } else {\n        this.userId = Meteor.userId();\n    }\n\n    this.autorun( () => { console.log(\"autorunning...\");\n        this.subscription = this.subscribe('questions.toanswer', Meteor.userId(), Session.get('refreshQuestions'), {\n            onStop: function () {\n                console.log(\"Subscription stopped! \", arguments, this);\n            }, onReady: function () {\n                console.log(\"Subscription ready! \", arguments, this);\n            }\n        });\n        console.log(this.subscription);\n    });\n});\n\nTemplate.questions.helpers({\n    questions() {\n        let u = User.findOne({_id:Template.instance().userId});\n        let useg = u.MyProfile.segments;\n        let conditions = [\n            {segments: {$exists:false}},\n            {segments: {$eq:[]}}\n        ];\n        if (useg) {\n            conditions.push({segments: {$in:useg}});\n        }\n        if (!u) return [];\n        console.log(\"kkkkkkkkkkkkkkkk\",u);\n        return Question.find( {$or: conditions} );\n    },\n    reversed(index) {\n        return index % 2;\n    },\n    remainingMinQCount() {\n        let u = User.findOne({_id:Template.instance().userId});\n        console.log(u);\n        console.log(Template.instance().userId);\n        if (!u) return -1;\n        let rmn = Math.max(0, (minQuestionsAnswered - u.MyProfile.UserType.AnsweredQuestions.length));\n        console.log(\"yyyyy\",minQuestionsAnswered, u.MyProfile.UserType.AnsweredQuestions.length, rmn);\n        //let rmn = 0;\n        return rmn;\n    },\n    isRemainingGreaterThan(num) {\n        let u = User.findOne({_id:Template.instance().userId});\n        if (!u) return true;\n        let rmn = Math.max(0, (minQuestionsAnswered - u.MyProfile.UserType.AnsweredQuestions.length));\n        return rmn > num;\n    },\n    getTemplate() { //console.log(this.index, arguments, this);\n        return (this.index % 2) ? Template.questionTemplate : Template.questionTemplateReversed;\n    },\n    answeredQuestionsLength() {\n        let u = User.findOne({_id:Template.instance().userId});\n        let length = u.MyProfile.UserType.AnsweredQuestions.length;\n        //console.log(\"answeredQuestionsLengthhhhhhhhh\", length);\n        return length\n    },\n    totalQuestions() {\n        let u = User.findOne({_id:Template.instance().userId});\n        //console.log(\"myUserID\", u._id);\n        let total = u.MyProfile.UserType.getTotalQuestions();\n        //console.log(\"preTotalQuestions\", total);\n        Meteor.call('question.countQuestions', u._id, (error, result) => {\n            if (error) {\n                //console.log(\"EEERRR0r: \", error);\n            } else {\n                //success\n                //console.log(\"myUserID2\", u._id);\n                total = u.MyProfile.UserType.getTotalQuestions();\n                u.MyProfile.UserType.setTotalQuestions(total);\n                //console.log(\"uiquestionsjstotal\", total);\n                document.getElementById(\"allQuestions\").innerHTML = \"Total questions: \" + result;\n            }\n        });\n        return total;\n    }\n});\n\nTemplate.questions.events({\n    'click button.answer-button'(event, instance) {\n        event.preventDefault();\n        console.log('click button.answer-button => ', event, instance);\n\n        const target = event.target;\n        const parent = $(target).closest('div.answer-question');\n        const values = {\n            'questionId':parent.data('id'),\n            'value':parent.data('value'),\n            'isReversed':!!parent.data('reversed')\n        };\n        console.log(values);\n\n        Meteor.call('question.answer', values.questionId, values.value, values.isReversed, (error) => {\n            if (error) {\n                console.log(\"EEEEEERRRORRRRR: \", error);\n            } else {\n                parent.remove();\n                if($('div.answer-question').length < 1) {\n                    Session.set('refreshQuestions', Math.random());\n                }\n            }\n        });\n    }\n});\nTemplate.question.helpers({\n    getReadingsAsJSON(question) {\n        return JSON.stringify(question.Readings);\n    }\n});\nTemplate.question.onRendered(function() {\n    console.log(\"onRendered\", this);\n    let updateValue = function(elem, value) {\n        let parent = $(elem).data('value', value);\n        parent.find('div.left-option span.percent').html(Math.abs(Math.round(value) - 50)+\"%\");\n        parent.find('div.right-option span.percent').html((Math.round(value) + 50)+\"%\");\n        updateBGOpacity($(elem).find('.left-option'), 0.5 - (value / 100));\n        updateBGOpacity($(elem).find('.right-option'), 0.5 + (value / 100));\n        updateReading(parent, value);\n    };\n    let updateReading = function(elem, value) {\n        let readings = $(elem).data('readings');\n        let index = -1;\n        let curMax = (value < 0 ? -100 : 100);\n        $.each(readings, function (i, reading) {\n            if((value < 0 && reading.Rank <= value && reading.Rank > curMax) || (value > 0 && reading.Rank >= value && reading.Rank < curMax)) {\n                index = i;\n                curMax = reading.Rank;\n            }\n        });\n        if(index < 0) { return; }\n        $(elem).find('div.reading').html(readings[index].Text);\n    };\n    let updateBGOpacity = function(elem, value) {\n        let m;\n        m = $(elem).css('background-color').replace(/^rgba?\\(|\\s+|\\)$/g,'').split(',');\n        let btn = $(elem).parents('div.answer-question').find('button.answer-button');\n        let reading = $(elem).parents('div.answer-question').find('div.reading');\n        reading.css('visibility', 'visible');\n        btn.css('visibility','visible');\n        if(value > 0.5) {\n            $(elem).css('color','white');\n        } else if(value == 0.5) {\n            $(elem).css('color','Grey');\n            btn.css('visibility','hidden');\n            reading.css('visibility','hidden');\n            value = 0.1;\n        } else {\n            $(elem).css('color','black');\n        }\n        let newRGBA = \"rgba(\"+m[0]+\", \"+m[1]+\", \"+m[2]+\", \"+value+\")\";\n        $(elem).css('background-color', newRGBA);\n        //console.log($(elem).css('background-color'), m, newRGBA, value);\n    }\n    $('.slider', this.firstNode).each(function () {\n        $(this).noUiSlider({\n            start: $(this).data('value'),\n            step:1,\n            range: {\n                min:-50,\n                max:50\n            }\n        }).on('slide', function(event, val){ //console.log(arguments);\n            updateValue($(event.target).closest('.answer-question'), val);\n        }).on('set', function(event, val){\n            updateValue($(event.target).closest('.answer-question'), val);\n        });\n        updateValue($(this).closest('.answer-question'), $(this).data('value'));\n    });\n});\n","import './select_autocomplete.html';\n\nTemplate.select_autocomplete.onCreated(function () {\n    //\n});\n\nTemplate.select_autocomplete.onRendered(function () {\n    var self = this;\n    self.autorun( function () {\n        console.log(\"select_autocomplete autorun\");\n        var dat = Template.currentData();\n\n        if (!dat.list || dat.list.length < 1) {\n            return;\n        }\n        var params = {\n            plugins: ['remove_button'],\n            options: dat.list\n        }\n        if (typeof dat.onItemAdd !== \"undefined\") {\n            params.onItemAdd = dat.onItemAdd;\n        }\n        if (typeof dat.onItemRemove !== \"undefined\") {\n            params.onItemRemove = dat.onItemRemove;\n        }\n        if (typeof dat.readOnly !== \"undefined\") {\n            params.readOnly = true;\n            params.plugins = [];\n        }\n        if (typeof dat.create !== \"undefined\") {\n            params.create = true;\n        }\n        let $select = $('#'+dat.id+dat.id2).selectize(params);\n        $select[0].selectize.clear(true);\n        $select[0].selectize.clearOptions();\n        $select[0].selectize.addOption(dat.list);\n        if (\"undefined\" !== typeof dat.selected) {\n\t\tfor (let i in dat.selected) {\n\t\t    let id = dat.selected[i];\n\t\t    if (\"string\" !== typeof id) {\n\t\t        id = id.value;\n\t\t    }\n\t\t    if (\"undefined\" === typeof _.find(dat.list,function(o){return o.value===id})) {\n\t\t        $select[0].selectize.addOption(dat.selected[i]);\n\t\t        $select[0].selectize.addItem(id,true);\n\t\t    } else {\n\t\t        $select[0].selectize.addItem(id,true);\n\t\t    }\n\t\t}\n        }\n        $select[0].selectize.refreshItems();\n    });\n});\n","import { Meteor } from 'meteor/meteor';\nimport { UserFeedback } from '/imports/api/user_feedback/user_feedback.js';\nimport './select_feedback.html';\n\nvar selectedText;\nfunction selectionHandler(event) {\n    if ($(event.target).closest(\".feedback-box\").length) {\n        //click happened inside feedback box, ignore\n        return;\n    }\n    let $box = $(\".feedback-box:visible\");\n    selectedText = window.getSelection().toString();\n    console.log(selectedText);\n    $box.find(\".sf-feedback-context\").html(selectedText);\n    if (selectedText === \"\") {\n        $box.find(\".sf-instruction-selected\").hide();\n        $box.find(\".sf-instruction-begin\").show();\n    } else {\n        $box.find(\".sf-instruction-selected\").show();\n        $box.find(\".sf-instruction-begin\").hide();\n    }\n}\n\nTemplate.select_feedback.onCreated(function () {\n    $(document).on('mouseup', selectionHandler);\n    this.autorun( () => {\n        console.log(\"autorun\", this);\n        this.subscription = this.subscribe('feedback.userComments', {\n            onStop: function () {\n                console.log(\"Subscription stopped! \", arguments, this);\n            }, onReady: function () {\n                console.log(\"Subscription ready! \", arguments, this);\n            }\n        });\n    });\n});\n\nTemplate.select_feedback.onDestroyed(function () {\n    $(document).off('mouseup', selectionHandler);\n});\n\nTemplate.select_feedback.helpers({\n    commentsMade() {\n        let uf = UserFeedback.find({userId:Meteor.userId(),source:Template.instance().data.source}).fetch();\n        console.log(uf);\n        return uf;\n    }\n});\n\nTemplate.select_feedback.events({\n    'keyup .mytextarea'(event, instance) {\n        let $box = $(\".feedback-box:visible\");\n        console.log($box);\n        $box.find(\".feedback-save\").prop(\"disabled\",false);\n    },\n    'click button.feedback-cancel'(event, instance) {\n        console.log(\"cancel\");\n        let $box = $(\".feedback-box:visible\");\n        $box.find(\".sf-instruction-selected\").hide();\n        $box.find(\".sf-instruction-begin\").show();\n    },\n    'click button.feedback-save'(event, instance) {\n        console.log(Template.instance());\n        let $box = $(\".feedback-box:visible\");\n        let fbk = {\n            source: Template.instance().data.source,\n            context: selectedText,\n            comment: $box.find(\".mytextarea\").val()\n        };\n        Meteor.call('feedback.createNewFeedback', fbk, (err,rslt) => {\n            console.log(err,rslt);\n        });\n        $box.find(\".sf-instruction-selected\").hide();\n        $box.find(\".sf-instruction-begin\").show();\n    }\n});\n","import './video_embed.html';\n\nTemplate.video_embed.onCreated(function () {\n    this._fileExists = new ReactiveVar(false);\n    console.log(this.data);\n    this.autorun( () => {\n        Meteor.call('learnshare.recordingExists',this.data.id, (err,rslt) => {\n            this._fileExists.set(rslt);\n        });\n    });\n});\n\nTemplate.video_embed.helpers({\n    fileExists(fname) {\n        return Template.instance()._fileExists.get();\n    }\n});\n","import './body.html';\n","import './login.html';","import { Question } from '/imports/api/questions/questions.js';\nimport { User } from '/imports/api/users/users.js';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Meteor } from 'meteor/meteor';\nimport { TypeReading } from '/imports/api/type_readings/type_readings.js';\nimport { UserSegment } from '/imports/api/user_segments/user_segments.js';\nimport './add_questions.html';\n\nTemplate.add_questions.onCreated(function add_questionsOnCreated() {\n    this._category = new ReactiveVar(FlowRouter.getParam('category'));\n    this.category = () => this._category.get();\n    this.convertCategory = (cat) => {\n        if(cat === 'IE') { return 0; }\n        if(cat === 'NS') { return 1; }\n        if(cat === 'TF') { return 2; }\n        if(cat === 'JP') { return 3; }\n        return -1;\n    };\n    this.categoryToIndex = new ReactiveVar(this.convertCategory(this._category.get()));\n    this.categoryCheck = () => {\n        return {\n            IE: this.category() === 'IE',\n            NS: this.category() === 'NS',\n            TF: this.category() === 'TF',\n            JP: this.category() === 'JP'\n        };\n    };\n\n    this.showModal = function(stuff) {\n        let m = $('#tempModal');\n        m.find('h4.modal-title').html(stuff.Title);\n        m.find('div.modal-body').html(stuff.Body);\n        m.find('div.modal-footer button.closebtn').html(stuff.CloseText);\n        m.find('div.modal-footer button.savebtn').html(stuff.SaveText).click(stuff.SaveFunction);\n        _.each(stuff.data, function (name, val) {\n            m.data(name, val);\n        });\n        m.modal('show');\n    };\n    this.fixTabs = () => {\n        let active = $('li[role=presentation].active a').data('type');\n        console.log(active);\n        $('tbody.edit-body').hide();\n        $('#'+active+\"Table\").show();\n    };\n    this.makeModalStuff = function(title, body, closeText, saveText, saveFunction, data) {\n        return {\n            Title: title,\n            Body: body,\n            CloseText: closeText,\n            SaveText: saveText,\n            SaveFunction: saveFunction,\n            data: data\n        };\n    };\n    this.autorun( () => { console.log(\"autorunning...\", this.categoryToIndex.get());\n        this.subscription = this.subscribe('questions.bycategory', this.categoryToIndex.get(), {\n            onStop: function () {\n                console.log(\"Subscription stopped! \", arguments, this);\n            }, onReady: function () {\n                console.log(\"Subscription ready! \", arguments, this);\n            },\n            sort: {createdAt: -1}\n        });\n        console.log(this.subscription);\n        this.subscription3 = this.subscribe('segmentList', this.userId, {\n            onStop: function () {\n                console.log(\"Segment List subscription stopped! \", arguments, this);\n            },\n            onReady: function () {\n                console.log(\"Segment List subscription ready! \", arguments, this);\n            }\n        });\n        console.log(this.subscription3);\n    });\n});\n\nTemplate.add_questions.helpers({\n    category() {\n        return Template.instance().category();\n    },\n    categoryCheck() {\n        return Template.instance().categoryCheck();\n    },\n    userSegmentList() {\n        let segList = [];\n        let s = UserSegment.find( );\n\n        s.forEach((m) => {\n            segList.push( {\n                value: m._id,\n                text: m.name\n            });\n        });\n        return segList;\n    },\n    assignedUserSegments(q) {\n        console.log(\"sssssssssssss\",q);\n        if (typeof q === \"undefined\") {\n            return [];\n        }\n        let assigned = [];\n\n        for (let i = 0; i < q.segments.length; i++) {\n            let seg = UserSegment.findOne( {_id:q.segments[i]} );\n            assigned.push( {\n                value: q.segments[i],\n                text: seg.name\n            } );\n        }\n        return assigned;\n    },\n    questions() {\n        let x = Question.find({\n            Categories:parseInt(Template.instance().categoryToIndex.get())\n        },{ sort: { createdAt: -1 } });\n        return x;\n    },\n    questionAuthor(question) {\n        let u = User.findOne(question.CreatedBy);\n        return \"<span style='white-space:nowrap;'>\"+u.MyProfile.fullName()+\" <span class='label label-warning'>\"+u.MyProfile.UserType.Personality.getFourLetter()+\"</span></span>\";\n    },\n    getUserName(userId) {\n        let u = User.findOne({_id:userId});\n        u.callMethod('fullName', (err, result) => {\n            console.log(err, result);\n            return result;\n        });\n        //return u.fullName();\n    },\n    indexToCategory(ind) {\n        if(ind === 0) { return 'IE'; }\n        if(ind === 1) { return 'NS'; }\n        if(ind === 2) { return 'TF'; }\n        if(ind === 3) { return 'JP'; }\n        return 'UN';\n    },\n    categoryToIndex(cat) {\n        if(cat === 'IE') { return 0; }\n        if(cat === 'NS') { return 1; }\n        if(cat === 'TF') { return 2; }\n        if(cat === 'JP') { return 3; }\n        return -1;\n    },\n    categoryList() {\n        let categories = [\n            {text:'IE', value:0},\n            {text:'NS', value:1},\n            {text:'TF', value:2},\n            {text:'JP', value:3}\n        ];\n        return categories;\n    },\n    averageAnswer(times, sum) {\n        if(times === 0) { return 0; }\n        return Math.round((Math.abs(sum) / times));\n    },\n    totalAnswers(right, left) {\n        return right + left;\n    },\n    canDelete(question) {\n        return (question.TimesAnswered.LeftSum + question.TimesAnswered.RightSum) < 1;\n    }\n});\n\nTemplate.add_questions.events({\n    'click button.quest-cat-select'(event, instance) {\n        console.log('click button.quest-cat-select =>', event, instance);\n        let newCat = $(event.target).data('category');\n        FlowRouter.go(\"/addQuestions/\"+newCat);\n        instance._category.set(newCat);\n        instance.categoryToIndex.set(instance.convertCategory(newCat));\n        instance.fixTabs();\n    },\n    'click button.dropdown-toggle'(event, instance) {\n        event.preventDefault();\n        console.log('click button.dropdown-toggle => ',event, instance);\n    },\n    'click ul.dropdown-menu li a'(event, instance) {\n        event.preventDefault();\n        console.log('click ul.dropdown-menu li a => ', event, instance);\n        let newCat = $(event.target).html();\n        FlowRouter.go($(event.target).attr('href'));\n        instance._category.set(newCat);\n        instance.categoryToIndex.set(instance.convertCategory(newCat));\n        //$('.Selected-Category').html(newCat);\n        $('[name=Category]').val($(event.target).data('value'));\n        $('button.quest-cat-select.cat-'+newCat).addClass('active');\n        instance.fixTabs();\n    },\n    'click span.toggle-enable'(event, instance) {\n        console.log('click span.toggle-enable => ', event, instance);\n        let qid = $(event.target).closest('tr').data('id');\n        let q = Question.findOne({_id:qid});\n        q.Active = !q.Active;\n        q.save();\n    },\n    'click span.delete'(event, instance) {\n        event.preventDefault();\n        console.log('click span.delete => ', event, instance);\n        const target = event.target;\n        let qid = $(target).data('qid');\n        let vals = instance.makeModalStuff(\"Are you really sure?\", \"<h5>Do you really want to delete the question:</h5><table class='table table-bordered'><tr>\"+$(\"#\"+qid).html()+\"</tr></table>\", \"No!\", \"I guess...\", function (event) {\n            $('#tempModal').modal('hide');\n            $(this).off(event);\n            Meteor.call('question.delete', qid, (error)=> {\n                if(error) { console.log(\"Error on delete: \", error); }\n                else {\n                    console.log(qid+\" should be deleted...\");\n                }\n            });\n        }, {qid:qid});\n        instance.showModal(vals);\n    },\n    'submit #newQuestion'(event, instance) {\n        event.preventDefault();\n        console.log('submit #newQuestion => ', event, instance);\n\n        const target = event.target;\n        const values = {\n            //'Category':target.Category.value,\n            'Categories':$(target).find(\"#select-categories\")[0].selectize.items,\n            'Text':target.Text.value,\n            'LeftText':target.LeftText.value,\n            'RightText':target.RightText.value,\n            'segments':($(target).find(\"#select-segments\")[0].selectize ? $(target).find(\"#select-segments\")[0].selectize.items : [])\n        };\n        console.log(values);\n\n        Meteor.call('question.insert', values.Categories, values.Text, values.LeftText, values.RightText, values.segments, (error) => {\n            if (error) {\n                console.log(\"EEEEEERRRORRRRR: \", error);\n            } else {\n                target.Text.value = '';\n                target.LeftText.value = '';\n                target.RightText.value = '';\n            }\n        });\n    }\n});\n\nTemplate.add_questions.onRendered(function() {\n    $('.dropdown-toggle').dropdown();\n    $('ul.nav-tabs li a').click(function (e) { e.preventDefault(); $(this).tab('show'); $('tbody.edit-body').hide(); $('#'+$(this).data('type')+\"Table\").show(); });\n});\n","import { Question } from '/imports/api/questions/questions.js';\nimport { User } from '/imports/api/users/users.js';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Meteor } from 'meteor/meteor';\nimport { TypeReading } from '/imports/api/type_readings/type_readings.js';\nimport './add_readings.html';\n\nTemplate.add_readings.onCreated(function add_readingsOnCreated() {\n        \n    this.showModal = function(stuff) {\n        let m = $('#tempModal');\n        m.find('h4.modal-title').html(stuff.Title);\n        m.find('div.modal-body').html(stuff.Body);\n        m.find('div.modal-footer button.closebtn').html(stuff.CloseText);\n        m.find('div.modal-footer button.savebtn').html(stuff.SaveText).click(stuff.SaveFunction);\n        _.each(stuff.data, function (name, val) {\n            m.data(name, val);\n        });\n        m.modal('show');\n    };\n    this.makeModalStuff = function(title, body, closeText, saveText, saveFunction, data) {\n        return { \n            Title: title,\n            Body: body,\n            CloseText: closeText,\n            SaveText: saveText, \n            SaveFunction: saveFunction,\n            data: data\n        };\n    };\n    this.autorun( () => { \n        this.subscription = this.subscribe('typereadings.getAll', {\n            onStop: function () {\n                console.log(\"Subscription stopped! \", arguments, this);\n            }, onReady: function () {\n                console.log(\"Subscription ready! \", arguments, this);\n            },\n            sort: { \"TypeReadingCategories.Range.Delta\": -1 }\n        });\n        console.log(this.subscription);\n    });\n});\n\nTemplate.add_readings.helpers({\n    readings() {\n        return TypeReading.find({ },{ sort: { \"TypeReadingCategories.Range.low\": 1, \"TypeReadingCategories.Range.Delta\": -1 } });\n    },\n    indexToCategory(ind) {\n        if(ind === 0) { return 'IE'; }\n        if(ind === 1) { return 'NS'; }\n        if(ind === 2) { return 'TF'; }\n        if(ind === 3) { return 'JP'; }\n        return 'UN';\n    },\n    categoryToIndex(cat) {\n        if(cat === 'IE') { return 0; }\n        if(cat === 'NS') { return 1; }\n        if(cat === 'TF') { return 2; }\n        if(cat === 'JP') { return 3; }\n        return -1;\n    },\n    readingHasCategory(reading, category) {\n        return (!!reading.TypeReadingCategories[category]);\n    },\n    readingCategory(reading, category) {\n        if(!reading.TypeReadingCategories[category]) {\n            return \"-\";\n        } else {\n            return \"from \"+reading.TypeReadingCategories[category].Range.low + \" to \" + reading.TypeReadingCategories[category].Range.high;\n        }\n    },\n    getRange(reading, category, isHigh) {\n        if(!reading.TypeReadingCategories[category]) {\n            return \"\";\n        }\n        return (isHigh ? reading.TypeReadingCategories[category].Range.high : reading.TypeReadingCategories[category].Range.low);\n    },\n    readingAuthor(reading) {\n        let u = User.findOne(reading.CreatedBy);\n        return u.MyProfile.fullName()+\" <span class='label label-warning'>\"+u.MyProfile.UserType.Personality.getFourLetter()+\"</span>\";\n    },\n    getUserName(userId) {\n        let u = User.findOne({_id:userId});\n        u.callMethod('fullName', (err, result) => {\n            console.log(err, result);\n            return result;\n        });\n        //return u.fullName();\n    }\n});\n\nTemplate.add_readings.events({\n    'click span.toggle-enable-reading'(event, instance) {\n        console.log('click span.toggle-enable-reading => ', event, instance);\n        let rid = $(event.target).closest('tr').data('id');\n        Meteor.call('typereadings.toggle', rid, (error) => {\n            if(error) { console.log(\"Error on toggle reading: \",error); }\n            else { console.log(rid+\" should be toggled.\"); }\n        });\n    },\n    'click span.delete-reading'(event, instance) {\n        event.preventDefault();\n        console.log('click span.delete-reading => ', event, instance);\n        const target = event.target;\n        let rid = $(target).data('rid');\n        let vals = instance.makeModalStuff(\"Are you really sure?\", \"<h5>Do you really want to delete the reading:</h5><table class='table table-bordered'><tr>\"+$(\"#\"+rid).html()+\"</tr></table>\", \"No!\", \"I guess...\", function (event) {\n            $('#tempModal').modal('hide');\n            $(this).off(event);\n            Meteor.call('typereadings.delete', rid, (error)=> {\n                if(error) { console.log(\"Error on delete: \", error); }\n                else {\n                    console.log(rid+\" should be deleted...\");\n                }\n            });\n        }, {rid:rid});\n        instance.showModal(vals);\n    },\n    'click #addTypeReadingLink'(event, instance) {\n        event.preventDefault();\n        if($('span', event.target).hasClass('glyphicon-chevron-down')) {\n            $('span', event.target).removeClass('glyphicon-chevron-down').addClass('glyphicon-chevron-up');\n            $('div.add-type-reading').slideDown(300);\n        } else {\n            $('span', event.target).removeClass('glyphicon-chevron-up').addClass('glyphicon-chevron-down');\n            $('div.add-type-reading').slideUp(300);\n        }\n    },\n    'click a.readingCategoryLink'(event, instance) {\n        event.preventDefault();\n        var me = $(event.target);\n        var parentData = me.parent().get(0).dataset;\n        var cat = parseInt(parentData.category);\n        var hi  = parentData.high;\n        var low = parentData.low;\n        var mom = me.parents('div.row:first');\n        mom.find('input[name=Category]').val(cat);\n        mom.find('span.readingCategoryDisplay').html(instance.view.template.__helpers[\" indexToCategory\"](cat));\n        mom.find('input[name=Low]').val(low);\n        mom.find('input[name=High]').val(hi);\n        if(!mom.find('.expansion-drawer').is(':visible')) {\n            $('.expansion-drawer').slideUp(300);\n            mom.find('.expansion-drawer').slideDown(300);\n        }\n    },\n    'submit #newReading'(event, instance) {\n        event.preventDefault();\n        console.log('submit #newReading => ', event, instance);\n        \n        const target = event.target;\n        const values = {\n            'Header':target.Header.value,\n            'Body':target.Body.value,\n        };\n        console.log(values);\n\n        Meteor.call('typereadings.insert', values.Header, values.Body, (error) => {\n            if (error) {\n                console.log(\"EEEEEERRRORRRRR: \", error);\n            } else {\n                target.Header.value = '';\n                target.Body.value = '';\n            }\n        });\n    },\n    'submit form.addCategoryToReadingForm'(event, instance) {\n        event.preventDefault();\n        const target = event.target;\n        const values = {\n            Category: target.Category.value,\n            High: target.High.value,\n            Low: target.Low.value,\n            ReadingId: target.readingId.value\n        };\n        Meteor.call('typereadings.addCategoryToReading', values.ReadingId, values.Category, values.High, values.Low, (error) => {\n            if(error) {\n                console.log(\"EEEEEEEEEEERRRRRRRRRRROOOOOOOOORRRRR: \", error);\n            } else {\n                console.log(\"We good, man!\");\n                target.Low.value = '';\n                target.High.value = '';\n            }\n        });\n    }\n});\n\nTemplate.add_readings.onRendered(function() {\n    \n});","import { Team,TeamIcon } from '/imports/api/teams/teams.js';\nimport { TeamGoal } from '/imports/api/team_goals/team_goals.js';\nimport { User } from '/imports/api/users/users.js';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Meteor } from 'meteor/meteor';\nimport './admin_teams.html';\nimport '../team_goals/team_goals.js';\nimport '/imports/ui/components/select_autocomplete/select_autocomplete.js';\n\nTemplate.admin_teams.onCreated(function () {\n    if (this.data.teamName) {\n        this.teamName = this.data.teamName;\n    } else if (FlowRouter.getParam('teamName')){\n        this.teamName = FlowRouter.getParam('teamName').split('-').join(' ');\n    } else {\n        this.teamName = '';\n    }\n    console.log(this.teamName,FlowRouter.getParam('teamName'),\"bbbbbbbbbbbbbb\");\n\n    this.autorun( () => {\n        console.log(\"autorunning admin_teams...\");\n        this.subscription = this.subscribe('userList', Meteor.userId(), {\n            onStop: function () {\n                console.log(\"User List subscription stopped! \", arguments, this);\n            },\n            onReady: function () {\n                console.log(\"User List subscription ready! \", arguments, this);\n            }\n        });\n        console.log(this.subscription);\n        this.subscription2 = this.subscribe('teamMemberList', Meteor.userId(), {\n            onStop: function () {\n                console.log(\"Team Member subscription stopped! \", arguments, this);\n            },\n            onReady: function () {\n                console.log(\"Team Member subscription ready! \", arguments, this);\n            }\n        });\n        console.log(this.subscription2);\n        this.subscription3 = this.subscribe('teamsData', Meteor.userId(), {\n            onStop: function () {\n                console.log(\"teamsData subscription stopped! \", arguments, this);\n            },\n            onReady: function () {\n                console.log(\"teamsData subscription ready! \", arguments, this);\n                console.log(Team.find().fetch());\n            }\n        });\n        console.log(this.subscription3);\n    });\n});\n\nTemplate.admin_teams.onRendered(function () {\n    Meteor.setTimeout( function () {\n        $(\"table.table select.selectized\").each(function (s) {\n            this.selectize.on('item_add', function(val, $item) {\n                let userId = $item.closest(\"[data-user-id]\").data(\"user-id\");\n                let teamName = $item.closest(\"[data-team-name]\").data(\"team-name\");\n\n                let t = Team.findOne( {Name: teamName} );\n                t.addRole(userId, val);\n            });\n            this.selectize.on('item_remove', function(val, $item) {\n                let userId = this.$control.closest(\"[data-user-id]\").data(\"user-id\");\n                let teamName = this.$control.closest(\"[data-team-name]\").data(\"team-name\");\n\n                let t = Team.findOne( {Name: teamName} );\n                t.removeRole(userId, val);\n            });\n        });\n    }, 1000);\n});\n\nTemplate.admin_teams.helpers({\n    specificTeam() {\n        if (typeof Template.instance().teamName === 'undefined' || Template.instance().teamName === '') {\n            return false;\n        } else {\n            return true;\n        }\n    },\n    teams() {\n        if (typeof Team === 'undefined') {\n            return false;\n        }\n        let t;\n        if (typeof Template.instance().teamName === 'undefined' || Template.instance().teamName === '') {\n            t = Team.find(  );//.fetch();\n        } else {\n            t = Team.find( {Name:Template.instance().teamName} );//.fetch();\n        }\n        console.log(Template.instance().teamName, t, \"rrrrrrrrrrrr\");\n        let t_invited = [], t_member = [], t_else = [];\n        t.forEach( (team)=> {\n            if (Roles.userIsInRole(Meteor.userId(), 'admin-join-request', team.Name)) {\n                t_invited.push(team);\n            } else if (team.Members.includes(Meteor.userId()) ) {\n                t_member.push(team);\n            } else {\n                t_else.push(team);\n            }\n        });\n        return t_invited.concat(t_member, t_else);\n    },\n    teamsMemberOf() {\n        if (typeof Team === 'undefined') {\n            return false;\n        }\n        let t = Team.find(  );//.fetch();\n        let t_invited = [], t_member = [], t_else = [];\n        t.forEach( (team)=> {\n            if (Roles.userIsInRole(Meteor.userId(), 'admin-join-request', team.Name)) {\n                t_invited.push(team);\n            } else if (team.Members.includes(Meteor.userId()) ) {\n                t_member.push(team);\n            } else {\n                //t_else.push(team);\n            }\n        });\n        if (t_member.length > 1 && !Roles.userIsInRole(Meteor.userId(), 'admin', Roles.GLOBAL_GROUP)) {\n            //if regular user is a member of a team other than \"No Team\", hide \"No Team\" from this view\n            t_member = t_member.filter( (tm) => {\n                return tm.Name !== Team.Default.Name;\n            } );\n        } else {\n            //\n        }\n        return t_invited.concat(t_member, t_else);\n    },\n    teamsOther() {\n        if (typeof Team === 'undefined') {\n            return false;\n        }\n        let t = Team.find(  );//.fetch();\n        let t_invited = [], t_member = [], t_else = [];\n        t.forEach( (team)=> {\n            if (Roles.userIsInRole(Meteor.userId(), 'admin-join-request', team.Name)) {\n                //t_invited.push(team);\n            } else if (team.Members.includes(Meteor.userId()) ) {\n                //t_member.push(team);\n            } else {\n                t_else.push(team);\n            }\n        });\n        return t_invited.concat(t_member, t_else);\n    },\n    teamMembers(teamName) {\n        let teamRole = {};\n        teamRole[\"roles.\"+teamName] = \"member\";\n        let u = User.find( teamRole );\n        if (typeof u === \"undefined\") {\n            return false;\n        }\n        let memberList = [];\n        u.forEach((m) => {\n            memberList.push( {\n                _id: m._id,\n                firstName: m.MyProfile.firstName,\n                lastName: m.MyProfile.lastName,\n                roles: m.roles[teamName]\n            });\n        });\n        return memberList;\n    },\n    uniqueId() {\n        var text = \"\";\n        var idLength = 10;\n        var possible = \"acdeghijklmnopqrstuvwxyzACDEGHIJKLMNOPQRSTUVWXYZ0123456789\";\n\n        for (var i = 0; i < idLength; i++) {\n            text += possible.charAt(Math.floor(Math.random() * possible.length));\n        }\n\n        return text;\n    },\n    teamRequests(teamName) {\n        let teamRole = {};\n        teamRole[\"roles.\"+teamName] = \"user-join-request\";\n        let u = User.find( teamRole );\n\n        if (!u) {\n            return [];\n        }\n\n        let requestList = [];\n        u.forEach((m) => {\n            requestList.push( {\n                _id: m._id,\n                firstName: m.MyProfile.firstName,\n                lastName: m.MyProfile.lastName,\n                roles: \"user-join-request\"\n            })\n        });\n        return requestList;\n    },\n    rolesList() {\n        let roles = [];\n        Roles.getAllRoles().forEach(function (r) {\n            roles.push( {\n                text: r.name,\n                value: r.name\n            } );\n        });\n        return roles;\n    },\n    users() {\n        return User.find().fetch();\n    },\n    userAddList(teamName) {\n        let t = Team.findOne( {Name: teamName} );\n        let memberList = [];\n        if (t) {\n            memberList = t.Members;\n        }\n        let u = User.find({_id: {'$nin': memberList}});\n        let addList = [];\n        u.forEach((m) => {\n            addList.push( {\n                value: m._id,\n                text: m.MyProfile.firstName + \" \" + m.MyProfile.lastName\n            });\n        });\n        return addList;\n    },\n});\n\nfunction teamChanged($g) {\n    $g.find(\".btn-save\").prop(\"disabled\",false);\n    $g.find(\".btn-cancel\").prop(\"disabled\",false);\n}\nfunction teamUnchanged($g) {\n    $g.find(\".btn-save\").prop(\"disabled\",true);\n    $g.find(\".btn-cancel\").prop(\"disabled\",true);\n    $g.find(\".changed\").removeClass(\"changed\");\n}\nfunction saveTeam(teamId) {\n    let saveObj = {\n        Name: $(\"#team-title-\"+teamId).val(),\n        Description: $(\"#team-description-\"+teamId).val()\n    };\n    let t = Team.findOne( {_id:teamId} );\n    if (t) {\n        t.updateFromObj(saveObj);\n    }\n}\n\nTemplate.admin_teams.events({\n    'change .file-upload-input'(event, instance) {\n        var file = event.currentTarget.files[0];\n        var reader = new FileReader();\n        reader.onload = function(fileLoadEvent) {\n            let teamId = $(event.target).closest(\"[data-team-id]\").data(\"team-id\");\n            let t = Team.findOne({_id: teamId});\n            t.uploadIcon(file, reader.result);\n        };\n        reader.readAsBinaryString(file);\n    },\n    'change input.flat,textarea.flat'(event, instance) {\n        $(event.target).addClass('changed');\n        let $team = $(event.target).closest(\"[data-team-id]\");\n    },\n    'change input,textarea,select'(event, instance) {\n        let $t = $(event.target);\n        let $team = $(event.target).closest(\"[data-team-id]\");\n        teamChanged($team);\n    },\n    'keyup input,textarea'(event, instance) {\n        let $t = $(event.target);\n        let $team = $(event.target).closest(\"[data-team-id]\");\n        teamChanged($team);\n    },\n    'click button.btn-save'(event, instance) {\n        let $t = $(event.target);\n        let teamId = $t.closest(\"[data-team-id]\").data(\"team-id\");\n        saveTeam(teamId);\n        teamUnchanged($(\"#div-team-\"+teamId));\n    },\n    'click button#btn-create-team'(event, instance) {\n        let newTeamName = $(\"#input-new-team-name\").val();\n        if (\"\" === newTeamName) {\n            $(\"#msg-create\").removeClass(\"alert-success\").addClass(\"alert-danger\").html(\"Team name required\").css(\"display\",\"inline-block\");\n            return;\n        }\n        let newTeamDescription = $(\"#input-new-team-description\").val();\n        let newTeam = { Name: newTeamName, Description: newTeamDescription };\n        Meteor.call('team.createNewTeam', newTeam, function (err, rslt) {\n            if (!err) {\n                $(\"#div-new-team-details\").slideUp();\n                $(\"#input-new-team-name\").val(\"\");\n                $(\"#msg-create\").removeClass(\"alert-danger\").addClass(\"alert-success\").html(\"Team created!\").css(\"display\",\"inline-block\");\n                $(\"#input-new-team-name\").closest(\".input-group\").removeClass(\"has-error\").removeClass(\"has-feedback\");\n            } else {\n                console.log(err);\n                $(\"#input-new-team-name\").closest(\".input-group\").addClass(\"has-error\").addClass(\"has-feedback\");\n                $(\"#msg-create\").removeClass(\"alert-success\").addClass(\"alert-danger\").html(\"Duplicate team name\").css(\"display\",\"inline-block\");\n                if (err.error === 409) {\n                    console.log(\"duplicate\");\n                }\n            }\n            Meteor.setTimeout(function () {\n                $(\"#msg-create\").fadeOut();\n            }, 5000);\n        });\n    },\n    'focus #form-new-team'(event, instance) {\n        $(\"#div-new-team-details\").slideDown();\n    },\n    'blur #form-new-team'(event, instance) {\n        console.log(\"triggered div blur\");\n    },\n    'click .dropdown-menu.add-users'(event, instance) {\n        event.stopPropagation();\n    },\n    'click button.btn-add-users-save'(event, instance) {\n        let $select = $(event.target).closest(\".dropdown-menu\").find(\".selectized\");\n        let teamId = $(event.target).closest(\"[data-team-id]\").data(\"team-id\");\n        let t = Team.findOne({_id: teamId});\n        let userList = $select[0].selectize.items;\n\n        t.adminRequestUserJoin(userList);\n\n        $select[0].selectize.clear(true);\n        $(event.target).closest(\".dropdown\").toggleClass('open');\n    },\n    'click button.btn-add-users-cancel'(event, instance) {\n        let $select = $(event.target).closest(\".dropdown-menu\").find(\".selectized\");\n        $select[0].selectize.clear(true);\n        $(event.target).closest(\".dropdown\").toggleClass('open');\n    },\n    'click button.btn-add-users'(event, instance) {\n        //show add-user widget\n    },\n    'click button.btn-accept-join'(event, instance) {\n        let teamId = $(event.target).data(\"team-id\");\n        let t = Team.findOne({_id: teamId});\n        t.userAcceptJoin();\n    },\n    'click button.btn-decline-join'(event, instance) {\n        let teamId = $(event.target).data(\"team-id\");\n        let t = Team.findOne({_id: teamId});\n        t.userDeclineJoin();\n    },\n    'click a.btn-admin-request-join'(event, instance) {\n        event.preventDefault();\n        let userId = $(event.target).closest(\"[data-user-id]\").data(\"user-id\");\n        let teamId = $(event.target).closest(\"[data-team-id]\").data(\"team-id\");\n        let t = Team.findOne({_id: teamId});\n        t.adminRequestUserJoin(userId);\n    },\n    'click button.btn-user-request-join'(event, instance) {\n        event.preventDefault();\n        let teamId = $(event.target).data(\"team-id\");\n        let t = Team.findOne({_id: teamId});\n        t.userRequestJoin();\n    },\n    'click a.btn-approve-join'(event, instance) {\n        event.preventDefault();\n        let userId = $(event.target).data(\"user-id\");\n        let teamId = $(event.target).closest(\"[data-team-id]\").data(\"team-id\");\n        let t = Team.findOne( {_id: teamId} );\n        t.adminAcceptJoin(userId);\n    },\n    'click a.btn-decline-join'(event, instance) {\n        event.preventDefault();\n        let userId = $(event.target).data(\"user-id\");\n        let teamId = $(event.target).closest(\"[data-team-id]\").data(\"team-id\");\n        let t = Team.findOne( {_id: teamId} );\n        t.adminRejectJoin(userId);\n    },\n    'click button.btn-remove-user-role'(event, instance) {\n        event.preventDefault();\n        let userId = $(event.target).closest(\"[data-user-id]\").data(\"user-id\");\n        let teamId = $(event.target).closest(\"[data-team-id]\").data(\"team-id\");\n        let role = $(event.target).closest(\"[data-role]\").data(\"role\");\n    },\n    'click div.team-goal-quick-list'(event, instance) {\n        let teamName = $(event.target).closest(\"[data-team-name]\").data(\"team-name\");\n        if (teamName) {\n            FlowRouter.go(\"/teamGoals/\"+teamName.split(\" \").join(\"-\"));\n        }\n    },\n    'click button.btn-expand,div.collapsed-summary'(event, instance) {\n        let $target = $(event.target);\n        let $teamContainer = $target.closest(\"[data-team-id]\");\n        let $targetExpandBtn = $teamContainer.find(\".btn-expand.glyphicon\");\n\n        $targetExpandBtn.removeClass(\"glyphicon-chevron-up\")\n            .addClass(\"glyphicon-chevron-down\");\n\n        if ($teamContainer.hasClass(\"collapsed\")) {\n            $(\".team-view[data-team-id]:not(.collapsed)\").slideUp(function() {\n                $(this).addClass(\"collapsed\").css(\"display\",\"block\");\n            });\n            $teamContainer.css(\"display\",\"none\").removeClass(\"collapsed\").slideDown(function () {\n                $('html, body').animate({\n                    scrollTop: ($teamContainer.offset().top)\n                },500);\n            });\n            $targetExpandBtn.removeClass(\"glyphicon-chevron-down\");\n            $targetExpandBtn.addClass(\"glyphicon-chevron-up\");\n        } else {\n            $teamContainer.slideUp(function() {\n                $teamContainer.addClass(\"collapsed\").css(\"display\",\"block\");\n            });\n            $targetExpandBtn.removeClass(\"glyphicon-chevron-up\");\n            $targetExpandBtn.addClass(\"glyphicon-chevron-down\");\n        }\n    },\n    'click tr[data-user-id]'(event, instance) {\n        if (!$(event.target).closest(\".selectize-control\").length) {\n            let $target = $(event.target).closest(\"[data-user-id]\");\n            let uid = $target.data(\"user-id\");\n            FlowRouter.go(\"/profile/\"+uid);\n        }\n    }\n});\n\nTemplate.team_view.helpers ({\n    fldEnabled(fld) {\n        let team = Template.instance().data.team;\n        //let t = TeamGoal.findOne( {_id: team._id} );\n\n        //if (!t) {\n            if (Roles.userIsInRole(Meteor.userId(), 'admin', team.Name)) {\n                return \"\";\n            } else {\n                return \"disabled\";\n            }\n        //}\n\n        if (g.hasModifyPerm(fld)) {\n            return \"\";\n        } else {\n            return \"disabled\";\n        }\n    },\n    iconData64() {\n        let team = Template.instance().data.team;\n        let t = Team.findOne( {_id: team._id} );\n        return team.Icon64;\n    },\n    teamMembers(teamName) {\n        let teamRole = {};\n        teamRole[\"roles.\"+teamName] = \"member\";\n        let u = User.find( teamRole );\n        if (typeof u === \"undefined\") {\n            return false;\n        }\n        let memberList = [];\n        u.forEach((m) => {\n            memberList.push( {\n                _id: m._id,\n                firstName: m.MyProfile.firstName,\n                lastName: m.MyProfile.lastName,\n                roles: m.roles[teamName]\n            });\n        });\n        return memberList;\n    },\n    hasTeamRequests(teamName) {\n        let teamRole = {};\n        teamRole[\"roles.\"+teamName] = \"user-join-request\";\n        let u = User.find( teamRole );\n\n        if (!u || u.count() == 0) {\n            return false;\n        } else {\n            return true;\n        }\n    },\n    teamRequests(teamName) {\n        let teamRole = {};\n        teamRole[\"roles.\"+teamName] = \"user-join-request\";\n        let u = User.find( teamRole );\n\n        if (!u) {\n            return [];\n        }\n\n        let requestList = [];\n        u.forEach((m) => {\n            requestList.push( {\n                _id: m._id,\n                firstName: m.MyProfile.firstName,\n                lastName: m.MyProfile.lastName,\n                roles: \"user-join-request\"\n            })\n        });\n        return requestList;\n    },\n    hasTeamInvites(teamName) {\n        let teamRole = {};\n        teamRole[\"roles.\"+teamName] = \"admin-join-request\"\n        let u = User.find( teamRole );\n\n        if (!u || u.count() == 0) {\n            return false;\n        } else {\n            return true;\n        }\n    },\n    teamInvites(teamName) {\n        let teamRole = {};\n        teamRole[\"roles.\"+teamName] = \"admin-join-request\"\n        let u = User.find( teamRole );\n\n        if (!u) {\n            return [];\n        }\n\n        let inviteList = [];\n        u.forEach((m) => {\n            inviteList.push( {\n                _id: m._id,\n                firstName: m.MyProfile.firstName,\n                lastName: m.MyProfile.lastName,\n                roles: \"admin-join-request\"\n            })\n        });\n        return inviteList;\n    },\n    rolesList() {\n        let roles = [];\n        Roles.getAllRoles().forEach(function (r) {\n            roles.push( {\n                text: r.name,\n                value: r.name\n            } );\n        });\n        return roles;\n    },\n    uniqueId() {\n        var text = \"\";\n        var idLength = 10;\n        var possible = \"acdeghijklmnopqrstuvwxyzACDEGHIJKLMNOPQRSTUVWXYZ0123456789\";\n\n        for (var i = 0; i < idLength; i++) {\n            text += possible.charAt(Math.floor(Math.random() * possible.length));\n        }\n\n        return text;\n    },\n    userAddList(teamName) {\n        let t = Team.findOne( {Name: teamName} );\n        let memberList = [];\n        if (t) {\n            memberList = t.Members;\n        }\n        let u = User.find({_id: {'$nin': memberList}});\n        let addList = [];\n        u.forEach((m) => {\n            addList.push( {\n                value: m._id,\n                text: m.MyProfile.firstName + \" \" + m.MyProfile.lastName\n            });\n        });\n        return addList;\n    },\n\n});\n","import { Question } from '/imports/api/questions/questions.js';\nimport { User, Profile, UserType, MyersBriggs, Answer } from '/imports/api/users/users.js';\nimport { Meteor } from 'meteor/meteor';\nimport './ask_questions.html';\nimport '../../components/questions/questions.js';\nimport '../../components/personality/personality.js';\n\n\n\n\nTemplate.ask_questions.helpers({\n    answeredQuestionsLength() {\n        let u = User.findOne({_id:Template.instance().userId});\n        return u.MyProfile.UserType.AnsweredQuestions.length;\n    }\n});\n","import './dash_min.html';\n\nTemplate.dash_min.events({\n    'click button.questions'(event, instance) {\n        FlowRouter.go('/questions');\n    },\n    'click button.learnshare'(event, instance) {\n        FlowRouter.go('/learnShareList');\n    },\n    'click button.user-segments'(event, instance) {\n        FlowRouter.go('/userSegments');\n    }\n});\n","import './home.html';\n\nimport '../../components/questions/questions.js';\nimport '../../components/personality/personality.js';\n","import { Meteor } from 'meteor/meteor';\nimport { User } from '/imports/api/users/users.js';\nimport { Team } from '/imports/api/teams/teams.js';\nimport { IndividualGoal } from '/imports/api/individual_goals/individual_goals.js';\nimport './individual_goals.html';\nimport '/imports/ui/components/select_autocomplete/select_autocomplete.js';\n\nconst BLANK_GOAL = {\n    _id: \"new\",\n    title: \"\",\n    description: \"\"\n};\n\nlet _hasSubgoalView = new ReactiveVar(false);\nlet _subgoalId = new ReactiveVar(\"\");\nTemplate.individual_goals.onCreated(function () {\n    if (FlowRouter.getParam('userId')) {\n        this.userId = FlowRouter.getParam('userId');\n    } else {\n        this.userId = Meteor.userId();\n    }\n    Session.set(\"goal_user_id\",this.userId);\n    Session.set(\"goalReload\",false);\n\n    this.userSubscriptionReady = new ReactiveVar( false );\n    this.autorun( () => {\n        this.modalGoalId = FlowRouter.getParam('goalId');\n        if (\"undefined\" !== typeof this.modalGoalId && \"\" !== this.modalGoalId) {\n            _hasSubgoalView.set(true);\n            _subgoalId.set(FlowRouter.getParam('goalId'));\n            $(\"body\").on(\"hidden.bs.modal\", \"#goal-modal-sub\", function () {\n                _hasSubgoalView.set(false);\n                _subgoalId.set(\"\");\n                FlowRouter.go(\"/individualGoals/\"+FlowRouter.getParam('teamName'));\n            });\n            Meteor.setTimeout(function () {\n                $(\"#goal-modal-sub\").modal(\"show\");\n                $(\"#goal-modal-sub\").find(\"div.team-goal\").removeClass(\"collapsed\");\n            }, 1000);\n        }\n        this.subscription = this.subscribe('individualGoalsData', getUserId(), {\n            onStop: function () {\n                console.log(\"Team Goals subscription stopped! \", arguments, this);\n            },\n            onReady: function () {\n                console.log(\"Team Goals subscription ready! \", arguments, this);\n            }\n        });\n        this.subscription2 = this.subscribe('userList', Meteor.userId(), {\n            onStop: function () {\n                console.log(\"User List subscription stopped! \", arguments, this);\n            },\n            onReady: function () {\n                console.log(\"User List subscription ready! \", arguments, this);\n            }\n        });\n        this.subscription3 = this.subscribe('teamsMemberOfList', getUserId(), {\n            onStop: function () {\n                console.log(\"Team Member Of List subscription stopped! \", arguments, this);\n            },\n            onReady: function () {\n                console.log(\"Team Member Of List subscription ready! \", arguments, this);\n            }\n        });\n        console.log(this.subscription2);\n    });\n});\nTemplate.individual_goals.onRendered(function () {\n    Meteor.setTimeout(function() {\n        $(\"input.date\").datetimepicker({\n            format:'YYYY-MM-DD',\n            useCurrent:false,\n            showClear:true,\n            showClose:true\n        });\n    }, 1000);\n    $(\"body\").on(\"hidden.bs.modal\", \"#goal-modal-new\", function () {\n        $newgoal = $(\"#div-goal-new\").detach();\n        $newgoal.data(\"parent-id\",\"\");\n        $(\"#blank-goal\").find(\".col-sm-12\").append($newgoal);\n    });\n});\n\nvar resetNewGoalForm = () => {\n    let valInputs = [\n        \"goal-title-new\",\n        \"goal-description-new\",\n        \"input-date-due-new\",\n        \"input-date-review-new\",\n        \"input-date-reached-new\",\n    ];\n    for (let i = 0; i < valInputs.length; i++) {\n        $(\"#\"+valInputs[i]).val(\"\");\n    }\n};\n\nfunction saveGoal(goalId) {\n    let saveObj = {\n        title: $(\"#goal-title-\"+goalId).val(),\n        description: $(\"#goal-description-\"+goalId).val(),\n        userId: getUserId(),\n        teamId: $(\"#select-team-\"+goalId).val(),\n        privacy: $(\"#select-privacy-\"+goalId).val()\n    };\n    let startDate = $(\"#input-start-date-\"+goalId).val();\n    if (\"\" !== startDate) {\n        saveObj.startDate = new Date(startDate);\n    }\n    let dueDate = $(\"#input-date-due-\"+goalId).val();\n    if (\"\" !== dueDate) {\n        saveObj.dueDate = new Date(dueDate);\n    }\n    let rvwDate = $(\"#input-date-review-\"+goalId).val();\n    if (\"\" !== rvwDate) {\n        saveObj.reviewDate = new Date(rvwDate);\n    }\n\n    if (goalId === BLANK_GOAL._id) {\n        let parentId = $(\"#div-goal-new\").data(\"parent-id\");\n        if (\"\" !== parentId) {\n            saveObj.parentId = parentId;\n        }\n        Meteor.call('individualgoals.createNewGoal', saveObj, function (err, rslt) {\n            console.log(err, rslt);\n        });\n    } else {\n        let g = IndividualGoal.findOne( {_id: goalId} );\n        let reviewedOnDate = $(\"#input-date-reviewed-on-\"+goalId).val();\n        if (\"\" !== reviewedOnDate) {\n            saveObj.reviewedOnDate = new Date(reviewedOnDate);\n        }\n        let reachedDate = $(\"#input-date-reached-\"+goalId).val();\n        if (\"\" !== reachedDate) {\n            saveObj.reachedDate = new Date(reachedDate);\n        }\n\n        g.updateFromObj(saveObj);\n    }\n}\n\nfunction goalChanged($g) {\n    $g.find(\".btn-save\").prop(\"disabled\",false);\n    $g.find(\".btn-cancel\").prop(\"disabled\",false);\n}\nfunction goalUnchanged($g) {\n    $g.find(\".btn-save\").prop(\"disabled\",true);\n    $g.find(\".btn-cancel\").prop(\"disabled\",true);\n    $g.find(\".changed\").removeClass(\"changed\");\n}\n\nTemplate.individual_goals.events({\n    'change input.flat,textarea.flat'(event, instance) {\n        $(event.target).addClass('changed');\n        let $goal = $(event.target).closest(\"[data-goal-id]\");\n        if ($goal) {\n            if ($(\"#goal-title-\"+$goal.data(\"goal-id\")).val() != \"\") {\n                //\n            }\n        }\n    },\n    'change input,textarea,select'(event, instance) {\n        let $t = $(event.target);\n        let $goal = $(event.target).closest(\"[data-goal-id]\");\n        goalChanged($goal);\n    },\n    'keyup input,textarea'(event, instance) {\n        let $t = $(event.target);\n        let $goal = $(event.target).closest(\"[data-goal-id]\");\n        goalChanged($goal);\n    },\n    'click button.btn-save'(event, instance) {\n        let $t = $(event.target);\n        let goalId = $t.closest(\"[data-goal-id]\").data(\"goal-id\");\n        saveGoal(goalId);\n        goalUnchanged($(\"#div-goal-\"+goalId));\n\n        $modalParent = $t.closest(\".modal\");\n        if ($modalParent.length) {\n            $modalParent.modal('hide');\n            $newgoal = $(\"#div-goal-new\").detach();\n            $newgoal.data(\"parent-id\",\"\");\n            $(\"#blank-goal\").find(\".col-sm-12\").html($newgoal);\n        }\n        if (goalId == BLANK_GOAL._id) {\n            resetNewGoalForm();\n            if ( ! $modalParent.length ) {\n                $(\".goal-controls\").show();\n                $(\"#blank-goal\").slideUp();\n            }\n        }\n    },\n    'click button.btn-add-subgoal'(event, instance) {\n        let parentId = $(event.target).closest(\"[data-goal-id]\").data(\"goal-id\");\n        $newgoal = $(\"#div-goal-new\").detach();\n        $newgoal.data(\"parent-id\",parentId);\n        $newgoal.find(\".btn-cancel\").attr(\"disabled\",false);\n        $(\"#goal-modal-new\").find(\".modal-body\").append($newgoal);\n        $(\"#goal-modal-new\").modal(\"show\");\n        $(\"#goal-modal-new\").find(\"div.team-goal\").removeClass(\"collapsed\");\n    },\n    'click button.btn-cancel'(event, instance) {\n        let $t = $(event.target);\n        let goalId = $t.closest(\"[data-goal-id]\").data(\"goal-id\");\n\n        $modalParent = $t.closest(\".modal\");\n        if ($modalParent.length) {\n            $modalParent.modal('hide');\n            $newgoal = $(\"#div-goal-new\").detach();\n            $newgoal.data(\"parent-id\",\"\");\n            $(\"#blank-goal\").find(\".col-sm-12\").append($newgoal);\n        }\n\n        if (goalId == BLANK_GOAL._id) {\n            resetNewGoalForm();\n            if ( ! $modalParent.length ) {\n                $(\".goal-controls\").show();\n                $(\"#blank-goal\").slideUp();\n            }\n        } else {\n            //forces a reload from the database\n            Session.set(\"goalReload\",true);\n            Meteor.setTimeout(function () {\n                Session.set(\"goalReload\",false);\n            }, 100);\n        }\n    },\n    'click button.btn-comment-add'(event, instance) {\n        $btnAdd = $(event.target);\n\n        let goalId = $btnAdd.closest(\"[data-goal-id]\").data(\"goal-id\");\n        let $comment = $(\"#new-comment-\"+goalId);\n        let newComment = $comment.val();\n        let g = IndividualGoal.findOne( {_id: goalId} );\n        g.addComment(newComment);\n        $comment.val(\"\");\n    },\n    'click button.btn-review-comment-add'(event, instance) {\n        $btnAdd = $(event.target);\n\n        let goalId = $btnAdd.closest(\"[data-goal-id]\").data(\"goal-id\");\n        let $comment = $(\"#new-review-comment-\"+goalId);\n        let newComment = $comment.val();\n        let g = IndividualGoal.findOne( {_id: goalId} );\n        g.addReviewComment(newComment);\n        $comment.val(\"\");\n    },\n    'click button#btn-add-goal'(event, instance) {\n        let $btnAdd = $(event.target);\n        $goal = $btnAdd.closest(\"[data-goal-id]\")\n        let goalId = $goal.data(\"goal-id\");\n\n        $(\".goal-controls\").hide();\n        let $btnCancel = $(\"#blank-goal\").find(\".btn-cancel\")\n        $btnCancel.prop(\"disabled\",false);\n        $(\".team-goal[data-goal-id=\"+goalId+\"]\").removeClass(\"collapsed\");\n        $(\"#blank-goal\").slideDown();\n        $(\"#btn-add-cancel\").fadeIn();\n    },\n    'click button#btn-add-cancel'(event, instance) {\n        $(\"#blank-goal\").slideUp();\n        $(\"#btn-add-cancel\").fadeOut();\n    },\n    'click button.btn-expand,div.collapsed-summary'(event, instance) {\n        let $target = $(event.target);\n        let $goalContainer = $target.closest(\"[data-goal-id]\");\n        let $targetExpandBtn = $goalContainer.find(\".btn-expand.glyphicon\");\n\n        $targetExpandBtn.removeClass(\"glyphicon-chevron-up\")\n            .addClass(\"glyphicon-chevron-down\");\n\n        if ($goalContainer.hasClass(\"collapsed\")) {\n            $(\".team-goal[data-goal-id]:not(.collapsed)\").slideUp(function() {\n                $(this).addClass(\"collapsed\").css(\"display\",\"block\");\n            });\n            $goalContainer.css(\"display\",\"none\").removeClass(\"collapsed\").slideDown(function () {\n                $('html, body').animate({\n                    scrollTop: ($goalContainer.offset().top)\n                },500);\n            });\n            $targetExpandBtn.removeClass(\"glyphicon-chevron-down\");\n            $targetExpandBtn.addClass(\"glyphicon-chevron-up\");\n        } else {\n            $goalContainer.slideUp(function() {\n                $goalContainer.addClass(\"collapsed\").css(\"display\",\"block\");\n            });\n            $targetExpandBtn.removeClass(\"glyphicon-chevron-up\");\n            $targetExpandBtn.addClass(\"glyphicon-chevron-down\");\n        }\n    },\n    'keyup textarea.goal-description,input.goal-title':_.debounce(function (event, instance) {\n        let goalId = $(event.target).closest(\"[data-goal-id]\").data(\"goal-id\");\n        if (\"new\" === goalId) {\n            //don't auto-save if creating a new goal\n            return;\n        }\n        saveGoal(goalId);\n        goalUnchanged($(\"#div-goal-\"+goalId));\n    }, 2000),\n    'change input,select':_.debounce(function (event, instance) {\n        if (!Session.get(\"saving\")) {\n            let goalId = $(event.target).closest(\"[data-goal-id]\").data(\"goal-id\");\n            if (\"new\" === goalId) {\n                //don't auto-save if creating a new goal\n                return;\n            }\n            saveGoal(goalId);\n            goalUnchanged($(\"#div-goal-\"+goalId));\n        }\n    }, 2000),\n    'dp.change':_.debounce(function (event, instance) {\n        if (!Session.get(\"saving\")) {\n            let goalId = $(event.target).closest(\"[data-goal-id]\").data(\"goal-id\");\n            if (\"new\" === goalId) {\n                //don't auto-save if creating a new goal\n                return;\n            }\n            saveGoal(goalId);\n            goalUnchanged($(\"#div-goal-\"+goalId));\n        }\n    }, 2000),\n    'click div.team-goal-title[data-id]'(event, instance) {\n        _hasSubgoalView.set(true);\n        let gid = $(event.target).data(\"id\");\n        _subgoalId.set(gid);\n        FlowRouter.go(\"/individualGoals/\"+FlowRouter.getParam('teamName')+\"/\"+gid);\n        $(\"#goal-modal-sub\").prop(\"disabled\",false).modal(\"show\");\n    }\n});\n\nfunction getUserId() {\n    return Session.get(\"goal_user_id\");\n}\nTemplate.individual_goals.helpers({\n    goalReload() {\n        return Session.get(\"goalReload\");\n    },\n    hasGoals() {\n        let uid = getUserId();\n        let g = IndividualGoal.find( {userId: uid, parentId: ''} ).fetch();\n        return g.length > 0;\n    },\n    hasGoalsTeam(tid) {\n        let uid = getUserId();\n        let g = IndividualGoal.find( {userId: uid, parentId: '', teamId: tid} ).fetch();\n        return g.length > 0;\n    },\n    individualGoals() {\n        let uid = getUserId();\n        let g = IndividualGoal.find( {userId: uid, parentId: ''} ).fetch();\n        return g;\n    },\n    individualGoalsTeam(tid) {\n        let uid = getUserId();\n        let g = IndividualGoal.find( {userId: uid, parentId: '', teamId: tid} ).fetch();\n        return g;\n    },\n    ownList() {\n        //check to see if the user logged in is the owner of the goals currently displayed\n        return (Meteor.userId() === getUserId());\n    },\n    blankGoal() {\n        return Object.assign({userId: getUserId()}, BLANK_GOAL);\n    },\n    hasSubgoalView() {\n        let hasView = _hasSubgoalView.get();\n        let gid = _subgoalId.get();\n        if (hasView) {\n            return true;\n        } else {\n            return false;\n        }\n    },\n    subgoal() {\n        let hasView = _hasSubgoalView.get();\n        let subgoalId = Template.instance().modalGoalId;\n        subgoalId = _subgoalId.get();\n        let g = IndividualGoal.findOne( {_id: subgoalId} );\n        if (g) {\n            return g;\n        } else {\n            return {};\n        }\n    },\n    goalComments(goalId) {\n        let g = IndividualGoal.findOne( {_id: goalId} );\n        if (!g) {\n            return;\n        }\n        let c = g.goalComments;\n        return c;\n    },\n    reviewComments(goalId) {\n        let g = IndividualGoal.findOne( {_id: goalId} );\n        if (!g) {\n            return;\n        }\n        let c = g.reviewComments;\n        return c;\n    },\n    formatDate(dateObj) {\n        return dateObj.toLocaleDateString();\n    },\n    getUserName(userId) {\n        let u = User.findOne( {_id: userId} );\n        if (!u) return \"\";\n        let fullName = u.MyProfile.firstName + \" \" + u.MyProfile.lastName;\n        return fullName;\n    },\n    userList() {\n        let list = [\n            {id: 1, name: \"George\"},\n            {id: 2, name: \"Frank\"}\n        ];\n        return list;\n    },\n    teamList() {\n        //list of teams the user is a member of\n        let t = Team.find( {Members: getUserId()} );\n        if (!t) {\n            return [];\n        }\n        return t.fetch();\n    },\n});\n\n//Template.igoal_view.onRendered(function () {\n//});\n\nTemplate.igoal_view.helpers({\n    childGoals() {\n        let goalId = Template.instance().data.goal._id;\n        let children = IndividualGoal.find( {parentId: goalId} ).fetch();\n        return children;\n    },\n    hasChildren() {\n        let goalId = Template.instance().data.goal._id;\n        let doesHave = IndividualGoal.find( {parentId: goalId} ).fetch().length > 0;\n        return doesHave;\n    },\n    goalComments(goalId) {\n        if (goalId === BLANK_GOAL._id) {\n            return;\n        }\n        let g = IndividualGoal.findOne( {_id: goalId} );\n        if (!g) {\n            return;\n        }\n        let c = g.goalComments;\n        return c;\n    },\n    reviewComments(goalId) {\n        if (goalId === BLANK_GOAL._id) {\n            return;\n        }\n        let g = IndividualGoal.findOne( {_id: goalId} );\n        if (!g) {\n            return;\n        }\n        let c = g.reviewComments;\n        return c;\n    },\n    formatDate(dateObj) {\n        return dateObj.toLocaleDateString();\n    },\n    dateField(fld) {\n        let goal = Template.instance().data.goal;\n        if (goal._id == BLANK_GOAL._id) {\n            return \"\";\n        }\n        let d = goal[fld];\n        if ( !(d instanceof Date) ) {\n            return \"\";\n        }\n        let dateText = new Date(d.getTime() - d.getTimezoneOffset()*60000).toISOString().slice(0,-1);\n        return dateText;\n    },\n    getUserName(userId) {\n        let u = User.findOne( {_id: userId} );\n        if (!u) return \"\";\n        let fullName = u.MyProfile.firstName + \" \" + u.MyProfile.lastName;\n        return fullName;\n    },\n    userList() {\n        let userList = [];\n        User.find( {} ).forEach( (user) => {\n            userList.push({\n                text: user.MyProfile.firstName + \" \" + user.MyProfile.lastName,\n                value: user._id\n            })\n        });\n        return userList;\n    },\n    progressPct() {\n        let goal = Template.instance().data.goal;\n        let g = IndividualGoal.findOne( {_id: goal._id} );\n        if (!g) return 0;\n\n        if (!g.dueDate || !g.startDate || \"undefined\" === typeof g.dueDate || \"undefined\" === typeof g.startDate) {\n            return 0;\n        }\n        let currDt = new Date().getTime();\n        let totalDuration = g.dueDate.getTime() - g.startDate.getTime();\n        let timeSinceStart = currDt - g.startDate.getTime();\n        let pct = (timeSinceStart / totalDuration);\n        return Math.min(parseInt(pct*100),100);\n    },\n    ownList() {\n        //check to see if the user logged in is the owner of the goals currently displayed\n        return (Meteor.userId() === getUserId());\n    },\n    userHasModifyPerm(fld) {\n        let goal = Template.instance().data.goal;\n        let g = IndividualGoal.findOne( {_id: goal._id} );\n        if (!g) return true;\n        return g.hasModifyPerm(fld);\n    },\n    fldEnabled(fld) {\n        let goal = Template.instance().data.goal;\n        let g = IndividualGoal.findOne( {_id: goal._id} );\n\n        if (!g) {\n            if (Roles.userIsInRole(Meteor.userId(), 'admin', goal.teamName)) {\n                return \"\";\n            } else {\n                return \"disabled\";\n            }\n        }\n\n        if (g.hasModifyPerm(fld)) {\n            return \"\";\n        } else {\n            return \"disabled\";\n        }\n    },\n    isNew(id) {\n        return BLANK_GOAL._id === id;\n    },\n    teamList() {\n        //list of teams the user is a member of\n        let t = Team.find(  );\n        if (!t) {\n            return [];\n        }\n        return t.fetch();\n    },\n    teamSelected(teamId) {\n        let goal = Template.instance().data.goal;\n        let g = IndividualGoal.findOne( {_id: goal._id} );\n        if (!g) {\n            return;\n        }\n        if (g.teamId === teamId) {\n            return \"selected\";\n        } else {\n            return \"\";\n        }\n    },\n    privacySelected(privVal) {\n        let goal = Template.instance().data.goal;\n        let g = IndividualGoal.findOne( {_id: goal._id} );\n        if (!g) {\n            return;\n        }\n        if (g.privacy === privVal) {\n            return \"selected\";\n        } else {\n            return \"\";\n        }\n    },\n    collapsed(pid) {\n        //if this goal has a parent it is being displayed in a modal and should not be collapsed\n        if (\"\" !== pid) {\n            return \"\";\n        } else {\n            return \"collapsed\";\n        }\n    }\n})\nTemplate.child_igoal_view.helpers({\n    childGoals() {\n        let goalId = Template.instance().data.goal._id;\n        let children = IndividualGoal.find( {parentId: goalId} ).fetch();\n        return children;\n    },\n    hasChildren(goalId) {\n        goalId = Template.instance().data.goal._id;\n        let doesHave = IndividualGoal.find( {parentId: goalId} ).count() > 0;\n        return doesHave;\n    }\n});\n","import { User } from '/imports/api/users/users.js';\nimport { LearnShareSession } from '/imports/api/learn_share/learn_share.js';\nimport { Team } from '/imports/api/teams/teams.js';\nimport './learn_share.html';\nimport '/imports/ui/components/label_list/label_list.js';\n\nvar generateGuestId = () => {\n    var text = \"guest-\";\n    var idLength = 11;\n    var possible = \"acdeghijklmnopqrstuvwxyzACDEGHIJKLMNOPQRSTUVWXYZ0123456789\";\n\n    for (var i = 0; i < idLength; i++) {\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\n    }\n\n    return text;\n}\n\nvar app;\nvar client_id = '8e7e8c57-117c-454a-bf71-7ec493ab82b1';\nvar meeting;\nvar version = \"appdeveloperlevel/0.59\";\n\nfunction initSkypeAPI() {\n    console.log(sessionStorage);\n    debugger;\n    var hasToken = /^#access_token=/.test(location.hash) || !!sessionStorage.apiAccessToken;\n    var hasError = /^#error=/.test(location.hash);\n    if (!hasToken && !hasError) {\n        let pathParts = location.pathname.split('/');\n        sessionStorage.lastLearnShareId = pathParts[pathParts.length-1];\n        console.log(sessionStorage);\n        location.assign('https://login.microsoftonline.com/common/oauth2/authorize?response_type=token' +\n            '&client_id=' + client_id +\n            '&redirect_uri=' + location.origin + '/learnShare' +\n            '&resource=https://webdir.online.lync.com');\n    } else {\n        if (!sessionStorage.apiAccessToken) {\n            var tokenresponse = parseHashParams(window.location.hash);\n            sessionStorage.apiAccessToken = tokenresponse.access_token;\n            window.location.hash = '#';\n        }\n        Skype.initialize(\n            {\n                apiKey: 'a42fcebd-5b43-4b89-a065-74450fb91255',\n                correlationIds: {\n                    sessionId: 'mySession123', // Necessary for troubleshooting requests, should be unique per session\n                }\n            },\n            function (api) {\n                console.log(\"wwwwwwwwwwwwwwwwwwwwwww\");\n                app = new api.application();\n                console.log(app);\n                apiSignIn();\n            }\n        );\n    }\n}\nfunction parseHashParams(hash) {\n    var params = hash.slice(1).split('&');\n\n    var paramarray = {};\n    params.forEach(function(param) {\n        param = param.split('=');\n        paramarray[param[0]] = param[1];\n    });\n\n    return paramarray;\n}\nfunction apiSignIn() {\n    console.log(1234,app);\n    var application = app;\n    // the SDK will get its own access token\n    app.signInManager.signIn({\n        client_id: client_id,\n        cors: true,\n        redirect_uri: '/learnShare',\n        origins: [ \"https://webdir.online.lync.com/autodiscover/autodiscoverservice.svc/root\" ],\n        version: version // Necessary for troubleshooting requests; identifies your application in our telemetry\n    }).then(\n        function(a) {\n            console.log(\"signed in\", a);\n            createMeeting();\n        },\n        function(err) {\n            $(\"#span-create-skype\").html(\"(<a href='#' id='a-create-call'>Create skype meeting</a>)\");\n            console.log(\"sign in error\", err);\n        }\n    )\n}\nfunction createMeeting() {\n    meeting = app.conversationsManager.createMeeting();\n    meeting.subject('LearnShare Meeting');\n    meeting.accessLevel('Everyone');\n    console.log('0',meeting);\n    meeting.onlineMeetingUri.get().then(\n        function(uri) {\n            console.log('1',uri);\n            //var conversation = app.conversationsManager.getConversationByUri(uri);\n            //console.log(\"what?\",conversation);\n            let uriChunks = uri.split(':');\n            let skypeUser = uriChunks[1].split(';')[0];\n            let emlUser = skypeUser.split('@')[0];\n            let emlDomain = skypeUser.split('@')[1];\n            let mtgId = uriChunks[uriChunks.length-1];\n            let url = 'https://meet.lync.com/'+emlDomain+'/'+emlUser+'/'+mtgId;\n            console.log(url);\n            $(\"#input-skype-url\").val(url);\n            $(\"#span-create-skype\").html(\"(<a href='#' id='a-create-call'>Create skype meeting</a>)\");\n            $(\"#input-skype-url\").trigger(\"change\");\n        },\n        function(err) {\n            $(\"#span-create-skype\").html(\"(<a href='#' id='a-create-call'>Create skype meeting</a>)\");\n            console.log(err);\n        }\n    );\n}\n\nTemplate.learn_share.onCreated(function () {\n    this.lssid = FlowRouter.getParam('lssid');\n    if (!Meteor.user()) {\n        //user not logged in, treat as guest\n        let gname = Session.get(\"guestName\");\n        if (\"undefined\" === typeof gname) {\n            let gid = generateGuestId();\n            //Session.setPersistent(\"guestName\", 'lurker'+gid.slice(5,10));\n            //Session.setPersistent(\"guestId\", gid);\n        }\n    }\n\n    this.autorun( () => {\n        console.log(\"autorunning learn_share...\");\n\n        this.subscription = this.subscribe('userList', Meteor.userId(), {\n            onStop: function () {\n                console.log(\"User List subscription stopped! \", arguments, this);\n            },\n            onReady: function () {\n                console.log(\"User List subscription ready! \", arguments, this);\n\n                let userList = [];\n\n                User.find().forEach( (user) => {\n                    userList.push({\n                        text: user.MyProfile.firstName + \" \" + user.MyProfile.lastName,\n                        value: user._id\n                    });\n                });\n            }\n        });\n        console.log(this.subscription);\n\n        this.subscription2 = this.subscribe('learnShareDetails', this.lssid, {\n            onStop: function () {\n                console.log(\"LearnShare List subscription stopped! \", arguments, this);\n            },\n            onReady: function () {\n                console.log(\"LearnShare List subscription ready! \", arguments, this);\n                let lssess = LearnShareSession.findOne( {_id: this.params[0]} );\n                if (\"locked\" !== lssess.state) {\n                    if (Meteor.user()) {\n                        lssess.addParticipantSelf();\n                        lssess = LearnShareSession.findOne( {_id: this.params[0]} );\n                        let selectControl = $(\"#select-participants\")[0].selectize;\n                        for (let i = 0; i < lssess.participants.length; i++) {\n                            selectControl.addItem(lssess.participants[i].id);\n                        }\n                        for (let i = 0; i < lssess.presenters.length; i++) {\n                            $(\".item[data-value=\"+lssess.presenters[i].id+\"]\").addClass(\"picked\");\n                        }\n                        if ($(\".item[data-value]\").not(\".picked\").length === 0) {\n                            $(\"#btn-pick-first\").prop(\"disabled\", true);\n                        } else {\n                            $(\"#btn-pick-first\").prop(\"disabled\", false);\n                        }\n                    } else {\n                        lssess.saveGuest(Session.get(\"guestId\"),Session.get(\"guestName\"));\n                    }\n                }\n            }\n        });\n        console.log(this.subscription2);\n\n        this.subscription3 = this.subscribe('teamsData', Meteor.userId(), {\n            onStop: function () {\n                console.log(\"teamsData subscription stopped! \", arguments, this);\n            },\n            onReady: function () {\n                console.log(\"teamsData subscription ready! \", arguments, this);\n            }\n        });\n        console.log(this.subscription3);\n    });\n\n});\n\nTemplate.learn_share.onRendered( () => {\n    Meteor.setTimeout(() => {\n        if (/^#access_token=/.test(location.hash)) {\n            console.log(\"hhhhhhhhhhhhhhhhhhhhhhhhhhhhhh\");\n            $(\"#a-skype-url-edit\").trigger(\"click\");\n            Meteor.setTimeout(() => {\n                $(\"#a-create-call\").trigger(\"click\");\n            }, 500);\n        }\n        $('#modal-edit-name').on('shown.bs.modal', function () {\n            $('#input-guest-name').focus();\n        });\n        $(document).on('click','#selectize-outer-select-guests .selectize-input .item', function (event) {\n            let $target = $(event.target);\n            let participant = {\n                id: $target.data(\"value\"),\n                name: $target.text().slice(0,-1)\n            };\n            let lssid = $(\"#select-participants\").closest(\"[data-lssid]\").data(\"lssid\");\n            let ls = LearnShareSession.findOne( {_id: lssid} );\n            if (!ls) {\n                return;\n            }\n            ls.removeGuest(participant.id);\n            ls.addParticipant(participant);\n        });\n        $(document).on('click','#selectize-outer-select-participants .selectize-input .item', function (event) {\n            let $target = $(event.target);\n            let participant = {\n                id: $target.data(\"value\"),\n                name: $target.text().slice(0,-1)\n            };\n            let lssid = $(\"#select-participants\").closest(\"[data-lssid]\").data(\"lssid\");\n            let ls = LearnShareSession.findOne( {_id: lssid} );\n            if (!ls) {\n                return;\n            }\n            ls.saveGuest(participant);\n            ls.removeParticipant(participant.id);\n        });\n    }, 500);\n});\n\nTemplate.learn_share.helpers({\n    userList() {\n        let u = User.find().fetch();\n        return u;\n    },\n    canEdit() {\n        let lssid = Template.instance().lssid;\n        let lssess = LearnShareSession.findOne( {_id:lssid} );\n        if (!lssess) {\n            return false;\n        }\n        if (lssess.state === \"locked\" || !Meteor.user()) {\n            return false;\n        }\n        return true;\n    },\n    canEditAdmin() {\n        let lssid = Template.instance().lssid;\n        let lssess = LearnShareSession.findOne( {_id:lssid} );\n        if (!lssess) {\n            return false;\n        }\n        if (lssess.state === \"locked\" || !Roles.userIsInRole(Meteor.userId(), ['admin','learn-share-host'], Roles.GLOBAL_GROUP)) {\n            return false;\n        }\n        return true;\n    },\n    sessionPresenters() {\n        let lssid = Template.instance().lssid;\n        let lssess = LearnShareSession.findOne( {_id:lssid} );\n        if (!lssess) {\n            return [];\n        } else {\n            return lssess.presenters;\n        }\n    },\n    sessionParticipants() {\n        let lssid = Template.instance().lssid;\n        let lssess = LearnShareSession.findOne( {_id:lssid} );\n        if (!lssess) {\n            return [];\n        } else {\n            return lssess.participants;\n        }\n    },\n    sessionParticipantItems() {\n        let lssid = Template.instance().lssid;\n        let lssess = LearnShareSession.findOne( {_id:lssid} );\n\n        if (!lssess) {\n            return [];\n        }\n\n        let participants = lssess.participants;\n        let participantIds = [];\n        for (let i = 0; i < participants.length; i++) {\n            participantIds.push({value: participants[i].id, text: participants[i].name});\n        }\n        return participantIds;\n    },\n    sessionGuests() {\n        let lssid = Template.instance().lssid;\n        let lssess = LearnShareSession.findOne( {_id:lssid} );\n        if (!lssess) {\n            return [];\n        } else {\n            return lssess.guests;\n        }\n    },\n    sessionGuestItems() {\n        let lssid = Template.instance().lssid;\n        let lssess = LearnShareSession.findOne( {_id:lssid} );\n\n        if (!lssess) {\n            return [];\n        }\n\n        let guests = lssess.guests;\n        let guestIds = [];\n        for (let i = 0; i < guests.length; i++) {\n            guestIds.push({value: guests[i].id, text: guests[i].name});\n        }\n        return guestIds;\n    },\n    roParticipantNames() {\n        let lssid = Template.instance().lssid;\n        let lssess = LearnShareSession.findOne( {_id:lssid} );\n\n        if (!lssess) {\n            return [];\n        }\n\n        let participants = lssess.participants;\n        let participantList = [];\n        for (let i = 0; i < participants.length; i++) {\n            participantList.push(participants[i].name);\n        }\n        return participantList;\n    },\n    userAddList(teamName) {\n        let u = User.find( );\n        let addList = [];\n        u.forEach((m) => {\n            addList.push( {\n                value: m._id,\n                text: m.MyProfile.firstName + \" \" + m.MyProfile.lastName\n            });\n        });\n        return addList;\n    },\n    itemRemoveHandler() {\n        return (value, $item) => {\n            let numSelected = $(\"#select-participants\")[0].selectize.items.length;\n            if (numSelected === 0) {\n                $(\"#btn-pick-first\").attr(\"disabled\", true);\n            }\n            let lssid = $(\"#select-participants\").closest(\"[data-lssid]\").data(\"lssid\");\n            let ls = LearnShareSession.findOne( {_id: lssid} );\n            if (!ls) {\n                return;\n            }\n            ls.removeParticipant(value);\n        }\n    },\n    itemRemoveGuestHandler() {\n        return (value, $item) => {\n            let lssid = $(\"#select-guests\").closest(\"[data-lssid]\").data(\"lssid\");\n            let ls = LearnShareSession.findOne( {_id: lssid} );\n            if (!ls) {\n                return;\n            }\n            ls.removeGuest(value);\n        }\n    },\n    itemAddHandler() {\n        return (value, $item) => {\n            $(\"#btn-pick-first\").prop(\"disabled\",false);\n            let participant = {\n                id: value,\n                name: $item.text().slice(0,-1)\n            };\n            let id = $item.closest('[data-lssid]').data('lssid');\n            let ls = LearnShareSession.findOne( {_id: id} );\n            if (!ls) {\n                return;\n            }\n            if (typeof _.find(ls.presenters, function(o) {return o.id===participant.id}) !== \"undefined\") {\n                //if added user is in the list of presenters, mark it\n                $item.addClass(\"picked\");\n            }\n            if (\"guest\" === participant.id.slice(0,5)) {\n                $item.addClass(\"guest\");\n            }\n            ls.addParticipant(participant);\n        }\n    },\n    itemAddGuestHandler() {\n        return (value, $item) => {\n            $(\"#btn-pick-first\").prop(\"disabled\",false);\n            let participant = {\n                id: value,\n                name: $item.text().slice(0,-1)\n            };\n            let id = $item.closest('[data-lssid]').data('lssid');\n            let ls = LearnShareSession.findOne( {_id: id} );\n            if (!ls) {\n                return;\n            }\n            if (typeof _.find(ls.presenters, function(o) {return o.id===participant.id}) !== \"undefined\") {\n                //if added user is in the list of presenters, mark it\n                $item.addClass(\"picked\");\n            }\n            if (\"guest\" === participant.id.slice(0,5)) {\n                $item.addClass(\"guest\");\n            }\n            ls.saveGuest(participant);\n        }\n    },\n    order(idx) {\n        return idx + 1;\n    },\n    lssid() {\n        return Template.instance().lssid;\n    },\n    title() {\n        let lssid = Template.instance().lssid;\n        let lssess = LearnShareSession.findOne( {_id:lssid} );\n        if (lssess) {\n            return lssess.title;\n        }\n    },\n    teamId() {\n        let lssid = Template.instance().lssid;\n        let lssess = LearnShareSession.findOne( {_id:lssid} );\n        if (lssess) {\n            return lssess.teamId;\n        } else {\n            return \"\";\n        }\n    },\n    team() {\n        let lssid = Template.instance().lssid;\n        let lssess = LearnShareSession.findOne( {_id:lssid} );\n        if (lssess) {\n            return Team.findOne( {_id:lssess.teamId} );\n        } else {\n            return \"\";\n        }\n    },\n    teamName() {\n        let lssid = Template.instance().lssid;\n        let lssess = LearnShareSession.findOne( {_id:lssid} );\n        if (lssess) {\n            return Team.findOne( {_id:lssess.teamId} ).Name;\n        } else {\n            return \"\";\n        }\n    },\n    sessionActive() {\n        let lssid = Template.instance().lssid;\n        let lssess = LearnShareSession.findOne( {_id:lssid} );\n        if (lssess) {\n            if (lssess.state == \"locked\") {\n                return false;\n            } else {\n                return true;\n            }\n        }\n    },\n    notes() {\n        let lssid = Template.instance().lssid;\n        let lssess = LearnShareSession.findOne( {_id:lssid} );\n        if (lssess) {\n            return lssess.notes;\n        }\n    },\n    skypeUrl() {\n        let lssid = Template.instance().lssid;\n        let lssess = LearnShareSession.findOne( {_id:lssid} );\n        if (lssess) {\n            return lssess.skypeUrl;\n        }\n    },\n    guestName() {\n        return Session.get(\"guestName\").split('-')[1];\n    }\n});\n\nvar pickRandom = () => {\n    let selectControl = $(\"#select-participants\")[0].selectize;\n\n    let availableItems = [];\n    for (let i = 0; i < selectControl.items.length; i++) {\n        let $item = $(\".item[data-value=\"+selectControl.items[i]+\"]\");\n        if (!$item.hasClass(\"picked\") && !$item.hasClass(\"picking\")) {\n            availableItems.push($item);\n        }\n    }\n    if (availableItems.length === 0) {\n        //don't pick the same item twice in a row unless it's the last one\n        $item = $(\".item.picking[data-value]\");\n        if ($item.length && !$item.hasClass(\"picked\")) {\n            availableItems.push($(\".item.picking[data-value]\"));\n        }\n    }\n\n    if (availableItems.length <= 1) {\n        $(\"#btn-pick-first\").prop(\"disabled\", true);\n    }\n\n    if (availableItems.length === 0) {\n        //none left to pick\n        return '';\n    }\n    var $picking = availableItems[Math.floor(Math.random()*availableItems.length)];\n    $(\"#p-on-deck-info\").data(\"picking\", $picking.data(\"value\"));\n    $(\"#p-on-deck-info\").html($picking.text().slice(0,-1));\n    $picking.addClass(\"picking\");\n    return $picking.data(\"value\");\n}\nTemplate.learn_share.events({\n    'change .file-upload-input'(event, instance) {\n        var file = event.currentTarget.files[0];\n        var reader = new FileReader();\n        reader.onload = function(fileLoadEvent) {\n            let lssid = $(\".container[data-lssid]\").data(\"lssid\");\n            let lssess = LearnShareSession.findOne( {_id:lssid} );\n            lssess.uploadRecording(file, reader.result);\n        };\n        reader.readAsBinaryString(file);\n    },\n    'click button#btn-pick-first'(event, instance) {\n        var pickingId = pickRandom();\n        if (pickingId !== '') {\n            $(\"#p-on-deck\").show();\n            $(\"#p-pick-first\").hide();\n        }\n    },\n    'click button#btn-pick-again'(event, instance) {\n        let prevPickingId = $(\"#p-on-deck-info\").data(\"picking\");\n        var pickingId = pickRandom();\n\n        if (prevPickingId != pickingId) {\n            let $prevPicked = $(\".item[data-value=\"+prevPickingId+\"]\");\n            $prevPicked.removeClass(\"picking\");\n        }\n    },\n    'click button#btn-pick-accept'(event, instance) {\n        let pickedId = $(\"#p-on-deck-info\").data(\"picking\");\n        let picked = {};\n        let $pickedItem = $(\".item[data-value=\"+pickedId+\"]\");\n        picked.id = $pickedItem.data(\"value\");\n        picked.name = $pickedItem.text().slice(0,-1);\n        $pickedItem.removeClass(\"picking\").addClass(\"picked\");\n        $(\"#p-on-deck-info\").data(\"picking\",\"\");\n        $(\"#p-on-deck-info\").html(\"\");\n        $(\"#p-on-deck\").hide();\n        $(\"#p-pick-first\").show();\n        if ($(\".item[data-value]\").not(\".picked\").length === 0) {\n            $(\"#btn-pick-first\").attr(\"disabled\", true);\n        }\n\n        let lssid = Template.instance().lssid;\n        let lssess = LearnShareSession.findOne( {_id:lssid} );\n        lssess.addPresenter(picked);\n    },\n    'keypress #input-notes,#input-title'(event, instance) {\n        if (!Roles.userIsInRole(Meteor.userId(), ['admin','learn-share-host'], Roles.GLOBAL_GROUP)) {\n            event.preventDefault();\n        }\n    },\n    'keyup #input-notes,#input-title':_.debounce(function (event, instance) {\n        if (Roles.userIsInRole(Meteor.userId(), ['admin','learn-share-host'], Roles.GLOBAL_GROUP)) {\n            let lssid = $(\".container[data-lssid]\").data(\"lssid\");\n            let lssess = LearnShareSession.findOne( {_id:lssid} );\n            lssess.saveText($(\"#input-title\").val(), $(\"#input-notes\").val());\n        }\n    }, 2000),\n    'click button#modal-save-name'(event, instance) {\n        let lssid = $(\".container[data-lssid]\").data(\"lssid\");\n        let lssess = LearnShareSession.findOne( {_id:lssid} );\n        let guestName = \"guest-\"+$(\"#input-guest-name\").val();\n        //Session.setPersistent(\"guestName\",guestName);\n        lssess.saveGuest(Session.get(\"guestId\"), guestName);\n        $(\"#modal-edit-name\").modal(\"hide\");\n    },\n    'click a#lockSession'(event,instance) {\n        event.preventDefault();\n        let lssid = $(\".container[data-lssid]\").data(\"lssid\");\n        let lssess = LearnShareSession.findOne( {_id:lssid} );\n        lssess.saveText($(\"#input-title\").val(), $(\"#input-notes\").val());\n        lssess.lockSession();\n    },\n    'click a#unlockSession'(event,instance) {\n        event.preventDefault();\n        if (Roles.userIsInRole(Meteor.userId(), ['admin','learn-share-host'], Roles.GLOBAL_GROUP)) {\n            let lssid = $(\".container[data-lssid]\").data(\"lssid\");\n            let lssess = LearnShareSession.findOne( {_id:lssid} );\n            lssess.unlockSession();\n        }\n    },\n    'click a#a-skype-url-edit'(event,instance) {\n        event.preventDefault();\n        if (Roles.userIsInRole(Meteor.userId(), ['admin','learn-share-host'], Roles.GLOBAL_GROUP)) {\n            $(\"#a-skype-url\").hide();\n            $(\"#a-skype-url-edit\").hide();\n            $(\"#input-skype-url\").show();\n            $(\"#span-create-skype\").show();\n        }\n    },\n    'click a#a-create-call'(event,instance) {\n        event.preventDefault();\n        console.log(\"click create call\");\n        $(\"#span-create-skype\").html(\"<img src='/img/loading.gif' style='height:20px;width:20px;' /><span style='font-size:xx-small;'>contacting Skype</span>\")\n        initSkypeAPI();\n    },\n    'change input#input-skype-url'(event,instance) {\n        let lssid = $(\".container[data-lssid]\").data(\"lssid\");\n        let lssess = LearnShareSession.findOne( {_id:lssid} );\n        lssess.setSkypeUrl($(\"#input-skype-url\").val());\n        $(\"#a-skype-url\").show();\n        $(\"#a-skype-url-edit\").show();\n        $(\"#input-skype-url\").hide();\n        $(\"#span-create-skype\").hide();\n    }\n});\n","import { LearnShareSession } from '/imports/api/learn_share/learn_share.js';\nimport { Team } from '/imports/api/teams/teams.js';\nimport './learn_share_list.html';\n\nTemplate.learn_share_list.onCreated( function () {\n    this.autorun( () => {\n        console.log(\"autorunning learn_share_list...\");\n        this.subscription = this.subscribe('userList', Meteor.userId(), {\n            onStop: function () {\n                console.log(\"User List subscription stopped! \", arguments, this);\n            },\n            onReady: function () {\n                console.log(\"User List subscription ready! \", arguments, this);\n            }\n        });\n        console.log(this.subscription);\n\n        this.subscription2 = this.subscribe('learnShareList', Meteor.userId(), {\n            onStop: function () {\n                console.log(\"LearnShare List subscription stopped! \", arguments, this);\n            },\n            onReady: function () {\n                console.log(\"LearnShare List subscription ready! \", arguments, this);\n            }\n        });\n        console.log(this.subscription2);\n\n        this.subscription3 = this.subscribe('teamsMemberOfList', Meteor.userId(), {\n            onStop: function () {\n                console.log(\"Team Member Of List subscription stopped! \", arguments, this);\n            },\n            onReady: function () {\n                console.log(\"Team Member Of List subscription ready! \", arguments, this);\n            }\n        });\n        console.log(this.subscription3);\n    });\n});\n\nTemplate.learn_share_list.helpers({\n    lsSessList(teamId) {\n        let lst = [];\n        let filter = {};\n        if (typeof teamId === \"string\" && teamId != \"\") {\n            filter.teamId = teamId;\n        } else {\n            filter.teamId = {'$in': [null,'']};\n        }\n        LearnShareSession.find( filter ).forEach(function (sess) {\n            //sorting with { sort: {createdAt:-1} } had no effect, so unshift used to reverse order instead\n            lst.unshift(sess);\n        });\n        return lst;\n    },\n    hasSessions(teamId) {\n        let ls = LearnShareSession.find( {teamId: teamId} );\n\n        if (!ls || ls.count() == 0) {\n            return false;\n        } else {\n            return true;\n        }\n    },\n    teamList() {\n        //list of teams the user is a member of\n        let t = Team.find( {Members: Meteor.userId()} );\n        if (!t) {\n            return [];\n        }\n        let lst = t.fetch();\n        return lst;\n    }\n});\n\nTemplate.learn_share_list.events({\n    'click button#btn-create-new'(event, instance) {\n        Meteor.call('learnshare.createNewSession', $(\"#sess-title\").val(), $(\"#select-team\").val(), (error, result) => {\n            if (error) {\n                console.log(\"can't create new Learn/Share session\", error);\n            } else {\n                FlowRouter.go(\"/learnShare/\"+result);\n            }\n        });\n    }\n});\n","import './not-found.html';\n","import { Meteor } from 'meteor/meteor';\nimport { User } from '/imports/api/users/users.js';\nimport { TeamGoal } from '/imports/api/team_goals/team_goals.js';\nimport './team_goals.html';\nimport '/imports/ui/components/select_autocomplete/select_autocomplete.js';\n\nconst BLANK_GOAL = {\n    _id: \"new\",\n    title: \"\",\n    description: \"\"\n};\n\nlet _hasSubgoalView = new ReactiveVar(false);\nlet _subgoalId = new ReactiveVar(\"\");\nTemplate.team_goals.onCreated(function () {\n    if (this.data.teamName) {\n        this.teamName = this.data.teamName;\n    } else {\n        this.teamName = FlowRouter.getParam('teamName').split('-').join(' ');\n    }\n\n    Session.set(\"goalReload\",false);\n    Session.set(\"saving\",true);\n\n    this.userSubscriptionReady = new ReactiveVar( false );\n    this.autorun( () => {\n        this.modalGoalId = FlowRouter.getParam('goalId');\n        if (\"undefined\" !== typeof this.modalGoalId && \"\" !== this.modalGoalId) {\n            _hasSubgoalView.set(true);\n            _subgoalId.set(FlowRouter.getParam('goalId'));\n            $(\"body\").on(\"hidden.bs.modal\", \"#goal-modal-sub\", function () {\n                _hasSubgoalView.set(false);\n                _subgoalId.set(\"\");\n                FlowRouter.go(\"/teamGoals/\"+FlowRouter.getParam('teamName'));\n            });\n            Meteor.setTimeout(function () {\n                $(\"#goal-modal-sub\").modal(\"show\");\n                $(\"#goal-modal-sub\").find(\"div.team-goal\").removeClass(\"collapsed\");\n            }, 1000);\n        }\n        this.subscription = this.subscribe('teamGoalsData', this.teamName, {\n            onStop: function () {\n                console.log(\"Team Goals subscription stopped! \", arguments, this);\n            },\n            onReady: function () {\n                console.log(\"Team Goals subscription ready! \", arguments, this);\n            }\n        });\n        this.subscription2 = this.subscribe('userList', Meteor.userId(), {\n            onStop: function () {\n                console.log(\"User List subscription stopped! \", arguments, this);\n            },\n            onReady: function () {\n                console.log(\"User List subscription ready! \", arguments, this);\n            }\n        });\n        console.log(this.subscription2);\n    });\n    Meteor.setTimeout(function () {\n        Session.set(\"saving\",false);\n    }, 2000);\n});\nTemplate.team_goals.onRendered(function () {\n    Meteor.setTimeout(function() {\n        $(\"input.date\").datetimepicker({\n            format:'YYYY-MM-DD',\n            useCurrent:false,\n            showClear:true,\n            showClose:true\n        });\n    }, 1000);\n    $(\"body\").on(\"hidden.bs.modal\", \"#goal-modal-new\", function () {\n        $newgoal = $(\"#div-goal-new\").detach();\n        $newgoal.data(\"parent-id\",\"\");\n        $(\"#blank-goal\").find(\".col-sm-12\").append($newgoal);\n    });\n});\n\nvar resetNewGoalForm = () => {\n    let valInputs = [\n        \"goal-title-new\",\n        \"goal-description-new\",\n        \"input-date-due-new\",\n        \"input-date-review-new\",\n        \"input-date-reached-new\",\n    ];\n    for (let i = 0; i < valInputs.length; i++) {\n        $(\"#\"+valInputs[i]).val(\"\");\n    }\n\n    let slzInputs = [\n        \"select-assigned-to-new\",\n        \"select-mentors-new\",\n        \"select-admins-new\"\n    ];\n    for (let i = 0; i < valInputs.length; i++) {\n        $(\"#\"+valInputs[i]).val(\"\");\n    }\n};\n\nfunction saveGoal(goalId) {\n    let slAssigned = $(\"#select-assigned-to-\"+goalId)[0].selectize;\n    let slMentors = $(\"#select-mentors-\"+goalId)[0].selectize;\n    let slAdmins = $(\"#select-admins-\"+goalId)[0].selectize;\n    let assignList = slAssigned.getValue();\n    let mentorList = slMentors.getValue();\n    let adminList = slAdmins.getValue();\n    let tplTeamName = $(\"[data-team-name]\").data(\"team-name\");\n\n    Session.set(\"saving\",true);\n    let saveObj = {\n        teamName: tplTeamName,\n        title: $(\"#goal-title-\"+goalId).val(),\n        description: $(\"#goal-description-\"+goalId).val(),\n        assignedTo: assignList,\n        mentors: mentorList,\n        admins: adminList\n    };\n    let startDate = $(\"#input-start-date-\"+goalId).val();\n    if (\"\" !== startDate) {\n        saveObj.startDate = new Date(startDate);\n    }\n    let dueDate = $(\"#input-date-due-\"+goalId).val();\n    if (\"\" !== dueDate) {\n        saveObj.dueDate = new Date(dueDate);\n    }\n    let rvwDate = $(\"#input-date-review-\"+goalId).val();\n    if (\"\" !== rvwDate) {\n        saveObj.reviewDate = new Date(rvwDate);\n    }\n\n    if (goalId === BLANK_GOAL._id) {\n        let parentId = $(\"#div-goal-new\").data(\"parent-id\");\n        if (\"\" !== parentId) {\n            saveObj.parentId = parentId;\n        }\n        Meteor.call('teamgoals.createNewGoal', saveObj, function (err, rslt) {\n            console.log(err, rslt);\n        });\n    } else {\n        let g = TeamGoal.findOne( {_id: goalId} );\n        let reviewedOnDate = $(\"#input-date-reviewed-on-\"+goalId).val();\n        if (\"\" !== reviewedOnDate) {\n            saveObj.reviewedOnDate = new Date(reviewedOnDate);\n        }\n        let reachedDate = $(\"#input-date-reached-\"+goalId).val();\n        if (\"\" !== reachedDate) {\n            saveObj.reachedDate = new Date(reachedDate);\n        }\n\n        g.updateFromObj(saveObj);\n    }\n    Meteor.setTimeout(function () {\n        Session.set(\"saving\",false);\n    }, 10000);\n}\n\nfunction goalChanged($g) {\n    $g.find(\".btn-save\").prop(\"disabled\",false);\n    $g.find(\".btn-cancel\").prop(\"disabled\",false);\n}\nfunction goalUnchanged($g) {\n    $g.find(\".btn-save\").prop(\"disabled\",true);\n    $g.find(\".btn-cancel\").prop(\"disabled\",true);\n    $g.find(\".changed\").removeClass(\"changed\");\n}\n\nTemplate.team_goals.events({\n    'change input.flat,textarea.flat'(event, instance) {\n        $(event.target).addClass('changed');\n        let $goal = $(event.target).closest(\"[data-goal-id]\");\n        if ($goal) {\n            if ($(\"#goal-title-\"+$goal.data(\"goal-id\")).val() != \"\") {\n                //\n            }\n        }\n    },\n    'change input,textarea,select'(event, instance) {\n        let $t = $(event.target);\n        let $goal = $(event.target).closest(\"[data-goal-id]\");\n        goalChanged($goal);\n    },\n    'keyup input,textarea'(event, instance) {\n        let $t = $(event.target);\n        let $goal = $(event.target).closest(\"[data-goal-id]\");\n        goalChanged($goal);\n    },\n    'click button.btn-save'(event, instance) {\n        let $t = $(event.target);\n        let goalId = $t.closest(\"[data-goal-id]\").data(\"goal-id\");\n        saveGoal(goalId);\n        goalUnchanged($(\"#div-goal-\"+goalId));\n\n        $modalParent = $t.closest(\".modal\");\n        if ($modalParent.length) {\n            $modalParent.modal('hide');\n            $newgoal = $(\"#div-goal-new\").detach();\n            $newgoal.data(\"parent-id\",\"\");\n            $(\"#blank-goal\").find(\".col-sm-12\").html($newgoal);\n        }\n        if (goalId == BLANK_GOAL._id) {\n            resetNewGoalForm();\n            if ( ! $modalParent.length ) {\n                $(\".goal-controls\").show();\n                $(\"#blank-goal\").slideUp();\n            }\n        }\n    },\n    'click button.btn-add-subgoal'(event, instance) {\n        let parentId = $(event.target).closest(\"[data-goal-id]\").data(\"goal-id\");\n        $newgoal = $(\"#div-goal-new\").detach();\n        $newgoal.data(\"parent-id\",parentId);\n        $newgoal.find(\".btn-cancel\").attr(\"disabled\",false);\n        $(\"#goal-modal-new\").find(\".modal-body\").append($newgoal);\n        $(\"#goal-modal-new\").modal(\"show\");\n        $(\"#goal-modal-new\").find(\"div.team-goal\").removeClass(\"collapsed\");\n    },\n    'click button.btn-cancel'(event, instance) {\n        let $t = $(event.target);\n        let goalId = $t.closest(\"[data-goal-id]\").data(\"goal-id\");\n\n        $modalParent = $t.closest(\".modal\");\n        if ($modalParent.length) {\n            $modalParent.modal('hide');\n            $newgoal = $(\"#div-goal-new\").detach();\n            $newgoal.data(\"parent-id\",\"\");\n            $(\"#blank-goal\").find(\".col-sm-12\").append($newgoal);\n        }\n\n        if (goalId == BLANK_GOAL._id) {\n            resetNewGoalForm();\n            if ( ! $modalParent.length ) {\n                $(\".goal-controls\").show();\n                $(\"#blank-goal\").slideUp();\n            }\n        } else {\n            //forces a reload from the database\n            Session.set(\"goalReload\",true);\n            Meteor.setTimeout(function () {\n                Session.set(\"goalReload\",false);\n            }, 100);\n        }\n    },\n    'click button.btn-comment-add'(event, instance) {\n        $btnAdd = $(event.target);\n\n        let goalId = $btnAdd.closest(\"[data-goal-id]\").data(\"goal-id\");\n        let $comment = $(\"#new-comment-\"+goalId);\n        let newComment = $comment.val();\n        let g = TeamGoal.findOne( {_id: goalId} );\n        g.addComment(newComment);\n        $comment.val(\"\");\n    },\n    'click button.btn-review-comment-add'(event, instance) {\n        $btnAdd = $(event.target);\n\n        let goalId = $btnAdd.closest(\"[data-goal-id]\").data(\"goal-id\");\n        let $comment = $(\"#new-review-comment-\"+goalId);\n        let newComment = $comment.val();\n        let g = TeamGoal.findOne( {_id: goalId} );\n        g.addReviewComment(newComment);\n        $comment.val(\"\");\n    },\n    'click button#btn-add-goal'(event, instance) {\n        let $btnAdd = $(event.target);\n        $goal = $btnAdd.closest(\"[data-goal-id]\")\n        let goalId = $goal.data(\"goal-id\");\n\n        $(\".goal-controls\").hide();\n        let $btnCancel = $(\"#blank-goal\").find(\".btn-cancel\")\n        $btnCancel.prop(\"disabled\",false);\n        $(\".team-goal[data-goal-id=\"+goalId+\"]\").removeClass(\"collapsed\");\n        $(\"#blank-goal\").slideDown();\n        $(\"#btn-add-cancel\").fadeIn();\n    },\n    'click button#btn-add-cancel'(event, instance) {\n        $(\"#blank-goal\").slideUp();\n        $(\"#btn-add-cancel\").fadeOut();\n    },\n    'click button.btn-expand,div.collapsed-summary'(event, instance) {\n        let $target = $(event.target);\n        let $goalContainer = $target.closest(\"[data-goal-id]\");\n        let $targetExpandBtn = $goalContainer.find(\".btn-expand.glyphicon\");\n\n        $targetExpandBtn.removeClass(\"glyphicon-chevron-up\")\n            .addClass(\"glyphicon-chevron-down\");\n\n        if ($goalContainer.hasClass(\"collapsed\")) {\n            $(\".team-goal[data-goal-id]:not(.collapsed)\").slideUp(function() {\n                $(this).addClass(\"collapsed\").css(\"display\",\"block\");\n            });\n            $goalContainer.css(\"display\",\"none\").removeClass(\"collapsed\").slideDown(function () {\n                $('html, body').animate({\n                    scrollTop: ($goalContainer.offset().top)\n                },500);\n            });\n            $targetExpandBtn.removeClass(\"glyphicon-chevron-down\");\n            $targetExpandBtn.addClass(\"glyphicon-chevron-up\");\n        } else {\n            $goalContainer.slideUp(function() {\n                $goalContainer.addClass(\"collapsed\").css(\"display\",\"block\");\n            });\n            $targetExpandBtn.removeClass(\"glyphicon-chevron-up\");\n            $targetExpandBtn.addClass(\"glyphicon-chevron-down\");\n        }\n    },\n    'keyup textarea.goal-description,input.goal-title':_.debounce(function (event, instance) {\n        let goalId = $(event.target).closest(\"[data-goal-id]\").data(\"goal-id\");\n        if (\"new\" === goalId) {\n            //don't auto-save if creating a new goal\n            return;\n        }\n        saveGoal(goalId);\n        goalUnchanged($(\"#div-goal-\"+goalId));\n    }, 2000),\n    'change input,select':_.debounce(function (event, instance) {\n        if (!Session.get(\"saving\")) {\n            let goalId = $(event.target).closest(\"[data-goal-id]\").data(\"goal-id\");\n            if (\"new\" === goalId) {\n                //don't auto-save if creating a new goal\n                return;\n            }\n            saveGoal(goalId);\n            goalUnchanged($(\"#div-goal-\"+goalId));\n        }\n    }, 2000),\n    'dp.change':_.debounce(function (event, instance) {\n        if (!Session.get(\"saving\")) {\n            let goalId = $(event.target).closest(\"[data-goal-id]\").data(\"goal-id\");\n            if (\"new\" === goalId) {\n                //don't auto-save if creating a new goal\n                return;\n            }\n            saveGoal(goalId);\n            goalUnchanged($(\"#div-goal-\"+goalId));\n        }\n    }, 2000),\n    'click div.team-goal-title[data-id]'(event, instance) {\n        if (!Session.get(\"saving\")) {\n            _hasSubgoalView.set(true);\n            let gid = $(event.target).data(\"id\");\n            _subgoalId.set(gid);\n            FlowRouter.go(\"/teamGoals/\"+FlowRouter.getParam('teamName')+\"/\"+gid);\n            $(\"#goal-modal-sub\").prop(\"disabled\",false).modal(\"show\");\n        }\n    }\n});\n\nfunction getTeamName() {\n    let teamName = Template.instance().teamName;\n    return teamName;\n}\nTemplate.team_goals.helpers({\n    goalReload() {\n        return Session.get(\"goalReload\");\n    },\n    hasGoals() {\n        let teamName = getTeamName();\n        let g = TeamGoal.find( {teamName: teamName, parentId: '', reachedDate: null} ).fetch();\n        return g.length > 0;\n    },\n    hasReachedGoals() {\n        let teamName = getTeamName();\n        let g = TeamGoal.find( {teamName: teamName, parentId: '', reachedDate: {$ne:null}} ).fetch();\n        return g.length > 0;\n    },\n    teamGoals() {\n        let teamName = getTeamName();\n        let g = TeamGoal.find( {teamName: teamName, parentId: '', reachedDate: null} ).fetch();\n        return g;\n    },\n    teamReachedGoals() {\n        let teamName = getTeamName();\n        let g = TeamGoal.find( {teamName: teamName, parentId: '', reachedDate: {$ne:null}} ).fetch();\n        return g;\n    },\n    blankGoal() {\n        return Object.assign({teamName: Template.instance().teamName}, BLANK_GOAL);\n    },\n    hasSubgoalView() {\n        let hasView = _hasSubgoalView.get();\n        let gid = _subgoalId.get();\n        if (hasView) {\n            return true;\n        } else {\n            return false;\n        }\n    },\n    subgoal() {\n        let hasView = _hasSubgoalView.get();\n        let subgoalId = Template.instance().modalGoalId;\n        subgoalId = _subgoalId.get();\n        let g = TeamGoal.findOne( {_id: subgoalId} );\n        if (g) {\n            return g;\n        } else {\n            return {};\n        }\n    },\n    team() {\n        return getTeamName();\n    },\n    teamSlug() {\n        return getTeamName().split(\" \").join(\"-\");\n    },\n    goalComments(goalId) {\n        let g = TeamGoal.findOne( {_id: goalId} );\n        if (!g) {\n            return;\n        }\n        let c = g.goalComments;\n        return c;\n    },\n    reviewComments(goalId) {\n        let g = TeamGoal.findOne( {_id: goalId} );\n        if (!g) {\n            return;\n        }\n        let c = g.reviewComments;\n        return c;\n    },\n    formatDate(dateObj) {\n        return dateObj.toLocaleDateString();\n    },\n    getUserName(userId) {\n        let u = User.findOne( {_id: userId} );\n        if (!u) return \"\";\n        let fullName = u.MyProfile.firstName + \" \" + u.MyProfile.lastName;\n        return fullName;\n    },\n    userList() {\n        let list = [\n            {id: 1, name: \"George\"},\n            {id: 2, name: \"Frank\"}\n        ];\n        return list;\n    }\n});\n\nTemplate.goal_view.onRendered(function () {\n});\n\nTemplate.goal_view.helpers({\n    childGoals() {\n        let goalId = Template.instance().data.goal._id;\n        let children = TeamGoal.find( {parentId: goalId} ).fetch();\n        return children;\n    },\n    hasChildren() {\n        let goalId = Template.instance().data.goal._id;\n        let doesHave = TeamGoal.find( {parentId: goalId} ).fetch().length > 0;\n        return doesHave;\n    },\n    goalComments(goalId) {\n        if (goalId === BLANK_GOAL._id) {\n            return;\n        }\n        let g = TeamGoal.findOne( {_id: goalId} );\n        if (!g) {\n            return;\n        }\n        let c = g.goalComments;\n        return c;\n    },\n    reviewComments(goalId) {\n        if (goalId === BLANK_GOAL._id) {\n            return;\n        }\n        let g = TeamGoal.findOne( {_id: goalId} );\n        if (!g) {\n            return;\n        }\n        let c = g.reviewComments;\n        return c;\n    },\n    formatDate(dateObj) {\n        return dateObj.toLocaleDateString();\n    },\n    dateField(fld) {\n        let goal = Template.instance().data.goal;\n        if (goal._id == BLANK_GOAL._id) {\n            return \"\";\n        }\n        let d = goal[fld];\n        if ( !(d instanceof Date) ) {\n            return \"\";\n        }\n        let dateText = new Date(d.getTime() - d.getTimezoneOffset()*60000).toISOString().slice(0,-1);\n        return dateText;\n    },\n    getUserName(userId) {\n        let u = User.findOne( {_id: userId} );\n        if (!u) return \"\";\n        let fullName = u.MyProfile.firstName + \" \" + u.MyProfile.lastName;\n        return fullName;\n    },\n    userList() {\n        let userList = [];\n        let teamRole = {};\n        teamRole[\"roles.\"+Template.instance().data.goal.teamName] = \"member\";\n        User.find( teamRole ).forEach( (user) => {\n            userList.push({\n                text: user.MyProfile.firstName + \" \" + user.MyProfile.lastName,\n                value: user._id\n            })\n        });\n        console.log(teamRole, userList);\n        return userList;\n    },\n    progressPct() {\n        let goal = Template.instance().data.goal;\n        let g = TeamGoal.findOne( {_id: goal._id} );\n        if (!g) return 0;\n\n        if (!g.dueDate || !g.startDate || \"undefined\" === typeof g.dueDate || \"undefined\" === typeof g.startDate) {\n            return 0;\n        }\n        let currDt = new Date().getTime();\n        let totalDuration = g.dueDate.getTime() - g.startDate.getTime();\n        let timeSinceStart = currDt - g.startDate.getTime();\n        let pct = (timeSinceStart / totalDuration);\n        return Math.min(parseInt(pct*100),100);\n    },\n    userHasModifyPerm(fld) {\n        let goal = Template.instance().data.goal;\n        let g = TeamGoal.findOne( {_id: goal._id} );\n        if (!g) return true;\n        return g.hasModifyPerm(fld);\n    },\n    fldEnabled(fld) {\n        let goal = Template.instance().data.goal;\n        let g = TeamGoal.findOne( {_id: goal._id} );\n\n        if (!g) {\n            if (Roles.userIsInRole(Meteor.userId(), 'admin', goal.teamName)) {\n                return \"\";\n            } else {\n                return \"disabled\";\n            }\n        }\n\n        if (g.hasModifyPerm(fld)) {\n            return \"\";\n        } else {\n            return \"disabled\";\n        }\n    },\n    commaListUsers(lst) {\n        var nameList = [];\n\n        let goal = Template.instance().data.goal;\n        let g = TeamGoal.findOne( {_id: goal._id} );\n\n        for (let i = 0; i < lst.length; i++) {\n            let u = User.findOne( {_id: lst[i]} );\n            nameList.push(u.MyProfile.firstName + \" \" + u.MyProfile.lastName);\n        }\n        return nameList.join(', ');\n    },\n    isNew(id) {\n        return BLANK_GOAL._id === id;\n    },\n    collapsed(pid) {\n        //if this goal has a parent it is being displayed in a modal and should not be collapsed\n        if (\"\" !== pid) {\n            return \"\";\n        } else {\n            return \"collapsed\";\n        }\n    }\n})\nTemplate.child_goal_view.helpers({\n    childGoals() {\n        let goalId = Template.instance().data.goal._id;\n        let children = TeamGoal.find( {parentId: goalId} ).fetch();\n        return children;\n    },\n    hasChildren(goalId) {\n        goalId = Template.instance().data.goal._id;\n        let doesHave = TeamGoal.find( {parentId: goalId} ).count() > 0;\n        return doesHave;\n    }\n});\n","import { User } from '/imports/api/users/users.js';\nimport './user_dashboard.html';\nimport '/imports/ui/pages/learn_share_list/learn_share_list.js';\nimport '/imports/ui/pages/home/home.js';\n\nTemplate.user_dashboard.onCreated(function () {\n    //\n});\n\nTemplate.user_dashboard.helpers({\n    dashboardPanes() {\n        let u = User.findOne( {_id: Meteor.userId()} );\n        if (u && \"undefined\" !== typeof u.MyProfile.dashboardPanes && u.MyProfile.dashboardPanes.length > 0) {\n            return u.MyProfile.dashboardPanes;\n        } else {\n            return [\n                {\n                    size: 6,\n                    name: 'individual_goals',\n                    title: 'Goals',\n                    route: '/goals',\n                    data: {}\n                },\n                {\n                    size: 6,\n                    name: 'admin_teams',\n                    title: 'Teams',\n                    route: '/adminTeams',\n                    data: {}\n                },\n                {\n                    size: 6,\n                    name: 'learn_share_list',\n                    title: 'Learn/Share',\n                    route: '/learnShareList',\n                    data: {}\n                },\n                {\n                    size: 6,\n                    name: 'user_profile',\n                    title: 'Profile',\n                    route: '/profile',\n                    data: {}\n                },\n                {\n                    size: 12,\n                    name: 'App_home',\n                    title: 'Questions',\n                    route: '/',\n                    data: {}\n                },\n            ];\n        }\n    }\n})\n\nTemplate.user_dashboard.events({\n    'click div.dashboard-pane'(event, instance) {\n        let target = $(event.target).data(\"route\");\n        if (\"undefined\" === target) {\n            return;\n        }\n        FlowRouter.go(target);\n    }\n});\n","import { User } from '/imports/api/users/users.js';\nimport { UserSegment } from '/imports/api/user_segments/user_segments.js';\nimport './user_profile.html';\n\nTemplate.user_profile.onCreated(function () {\n    if (this.data.userId) {\n        this.userId = this.data.userId;\n    } else if (FlowRouter.getParam('userId')) {\n        this.userId = FlowRouter.getParam('userId');\n    } else {\n        this.userId = Meteor.userId();\n    }\n    this.autorun( () => {\n        this.subscription = this.subscribe('userData', {\n            onStop: function () {\n                console.log(\"User profile subscription stopped! \", arguments, this);\n            },\n            onReady: function () {\n                console.log(\"User profile subscription ready! \", arguments, this);\n            }\n        });\n        this.subscription2 = this.subscribe('userList', this.userId, {\n            onStop: function () {\n                console.log(\"User List subscription stopped! \", arguments, this);\n            },\n            onReady: function () {\n                console.log(\"User List subscription ready! \", arguments, this);\n            }\n        });\n        console.log(this.subscription2);\n        this.subscription3 = this.subscribe('segmentList', this.userId, {\n            onStop: function () {\n                console.log(\"Segment List subscription stopped! \", arguments, this);\n            },\n            onReady: function () {\n                console.log(\"Segment List subscription ready! \", arguments, this);\n            }\n        });\n        console.log(this.subscription3);\n    });\n});\nTemplate.user_profile.onRendered(function () {\n    Meteor.setTimeout(function() {\n        $(\"#input-bdate\").datetimepicker({\n            useCurrent:false,\n            showClear:true,\n            showClose:true,\n            format:'YYYY-MM-DD'\n        });\n    }, 1000);\n});\n\nTemplate.user_profile.helpers({\n    userId() {\n        return Template.instance().userId;\n    },\n    userSegmentList() {\n        let segList = [];\n        let s = UserSegment.find( );\n\n        s.forEach((m) => {\n            segList.push( {\n                value: m._id,\n                text: m.name\n            });\n        });\n        return segList;\n    },\n    assignedUserSegments() {\n        let uid = Template.instance().userId;\n        let u = User.findOne( {_id:uid} );\n\n        let assigned = [];\n\n        if (u) {\n            let segs = u.MyProfile.segments;\n            console.log(segs, segs[0], UserSegment.findOne( {_id:segs[0]} ));\n            for (let i = 0; i < segs.length; i++) {\n                let segTxt = UserSegment.findOne( {_id:segs[i]} ).name;\n                assigned.push( {\n                    value: segs[i],\n                    text: segTxt\n                });\n            }\n        }\n        console.log(\"assigned:\", assigned);\n        return assigned;\n    },\n    userField(fldName) {\n        let uid = Template.instance().userId;\n        let u = User.findOne( {_id:uid} );\n        if (u) {\n            switch (fldName) {\n            case 'firstName':\n                return u.MyProfile.firstName;\n                break;\n            case 'lastName':\n                return u.MyProfile.lastName;\n                break;\n            case 'fullName':\n                return u.MyProfile.fullName();\n                break;\n            case 'gender':\n                return (u.MyProfile.gender ? 'female' : 'male');\n                break;\n            case 'birthDate':\n                let d = u.MyProfile.birthDate;\n                let dateText = new Date(d.getTime() - d.getTimezoneOffset()*60000).toISOString().slice(0,-1);\n                return dateText;\n                break;\n            case 'dashboardPanes':\n                return (u.MyProfile.dashboardPanes.length > 0 ? 'Custom' : 'Default');\n                break;\n            }\n            return u.MyProfile.fullName();\n        } else {\n            return \"\";\n        }\n    },\n    genderSelected(label) {\n        let uid = Template.instance().userId;\n        let u = User.findOne( {_id:uid} );\n        if (!u) return \"\";\n        if (\n            (\"f\" === label.slice(0,1) || \"F\" === label.slice(0,1)) &&\n            u.MyProfile.gender === true\n        ) {\n            return \"selected\";\n        }\n        if (\n            (\"m\" === label.slice(0,1) || \"M\" === label.slice(0,1)) &&\n            u.MyProfile.gender === false\n        ) {\n            return \"selected\";\n        }\n        return \"\";\n    },\n    userName() {\n        let uid = Template.instance().userId;\n        let u = User.findOne( {_id:uid} );\n        if (u) {\n            return u.MyProfile.fullName();\n        } else {\n            return \"\";\n        }\n    },\n    emailAddress() {\n        let uid = Template.instance().userId;\n        let u = User.findOne( {_id:uid} );\n        if (u) {\n            emailAddresses = [];\n            for (let i = 0; i < u.emails.length; i++) {\n                emailAddresses.push(u.emails[i].address);\n            }\n            return emailAddresses.join(',');\n        } else {\n            return \"\";\n        }\n    },\n    itemAddHandler() {\n        return (value, $item) => {\n            let participant = {\n                id: value,\n                name: $item.text().slice(0,-1)\n            };\n        }\n    },\n    itemRemoveHandler() {\n        return (value, $item) => {\n            //\n        }\n    },\n});\n\nTemplate.user_profile.events({\n    'change input.flat,textarea.flat,select'(event, instance) {\n        $(event.target).addClass('changed');\n        $(\"#btn-group\").fadeIn();\n    },\n    'dp.change'(event, instance) {\n        $(event.target).addClass('changed');\n        $(\"#btn-group\").fadeIn();\n    },\n    'keyup input,textarea'(event, instance) {\n        let $t = $(event.target);\n        $t.addClass('changed');\n        $(\"#btn-group\").fadeIn( );\n    },\n    'click button.btn-save'(event, instance) {\n        let $t = $(event.target);\n        $t.closest(\".container\").find(\".changed\").removeClass(\"changed\");\n        //todo: update database\n        let uprofile = {\n            firstName: $(\"#input-fname\").val(),\n            lastName: $(\"#input-lname\").val(),\n            gender: (true == $(\"#input-gender\").val()),\n            birthDate: $(\"#input-bdate\").val(),\n            segments: $(\"#select-segments\").val()\n        };\n        let uid = Template.instance().userId;\n        let u = User.findOne( {_id:uid} );\n        if (u) {\n            u.profileUpdate(uprofile);\n        }\n    },\n    'click button.btn-cancel'(event, instance) {\n        let $t = $(event.target);\n        $t.closest(\".container\").find(\".changed\").removeClass(\"changed\");\n        $(\"#frm-profile\")[0].reset();\n    },\n});\n","import { UserSegment } from '/imports/api/user_segments/user_segments.js';\nimport './user_segments.html';\n\nTemplate.user_segments.onCreated(function () {\n    this.autorun( () => {\n        this.subscription = this.subscribe('segmentList', this.userId, {\n            onStop: function () {\n                console.log(\"Segment List subscription stopped! \", arguments, this);\n            },\n            onReady: function () {\n                console.log(\"Segment List subscription ready! \", arguments, this);\n            }\n        });\n        console.log(this.subscription);\n    });\n});\n\nTemplate.user_segments.helpers({\n    segmentList() {\n        let s = UserSegment.find();\n        return s.fetch();\n    }\n});\n\nTemplate.user_segments.events({\n    'keyup input.edit':_.debounce(function (event, instance) {\n        let segid = $(event.target).closest(\"[data-segid]\").data(\"segid\");\n        console.log(segid, $(event.target).closest(\"[data-segid]\"));\n        let s = UserSegment.findOne( {_id:segid} );\n        let name = $(\"#seg-name-\"+segid).val();\n        let dscr = $(\"#seg-dscr-\"+segid).val();\n        s.update(name, dscr);\n    }, 2000),\n    'keyup input.new':_.debounce(function (event, instance) {\n        if ($(\"#seg-name-new\").val() !== \"\") {\n            $(\"#new-seg-save\").prop(\"disabled\", false);\n        } else {\n            $(\"#new-seg-save\").prop(\"disabled\", true);\n        }\n    }, 2000),\n    'click #new-seg-save'(event, instance) {\n        if ($(\"#seg-name-new\").val() !== \"\") {\n            let name = $(\"#seg-name-new\").val();\n            let dscr = $(\"#seg-dscr-new\").val();\n            Meteor.call('segment.createNewSegment', name, dscr);\n            $(\"#seg-name-new\").val(\"\");\n            $(\"#seg-dscr-new\").val(\"\");\n        }\n    }\n});\n","import { User } from '/imports/api/users/users.js';\nimport './verify.html';\n\nTemplate.user_profile.onCreated(function () {\n    this.autorun( () => {\n        this.subscription = this.subscribe('userData', {\n            onStop: function () {\n                console.log(\"User profile subscription stopped! \", arguments, this);\n            },\n            onReady: function () {\n                console.log(\"User profile subscription ready! \", arguments, this);\n            }\n        });\n    });\n});\n\nTemplate.verify.events({\n    'click #resend-verify'(event, instance) {\n        event.preventDefault();\n        Meteor.call( 'user.sendVerificationEmail', () => {\n            console.log('resent');\n        });\n    }\n});\n","import { Class } from 'meteor/jagi:astronomy';\nimport { check } from 'meteor/check';\nconst DefaultCategoryID = \"xhKdwhacaWTcBTGPn\";\nconst TypeStats = Class.create({\n    name: 'TypeStats',\n    fields: {\n        num: {\n            type: Number,\n            default: 0\n        }\n    }\n});\nconst Category = Class.create({\n    name: 'Category',\n    collection: new Mongo.Collection('categories'),\n    fields: {\n        name: {\n            type: String,\n            default: \"the Unnamed Category\"\n        },\n        description: {\n            type: String,\n            default: \"this is the default stuff for a Category\"\n        },\n        stats: {\n            type: Object,\n            default: function () { return {}; }\n        }\n    },\n    helpers: {\n        addByType(type) {\n            if(!this.getStatsByType(type)) { this.stats[type] = new TypeStats(); }\n            this.getStatsByType(type).num++;\n            this.save();\n        },\n        removeByType(type) {\n            if(!this.getStatsByType(type)) { return false; }\n            this.getStatsByType(type).num--;\n            this.save();\n        },\n        getStatsByType(type) {\n            return this.stats[type];\n        }\n    },\n    meteorMethods: {\n        update(name, dscr) {\n            if (Roles.userIsInRole(Meteor.userId(), 'admin', Roles.GLOBAL_GROUP)) {\n                this.name = name;\n                this.description = dscr;\n                console.log(this.save());\n            }\n        }\n    }\n});\nCategory.Default = Category.findOne({_id:DefaultCategoryID});\nif (typeof Category.Default === \"undefined\") {\n    Category.Default = new Category({_id:DefaultCategoryID});\n    if (Meteor.isServer) {\n        Category.Default.save();\n    }\n}\n\nconst CategoryManager = Class.create({\n    name: 'CategoryManager',\n    fields: {\n        Categories: {\n            type: [String],\n            default: function () {\n                return [];\n            }\n        },\n        Type: {\n            type: String,\n            default: \"um... what!?\"\n        }\n    },\n    helpers: {\n        length() {\n            return this.Categories.length;\n        },\n        areIntersected(categoryManager) {\n            for(let i = 0; i < this.Categories.length; i++) {\n                for(let j = 0; j < categoryManager.Categories.length; i++) {\n                    if(this.Categories[i] == categoryManager.Categories[j]) { return true; }\n                }\n            }\n            return false;\n        },\n        addCategory(category, type) {\n            if(!type) { type = this.Type; }\n            this.Categories.push(category._id);\n            category.addByType(type);\n        },\n        hasCategory(category) {\n            if(this.Categories.length == 0) {\n                this.addCategory(Category.Default, this.Type);\n            }\n            return _.find(this.Categories, function (catId) {\n                return category._id == catId;\n            });\n        },\n        removeCategory(category, type, skipSlice) {\n            let index = -1;\n            _.each(this.Categories, function (catId, i) {\n                if(catId == category._id) {\n                    index = i;\n                }\n            });\n            if(index < 0) { return false; }\n            if(!skipSlice) {\n                if(index == 0) {\n                    this.Categories.shift();\n                } else if(index == this.Categories.length - 1) {\n                    this.Categories.pop();\n                } else {\n                    this.Categories = this.Categories.slice(0,index).concat(this.Categories.slice(index+1));\n                }\n            }\n            category.removeByType(type);\n        }\n    }\n});\nCategoryManager.OfType = function (type) {\n    let c = new CategoryManager();\n    c.Type = type;\n    return c;\n}\n\nexport { Category, CategoryManager };\n","import { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\nimport { User } from '../users/users.js';\nimport { Class, Enum } from 'meteor/jagi:astronomy';\nimport { UserNotify } from '/imports/api/user_notify/user_notify.js';\nimport { GoalComment } from '/imports/api/team_goals/team_goals.js';\n\nconst IndividualGoal = Class.create({\n    name: 'IndividualGoal',\n    collection: new Mongo.Collection('individual_goal'),\n    fields: {\n        userId: {\n            type: String,\n            default: ''\n        },\n        title: {\n            type: String,\n            default: ''\n        },\n        description: {\n            type: String,\n            default: ''\n        },\n        parentId: {\n            type: String,\n            default: ''\n        },\n        assignedToStr: {\n            type: String,\n            transient: true\n        },\n        reachedDate: {\n            type: Date,\n            optional: true\n        },\n        startDate: {\n            type: Date,\n            optional: true\n        },\n        dueDate: {\n            type: Date,\n            optional: true\n        },\n        reviewDate: {\n            type: Date,\n            optional: true\n        },\n        reviewedOnDate: {\n            type: Date,\n            optional: true\n        },\n        goalComments: {\n            type: [GoalComment],\n            default: []\n        },\n        reviewComments: {\n            type: [GoalComment],\n            default: []\n        },\n        teamId: {\n            type: String,\n            default: \"\"\n        },\n        privacy: {\n            type: String,\n            default: 'private'\n        },\n        createdBy: {\n            type: String,\n            default: ''\n        }\n    },\n    behaviors: {\n        timestamp: {}\n    },\n    helpers: {\n        getGoalRoleGroup() {\n            return this.teamName + '+' + this._id;\n        },\n        userIsAdmin() {\n            if (\n              Roles.userIsInRole(Meteor.userId(), 'admin', this.teamName)\n             ||\n              Roles.userIsInRole(Meteor.userId(), 'admin', this.getGoalRoleGroup())\n            ) {\n                //user is either a global admin, a team admin, or a goal admin\n                return true;\n            } else {\n                return false;\n            }\n        },\n        userIsMentor() {\n            if (\n                Roles.userIsInRole(Meteor.userId(), 'mentor', this.getGoalRoleGroup())\n            ) {\n                //user is a mentor for this goal\n                return true;\n            } else {\n                return false;\n            }\n        },\n        userIsAssigned() {\n            if (\n                Roles.userIsInRole(Meteor.userId(), 'assigned', this.getGoalRoleGroup())\n            ) {\n                //user is assigned to this goal\n                return true;\n            } else {\n                return false;\n            }\n        },\n        setDateField(fieldName, rdate) {\n            if ( typeof rdate === \"undefined\") {\n                rdate = new Date();\n            } else if ( !(rdate instanceof Date) ) {\n                return false;\n            }\n            this[fieldName] = rdate;\n            return true;\n        },\n        getUserFullNameX(userId) {\n            let u = User.findOne( {_id: userId} );\n            if (!u) {\n                return \"Michael\";\n            }\n            let name = u.MyProfile.firstName + \" \" + u.MyProfile.lastName;\n            return name;\n        },\n        hasModifyPerm(fieldName) {\n            switch (fieldName) {\n            //admins-only fields\n            case 'dueDate':\n            case 'startDate':\n            case 'reachedDate':\n            case 'reviewDate':\n            case 'title':\n            case 'description':\n            case 'assignedTo':\n            case 'mentors':\n            case 'admins':\n            case 'subgoals':\n                return this.userIsAdmin();\n                break;\n            //admins and mentors\n            case 'reviewedOnDate':\n            case 'reviewComments':\n                return this.userIsAdmin() || this.userIsMentor();\n                break;\n            //anyone assigned to the goal\n            case 'goalComments':\n                return this.userIsAdmin() || this.userIsMentor() || this.userIsAssigned();\n                break;\n            case 'teamId':\n            case 'privacy':\n                return true;\n                break;\n            default:\n                return false;\n                break;\n            }\n        },\n        notifyNew(oldList,newList) {\n            let diffList = _.difference(newList,oldList);\n            for (let i = 0; i < diffList.length; i++) {\n                UserNotify.add({\n                    userId: diffList[i],\n                    title: 'Goals',\n                    body: 'You have been added to goal '+this.title,\n                    action: 'teamgoals:'+this.teamName\n                });\n            }\n        }\n    },\n    events: {\n        beforeSave(e) {\n            /*\n            let egoal = e.currentTarget;\n\n            //any user added to a goal is automatically added to the 'view-goals' role for the team\n            //if they are already in that role, this should just ignore the redundant addUser\n            let flds = [\"assignedTo\",\"mentors\",\"admins\"];\n            for (let i in flds) {\n                if (Array.isArray(egoal[flds[i]]) && egoal[flds[i]].length > 0) {\n                    Roles.addUsersToRoles(egoal[flds[i]], 'view-goals', egoal.teamName);\n                }\n            }\n            */\n        },\n    },\n    meteorMethods: {\n        setDueDate(rdate) {\n            //admins only\n            if ( !this.userIsAdmin() ) {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n\n            if ( this.setDateField(\"dueDate\", rdate) ) {\n                this.save();\n            } else {\n                throw new Meteor.Error(403, \"Invalid date\");\n            }\n        },\n        setGoalReached(rdate) {\n            //admins only\n            if ( !this.userIsAdmin() ) {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n\n            if ( this.setDateField(\"reachedDate\", rdate) ) {\n                this.save();\n            } else {\n                throw new Meteor.Error(403, \"Invalid date\");\n            }\n        },\n        setReviewDate(rdate) {\n            //admins only\n            if ( !this.userIsAdmin() ) {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n\n            if ( this.setDateField(\"reviewDate\", rdate) ) {\n                this.save();\n            } else {\n                throw new Meteor.Error(403, \"Invalid date\");\n            }\n        },\n        setGoalReviewedOn(rdate) {\n            //mentors and admins\n            if ( !this.userIsAdmin() && !this.userIsMentor()) {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n\n            if ( this.setDateField(\"reviewedOnDate\", rdate) ) {\n                this.save();\n            } else {\n                throw new Meteor.Error(403, \"Invalid date\");\n            }\n        },\n        addComment(commentTxt) {\n            //mentors, admins, and assignees\n            if ( !this.userIsAdmin() && !this.userIsMentor() && !this.userIsAssigned() ) {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n\n            this.goalComments.push(\n                new GoalComment( {\n                    userId: Meteor.userId(),\n                    date: new Date(),\n                    text: commentTxt,\n                } )\n            );\n            this.save();\n        },\n        addReviewComment(commentTxt) {\n            //mentors and admins\n            if ( !this.userIsAdmin() && !this.userIsMentor() ) {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n\n            this.reviewComments.push(\n                new GoalComment( {\n                    userId: Meteor.userId(),\n                    date: new Date(),\n                    text: commentTxt,\n                } )\n            );\n            this.save();\n        },\n        createNewGoal() {\n            //admins only\n            if ( !this.userIsAdmin() ) {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n\n            //\n        },\n        setTitle(title) {\n            //admins only\n            if ( !this.userIsAdmin() ) {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n\n            this.title = title;\n            this.save();\n        },\n        setDescription(descr) {\n            //admins only\n            if ( !this.userIsAdmin() ) {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n\n            this.description = descr;\n            this.save();\n        },\n        setAssignedTo(ulist) {\n            //admins only\n            if ( !this.userIsAdmin() ) {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n\n            this.notifyNew(this.assignedTo,ulist);\n            this.assignedTo = ulist;\n            this.save();\n        },\n        setMentors(ulist) {\n            //admins only\n            if ( !this.userIsAdmin() ) {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n            this.notifyNew(this.mentors,ulist);\n            this.mentors = ulist;\n            this.save();\n        },\n        setAdmins(ulist) {\n            //admins only\n            if ( !this.userIsAdmin() ) {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n\n            this.notifyNew(this.admins,ulist);\n            this.admins = ulist;\n            this.save();\n        },\n        getUserFullName(userId) {\n            const invocation = DDP._CurrentInvocation.get();\n            if (invocation.isSimulation) {\n                return \"George\";\n            }\n            let u = User.findOne( {_id: userId} );\n            if (!u) {\n                return \"Michael\";\n            }\n            let name = u.MyProfile.firstName + \" \" + u.MyProfile.lastName;\n            return name;\n        },\n        updateFromObj(updObj) {\n            let permError = false;\n\n            for (let fld in updObj) {\n                if (\n                  this[fld] !== updObj[fld] ||\n                  (Array.isArray(updObj[fld]) && _.isEqual(this[fld], updObj[fld]))\n                ) {\n                    if (this.hasModifyPerm(fld)) {\n                        if (fld === \"assignedTo\" || fld === \"mentors\" || fld === \"admins\") {\n                            this.notifyNew(this[fld],updObj[fld]);\n                        }\n                        this[fld] = updObj[fld];\n                    } else {\n                        permError = true;\n                    }\n                }\n            }\n            this.save();\n            if (permError) {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n        }\n    }\n});\n\nexport { IndividualGoal };\n","import { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\nimport { Class, Enum } from 'meteor/jagi:astronomy';\nimport { User } from '/imports/api/users/users.js';\nimport { UserNotify } from '/imports/api/user_notify/user_notify.js';\n\nvar fs = {};\nif (Meteor.isServer) {\n    fs = Npm.require('fs');\n}\n\nconst LSUser = Class.create({\n    name: 'LSUser',\n    fields: {\n        id: {\n            type: String,\n            default: ''\n        },\n        name: {\n            type: String,\n            default: 'John Doe'\n        }\n    }\n});\n\nconst LearnShareSession = Class.create({\n    name: \"LearnShareSession\",\n    collection: new Mongo.Collection('learn_share'),\n    fields: {\n        title: {\n            type: String,\n            default: \"unnamed Learn/Share session\"\n        },\n        notes: {\n            type: String,\n            default: \"duly noted\"\n        },\n        participants: {\n            type: [LSUser],\n            default: []\n        },\n        guests: {\n            type: [LSUser],\n            default: []\n        },\n        presenters: {\n            type: [LSUser],\n            default: []\n        },\n        state: {\n            type: String,\n            default: \"active\"\n        },\n        skypeUrl: {\n            type: String,\n            default: \"\"\n        },\n        teamId: {\n            type: String,\n            default: \"\"\n        }\n    },\n    behaviors: {\n        timestamp: {}\n    },\n    meteorMethods: {\n        addPresenter: function (user) {\n            if (\"locked\" === this.state) {\n                return;\n            }\n            var lsUser = new LSUser(user);\n\n            //check for duplicate\n            if (typeof _.find(this.presenters, function(o) {return o.id===lsUser.id;}) !== \"undefined\") {\n                return false;\n            }\n            this.presenters.push(lsUser);\n            return this.save();\n        },\n        addParticipant: function (user) {\n            if (\"locked\" === this.state) {\n                return;\n            }\n            var lsUser = new LSUser(user);\n\n            //check for duplicate\n            if (typeof _.find(this.participants, function(o) {return o.id===lsUser.id;}) !== \"undefined\") {\n                return false;\n            }\n            this.participants.push(lsUser);\n            UserNotify.add({\n                userId: lsUser.id,\n                title: 'Learn/Share',\n                body: 'You have been added to a Learn/Share session',\n                action: 'learnshare:'+this._id\n            });\n            return this.save();\n        },\n        removeParticipant: function (userId) {\n            if (\"locked\" === this.state) {\n                return;\n            }\n            this.participants = _.filter(this.participants, function (o) {return o.id!==userId});\n            return this.save();\n        },\n        removeGuest: function (userId) {\n            if (\"locked\" === this.state) {\n                return;\n            }\n            this.guests = _.filter(this.guests, function (o) {return o.id!==userId});\n            return this.save();\n        },\n        removePresenter: function (userId) {\n            if (\"locked\" === this.state) {\n                return;\n            }\n            this.presenters = _.filter(this.presenters, function (o) {return o.id!==userId});\n            return this.save();\n        },\n        addParticipantSelf: function () {\n            if (\"locked\" === this.state) {\n                return;\n            }\n            if (Meteor.userId()) {\n                //check for duplicate\n                if (typeof _.find(this.participants, function(o) {return o.id===Meteor.userId();}) === \"undefined\") {\n                    let u = User.findOne( {_id: Meteor.userId()} );\n                    if (!u) {\n                        throw new Meteor.Error(403, \"You are not authorized\");\n                    } else {\n                        let lsu = new LSUser({\n                            id: Meteor.userId(),\n                            name: u.MyProfile.firstName + \" \" + u.MyProfile.lastName\n                        })\n                        this.participants.push(lsu);\n                        this.save();\n                    }\n                }\n            } else {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n        },\n        saveGuest: function(guestId, guestName) {\n            if (\"locked\" === this.state) {\n                return;\n            }\n            let guestObj = _.find(this.guests, function(o) {return o.id===guestId;});\n            if (\"undefined\" !== typeof guestObj) {\n                console.log(\"already a guest\");\n                this.guests = _.filter(this.guests, function(o) {return o.id!==guestId});\n                guestObj.name = guestName;\n            } else {\n                console.log(\"not a guest\");\n                guestObj = new LSUser({id: guestId, name: guestName});\n            }\n            this.guests.push(guestObj);\n            this.save();\n        },\n        saveText: function (title, notes) {\n            if (\"locked\" === this.state) {\n                return;\n            }\n            if (Roles.userIsInRole(Meteor.userId(), ['admin','learn-share-host'], Roles.GLOBAL_GROUP)) {\n                this.title = title;\n                this.notes = notes;\n                this.save();\n            } else {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n        },\n        lockSession: function (title, notes) {\n            if (Roles.userIsInRole(Meteor.userId(), ['admin','learn-share-host'], Roles.GLOBAL_GROUP)) {\n                this.state = \"locked\";\n                this.save();\n            } else {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n        },\n        unlockSession: function (title, notes) {\n            if (Roles.userIsInRole(Meteor.userId(), ['admin','learn-share-host'], Roles.GLOBAL_GROUP)) {\n                this.state = \"active\";\n                this.save();\n            } else {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n        },\n        setSkypeUrl: function (url) {\n            if (Roles.userIsInRole(Meteor.userId(), ['admin','learn-share-host'], Roles.GLOBAL_GROUP)) {\n                this.skypeUrl = url;\n                this.save();\n            }\n        },\n        uploadRecording(fileInfo, fileData) {\n            if (Meteor.isServer && Roles.userIsInRole(Meteor.userId(), ['admin','learn-share-host'], Roles.GLOBAL_GROUP)) {\n                let uploadPath = '/uploads/';\n                fs.writeFile(uploadPath+this._id+\".mp4\", fileData, 'binary', (err) => {\n                    console.log(\"File written.\", err);\n                });\n            }\n        }\n    }\n});\n\nexport { LearnShareSession };\n","// Definition of the questions collection\n\nimport { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\nimport { Class, Enum } from 'meteor/jagi:astronomy';\nimport { check } from 'meteor/check';\nimport { User } from '../users/users.js';\nimport { Defaults } from '/imports/startup/both/defaults.js';\nimport { UserNotify } from '/imports/api/user_notify/user_notify.js';\n\nconst MyersBriggsCategory = Enum.create({\n    name: 'MyersBriggsCategory',\n    identifiers: ['IE','NS','TF','JP']\n});\nconst Reading = Class.create({\n    name:'Reading',\n    fields: {\n        Rank: {\n            type: Number,\n            default: 0,\n            validators: [{\n                type: 'lte',\n                resolveParam: function () { return 50; }\n            },{\n                type: 'gte',\n                resolveParam: function () { return -50; }\n            }]\n        },\n        Text: {\n            type:String,\n            default: 'Well, you feel...'\n        }\n    }\n});\nconst PolarStats = Class.create({\n    name: 'PolarStats',\n    fields: {\n        LeftSum: {\n            type: Number,\n            default: 0\n        },\n        RightSum: {\n            type: Number,\n            default: 0\n        }\n    },\n    helpers: {\n        reset() {\n            this.LeftSum = 0;\n            this.RightSum = 0;\n        }\n    }\n});\nconst Question = Class.create({\n    name: \"Question\",\n    collection: new Mongo.Collection('questions'),\n    fields: {\n        Category: {\n            type: MyersBriggsCategory,\n            default: 'IE'\n        },\n        Categories: {\n            type: [MyersBriggsCategory],\n            default: []\n        },\n        Text: {\n            type: String,\n            default: 'Whoa! What we askin\\' here?'\n        },\n        LeftText: {\n            type: String,\n            default: 'Whoa! What we askin\\' here?'\n        },\n        RightText: {\n            type: String,\n            default: 'Whoa! What we askin\\' here?'\n        },\n        Readings: {\n            type: [Reading],\n            default: function () {\n                return [\n                    { Rank: -50, Text: \"You will ALWAYS Do this. Doing otherwise is inconceivable to you.\"},\n                    { Rank: -49, Text: \"There may be a possible scenerio where the reverse may apply, but it would be really rare.\"},\n                    { Rank: -40, Text: \"You can think of cases where you have done things the other way, but not under normal circumstances. \"},\n                    { Rank: -30, Text: \"This is your most common behavior, but there are definitely times you've done the opposite.\"},\n                    { Rank: -20, Text: \"This is a good default choice for you, but time and circumstance could easily find you doing the other.\"},\n                    { Rank: -10, Text: \"You don't have much of a preference either way, but this side sounds a bit more likely.\"},\n                    { Rank: 10, Text: \"You don't have much of a preference either way, but this side sounds a bit more likely.\"},\n                    { Rank: 20, Text: \"This is a good default choice for you, but time and circumstance could easily find you doing the other.\"},\n                    { Rank: 30, Text: \"This is your most common behavior, but there are definitely times you've done the opposite.\"},\n                    { Rank: 40, Text: \"You can think of cases where you have done things the other way, but not under normal circumstances. \"},\n                    { Rank: 49, Text: \"There may be a possible scenerio where the reverse may apply, but it would be really rare.\"},\n                    { Rank: 50, Text: \"You will ALWAYS Do this. Doing otherwise is inconceivable to you.\"}\n                ];\n            }\n        },\n        segments: {\n            type: [String],\n            default: []\n        },\n        Active: {\n            type: Boolean,\n            default: false\n        },\n        CreatedBy: {\n            type: String,\n            default: function() { return Meteor.userId(); }\n        },\n        TimesAnswered: {\n            type: PolarStats,\n            default: function () { return new PolarStats(); }\n        },\n        SumOfAnswers: {\n            type: PolarStats,\n            default: function () { return new PolarStats(); }\n        }\n    },\n    meteorMethods: {\n        getUser() {\n            let u = User.findOne({_id:this.CreatedBy});\n            return u;\n        }\n    },\n    helpers: {\n        addAnswer(answer) {\n            if(answer.Value < 0) {\n                this.TimesAnswered.LeftSum++;\n                this.SumOfAnswers.LeftSum += answer.Value;\n            } else {\n                this.TimesAnswered.RightSum++;\n                this.SumOfAnswers.RightSum += answer.Value;\n            }\n            this.save();\n        },\n        removeAnswer(answer) {\n            if(answer.Value < 0) {\n                this.TimesAnswered.LeftSum--;\n                if(this.TimesAnswered.LeftSum <= 0) { this.TimesAnswered.LeftSum = 0; this.SumOfAnswers.LeftSum = 0; }\n                else { this.SumOfAnswers.LeftSum -= answer.Value; }\n            } else {\n                this.TimesAnswered.RightSum--;\n                if(this.TimesAnswered.RightSum <= 0) { this.TimesAnswered.RightSum = 0; this.SumOfAnswers.RightSum = 0; }\n                else { this.SumOfAnswers.RightSum -= answer.Value; }\n            }\n            this.save();\n        },\n        allAnsweredUsers() {\n            return User.find({ 'MyProfile.UserType.AnsweredQuestions.QuestionID':{ $eq: this._id } });\n        },\n        unanswerAll(noSave) {\n            let self = this;\n            self.allAnsweredUsers().forEach(function (user) {\n                let b = user.MyProfile.UserType.AnsweredQuestions.length;\n                user.MyProfile.UserType.unAnswerQuestion(user.MyProfile.UserType.getAnswerForQuestion(self._id), false);\n                if(!noSave) { user.save(); }\n            });\n            this.reset();\n        },\n        reset() {\n            this.TimesAnswered.reset();\n            this.SumOfAnswers.reset();\n            this.save();\n        }\n    },\n    behaviors: {\n        timestamp: {},\n        softremove: {}\n    },\n    secured: {\n        update: false\n    },\n    events: {\n        beforeInsert(e) {\n            let u = User.findOne( {username:Defaults.user.username} );\n            UserNotify.add({\n                userId: u._id,\n                title: 'Questions',\n                body: 'New question added',\n                action: 'questions:'+e.currentTarget._id\n            });\n        },\n        beforeUpdate(e) {\n            const allowed = [ 'updatedAt', 'TimesAnswered', 'TimesAnswered.LeftSum', 'SumOfAnswers', 'SumOfAnswers.LeftSum', 'TimesAnswered.RightSum', 'SumOfAnswers.RightSum' ];\n            const doc = e.currentTarget;\n            const fieldNames = doc.getModified();\n            _.each(fieldNames, function (fieldName) {\n                if(!Meteor.isServer && allowed.indexOf(fieldName) < 0 && !Roles.userIsInRole(Meteor.userId(), ['admin'], Roles.GLOBAL_GROUP)) {\n                    throw new Meteor.Error(403, \"You are not authorized\");\n                }\n            });\n        }\n    }\n});\n\nexport { Question, Reading, MyersBriggsCategory };\n","import { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\nimport { User } from '../users/users.js';\nimport { Class, Enum } from 'meteor/jagi:astronomy';\nimport { UserNotify } from '/imports/api/user_notify/user_notify.js';\n\nconst GoalComment = Class.create({\n    name: 'GoalComment',\n    fields: {\n        userId: {\n            type: String,\n            default: function() { return Meteor.userId(); }\n        },\n        date: {\n            type: Date,\n            default: function() { return new Date(); }\n        },\n        text: {\n            type: String,\n            default: ''\n        }\n    }\n});\n\nconst TeamGoal = Class.create({\n    name: 'TeamGoal',\n    collection: new Mongo.Collection('team_goal'),\n    fields: {\n        teamName: {\n            type: String,\n            default: ''\n        },\n        title: {\n            type: String,\n            default: ''\n        },\n        description: {\n            type: String,\n            default: ''\n        },\n        parentId: {\n            type: String,\n            default: ''\n        },\n        assignedTo: {\n            type: [String],\n            default: []\n        },\n        mentors: {\n            type: [String],\n            default: []\n        },\n        assignedToStr: {\n            type: String,\n            transient: true\n        },\n        mentorsStr: {\n            type: String,\n            transient: true\n        },\n        adminsStr: {\n            type: String,\n            transient: true\n        },\n        admins: {\n            type: [String],\n            default: []\n        },\n        reachedDate: {\n            type: Date,\n            optional: true\n        },\n        startDate: {\n            type: Date,\n            optional: true\n        },\n        dueDate: {\n            type: Date,\n            optional: true\n        },\n        reviewDate: {\n            type: Date,\n            optional: true\n        },\n        reviewedOnDate: {\n            type: Date,\n            optional: true\n        },\n        goalComments: {\n            type: [GoalComment],\n            default: []\n        },\n        reviewComments: {\n            type: [GoalComment],\n            default: []\n        }\n    },\n    behaviors: {\n        timestamp: {}\n    },\n    helpers: {\n        getGoalRoleGroup() {\n            return this.teamName + '+' + this._id;\n        },\n        userIsAdmin() {\n            if (\n              Roles.userIsInRole(Meteor.userId(), 'admin', this.teamName)\n             ||\n              Roles.userIsInRole(Meteor.userId(), 'admin', this.getGoalRoleGroup())\n            ) {\n                //user is either a global admin, a team admin, or a goal admin\n                return true;\n            } else {\n                return false;\n            }\n        },\n        userIsMentor() {\n            if (\n                Roles.userIsInRole(Meteor.userId(), 'mentor', this.getGoalRoleGroup())\n            ) {\n                //user is a mentor for this goal\n                return true;\n            } else {\n                return false;\n            }\n        },\n        userIsAssigned() {\n            if (\n                Roles.userIsInRole(Meteor.userId(), 'assigned', this.getGoalRoleGroup())\n            ) {\n                //user is assigned to this goal\n                return true;\n            } else {\n                return false;\n            }\n        },\n        setDateField(fieldName, rdate) {\n            if ( typeof rdate === \"undefined\") {\n                rdate = new Date();\n            } else if ( !(rdate instanceof Date) ) {\n                return false;\n            }\n            this[fieldName] = rdate;\n            return true;\n        },\n        getUserFullNameX(userId) {\n            let u = User.findOne( {_id: userId} );\n            if (!u) {\n                return \"Michael\";\n            }\n            let name = u.MyProfile.firstName + \" \" + u.MyProfile.lastName;\n            return name;\n        },\n        hasModifyPerm(fieldName) {\n            switch (fieldName) {\n            //admins-only fields\n            case 'dueDate':\n            case 'startDate':\n            case 'reachedDate':\n            case 'reviewDate':\n            case 'title':\n            case 'description':\n            case 'assignedTo':\n            case 'mentors':\n            case 'admins':\n            case 'subgoals':\n                return this.userIsAdmin();\n                break;\n            //admins and mentors\n            case 'reviewedOnDate':\n            case 'reviewComments':\n                return this.userIsAdmin() || this.userIsMentor();\n                break;\n            //anyone assigned to the goal\n            case 'goalComments':\n                return this.userIsAdmin() || this.userIsMentor() || this.userIsAssigned();\n                break;\n            default:\n                return false;\n                break;\n            }\n        },\n        notifyNew(oldList,newList) {\n            let diffList = _.difference(newList,oldList);\n            for (let i = 0; i < diffList.length; i++) {\n                UserNotify.add({\n                    userId: diffList[i],\n                    title: 'Team Goals',\n                    body: 'You have been added to goal '+this.title,\n                    action: 'teamgoals:'+this.teamName\n                });\n            }\n        }\n    },\n    events: {\n        beforeSave(e) {\n            let egoal = e.currentTarget;\n\n            //any user added to a goal is automatically added to the 'view-goals' role for the team\n            //if they are already in that role, this should just ignore the redundant addUser\n            let flds = [\"assignedTo\",\"mentors\",\"admins\"];\n            for (let i in flds) {\n                if (Array.isArray(egoal[flds[i]]) && egoal[flds[i]].length > 0) {\n                    Roles.addUsersToRoles(egoal[flds[i]], 'view-goals', egoal.teamName);\n                }\n            }\n        },\n    },\n    meteorMethods: {\n        setDueDate(rdate) {\n            //admins only\n            if ( !this.userIsAdmin() ) {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n\n            if ( this.setDateField(\"dueDate\", rdate) ) {\n                this.save();\n            } else {\n                throw new Meteor.Error(403, \"Invalid date\");\n            }\n        },\n        setGoalReached(rdate) {\n            //admins only\n            if ( !this.userIsAdmin() ) {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n\n            if ( this.setDateField(\"reachedDate\", rdate) ) {\n                this.save();\n            } else {\n                throw new Meteor.Error(403, \"Invalid date\");\n            }\n        },\n        setReviewDate(rdate) {\n            //admins only\n            if ( !this.userIsAdmin() ) {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n\n            if ( this.setDateField(\"reviewDate\", rdate) ) {\n                this.save();\n            } else {\n                throw new Meteor.Error(403, \"Invalid date\");\n            }\n        },\n        setGoalReviewedOn(rdate) {\n            //mentors and admins\n            if ( !this.userIsAdmin() && !this.userIsMentor()) {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n\n            if ( this.setDateField(\"reviewedOnDate\", rdate) ) {\n                this.save();\n            } else {\n                throw new Meteor.Error(403, \"Invalid date\");\n            }\n        },\n        addComment(commentTxt) {\n            //mentors, admins, and assignees\n            if ( !this.userIsAdmin() && !this.userIsMentor() && !this.userIsAssigned() ) {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n\n            this.goalComments.push(\n                new GoalComment( {\n                    userId: Meteor.userId(),\n                    date: new Date(),\n                    text: commentTxt,\n                } )\n            );\n            this.save();\n        },\n        addReviewComment(commentTxt) {\n            //mentors and admins\n            if ( !this.userIsAdmin() && !this.userIsMentor() ) {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n\n            this.reviewComments.push(\n                new GoalComment( {\n                    userId: Meteor.userId(),\n                    date: new Date(),\n                    text: commentTxt,\n                } )\n            );\n            this.save();\n        },\n        createNewGoal() {\n            //admins only\n            if ( !this.userIsAdmin() ) {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n\n            //\n        },\n        setTitle(title) {\n            //admins only\n            if ( !this.userIsAdmin() ) {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n\n            this.title = title;\n            this.save();\n        },\n        setDescription(descr) {\n            //admins only\n            if ( !this.userIsAdmin() ) {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n\n            this.description = descr;\n            this.save();\n        },\n        setAssignedTo(ulist) {\n            //admins only\n            if ( !this.userIsAdmin() ) {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n\n            this.notifyNew(this.assignedTo,ulist);\n            this.assignedTo = ulist;\n            this.save();\n        },\n        setMentors(ulist) {\n            //admins only\n            if ( !this.userIsAdmin() ) {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n            this.notifyNew(this.mentors,ulist);\n            this.mentors = ulist;\n            this.save();\n        },\n        setAdmins(ulist) {\n            //admins only\n            if ( !this.userIsAdmin() ) {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n\n            this.notifyNew(this.admins,ulist);\n            this.admins = ulist;\n            this.save();\n        },\n        getUserFullName(userId) {\n            const invocation = DDP._CurrentInvocation.get();\n            if (invocation.isSimulation) {\n                return \"George\";\n            }\n            let u = User.findOne( {_id: userId} );\n            if (!u) {\n                return \"Michael\";\n            }\n            let name = u.MyProfile.firstName + \" \" + u.MyProfile.lastName;\n            return name;\n        },\n        updateFromObj(updObj) {\n            let permError = false;\n\n            for (let fld in updObj) {\n                if (\n                  this[fld] !== updObj[fld] ||\n                  (Array.isArray(updObj[fld]) && _.isEqual(this[fld], updObj[fld]))\n                ) {\n                    if (this.hasModifyPerm(fld)) {\n                        if (fld === \"assignedTo\" || fld === \"mentors\" || fld === \"admins\") {\n                            this.notifyNew(this[fld],updObj[fld]);\n                        }\n                        this[fld] = updObj[fld];\n                    } else {\n                        permError = true;\n                    }\n                }\n            }\n            this.save();\n            if (permError) {\n                throw new Meteor.Error(403, \"You are not authorized\");\n            }\n        }\n    }\n});\n\nexport { TeamGoal, GoalComment };\n","import { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\nimport { Class, Enum } from 'meteor/jagi:astronomy';\nimport { check } from 'meteor/check';\nimport { User } from '../users/users.js';\nimport { Defaults } from '/imports/startup/both/defaults.js';\nimport { UserNotify } from '/imports/api/user_notify/user_notify.js';\nconst DefaultTeamID = \"NCuypCXN47KrSTeXh\";\n\nconst TeamIcon = Class.create({\n    name: \"TeamIcon\",\n    fields: {\n        data: {\n            type: String,\n            default: ''\n        },\n        contentType: {\n            type: String,\n            default: 'image/png'\n        }\n    }\n});\n\nconst Team = Class.create({\n    name: \"Team\",\n    collection: new Mongo.Collection('teams'),\n    fields: {\n        Name: {\n            type: String,\n            default: 'Whoa! The no-name team?'\n        },\n        Description: {\n        \ttype: String,\n        \tdefault: 'This team is nondescript.'\n        },\n        Icon64: {\n            type: String,\n            default: ''\n        },\n        IconType: {\n            type: String,\n            defaut: 'image/png',\n            optional: true\n        },\n        Icon: {\n            type: TeamIcon,\n            default: function() { return new TeamIcon(); }\n        },\n        Public: {\n            type: Boolean,\n            default: true\n        },\n        Members: {\n            type: [String],\n            default: []\n        },\n        Active: {\n            type: Boolean,\n            default: false\n        },\n        CreatedBy: {\n            type: String,\n            default: function() { return this.userId; }\n        },\n    },\n    indexes: {\n        nameIndex: {\n            fields: {\n                Name: 1\n            },\n            options: {\n                unique: true\n            },\n        }\n    },\n    meteorMethods: {\n        userRequestJoin() {\n            Roles.addUsersToRoles(Meteor.userId(), 'user-join-request', this.Name);\n        },\n        adminRequestUserJoin(user) {\n            if (Roles.userIsInRole(Meteor.userId(), 'admin', this.Name) && !Roles.userIsInRole(user, 'member', this.Name)) {\n                Roles.addUsersToRoles(user, 'admin-join-request', this.Name);\n                for (let i = 0; i < user.length; i++) {\n                    UserNotify.add({\n                        userId: user[i],\n                        title: 'Teams',\n                        body: 'Received join request for team ' + this.Name,\n                        action: 'teams:'+this.Name.split(' ').join('-')\n                    });\n                }\n            }\n        },\n        userAcceptJoin() {\n            if (Roles.userIsInRole(Meteor.userId(), 'admin-join-request', this.Name)) {\n                Roles.removeUsersFromRoles(Meteor.userId(), 'admin-join-request', this.Name);\n                this.addUsers(Meteor.userId());\n            }\n        },\n        userDeclineJoin() {\n            if (Roles.userIsInRole(Meteor.userId(), 'admin-join-request', this.Name)) {\n                Roles.removeUsersFromRoles(Meteor.userId(), 'admin-join-request', this.Name);\n            }\n        },\n        adminAcceptJoin(userId) {\n            if (Roles.userIsInRole(Meteor.userId(), 'admin', this.Name)) {\n                Roles.removeUsersFromRoles(userId, 'user-join-request', this.Name);\n                //Roles.addUsersToRoles(userId, 'member', this.Name);\n                this.addUsers(userId);\n            }\n        },\n        adminRejectJoin(userId) {\n            if (Roles.userIsInRole(Meteor.userId(), 'admin', this.Name)) {\n                Roles.removeUsersFromRoles(userId, 'user-join-request', this.Name);\n            }\n        },\n        addRole(userId, role) {\n            if (Roles.userIsInRole(Meteor.userId(), 'admin', this.Name)) {\n                Roles.addUsersToRoles(userId, role, this.Name);\n            }\n        },\n        removeRole(userId, role) {\n            if (Roles.userIsInRole(Meteor.userId(), 'admin', this.Name)) {\n                Roles.removeUsersFromRoles(userId, role, this.Name);\n            }\n        },\n        updateFromObj(updObj) {\n            if (Roles.userIsInRole(Meteor.userId(), 'admin', this.Name)) {\n                for (let fld in updObj) {\n                    if (\"Icon64\" !== fld && \"IconType\" !== fld && \"Icon\" !== fld) {\n                        this[fld] = updObj[fld];\n                    }\n                }\n                this.save();\n            }\n        },\n        uploadIcon(fileInfo, fileData) {\n            if (Meteor.isServer) {\n                var base64Image = new Buffer(fileData, 'binary').toString('base64');\n                this.Icon64 = base64Image;\n                this.IconType = 'image/png';\n                this.save();\n            }\n        }\n    },\n    helpers: {\n        addUsers(users) {\n            if (typeof users === 'string') {\n                users = [users];\n            }\n\n            //admin list has to be filtered because getUsersInRole includes admin in GLOBAL_GROUP\n            let groupAdminList = Roles.getUsersInRole('admin', this.Name).fetch().filter( (user) => {\n                return (\n                    \"undefined\" !== typeof user.roles &&\n                    \"undefined\" !== typeof user.roles[this.Name] &&\n                    user.roles[this.Name].indexOf('admin') > -1\n                );\n            });\n\n            for (let i = 0; i < users.length; i++) {\n                if (this.Members.indexOf(users[i]) === -1) {\n                    this.Members.push( users[i] );\n                }\n                let currUserRoles = ['member'];\n                //Roles.addUsersToRoles(users[i], 'member', this.Name);\n\n                //if team doesn't have an admin, the first user added becomes admin\n                if (i == 0 && groupAdminList.length == 0) {\n                    //Roles.addUsersToRoles(users[i], 'admin', this.Name);\n                    currUserRoles.push('admin');\n                } else {\n                    //Roles.addUsersToRoles(users[i], Defaults.role.name, this.Name);\n                    currUserRoles.push(Defaults.role.name);\n                }\n                Roles.addUsersToRoles(users[i], currUserRoles, this.Name);\n                /*\n                let u = User.findOne( {_id: users[i]} );\n                if (u && u.teams.indexOf(this.Name) === -1) {\n                    u.teams.push(this.Name);\n                    u.save();\n                }\n                */\n            }\n            this.save();\n        },\n        removeUsers(users) {\n            if (typeof users === 'string') {\n                users = [users];\n            }\n\n            for (let i = 0; i < users.length; i++) {\n            }\n        },\n        removeUsersFromTeamRoles(users, roles) {\n            if (typeof users === 'string') {\n                users = [users];\n            }\n            if (typeof roles === 'string') {\n                roles = [roles];\n            }\n\n            //if removing the 'member' role from users, completely remove them from all roles and from the group\n            if (roles.indexOf('member') !== -1) {\n                this.removeUsers(users)\n            }\n\n            for (let i = 0; i < users.length; i++) {\n            }\n        }\n    },\n    behaviors: {\n        timestamp: {},\n        softremove: {}\n    },\n    secured: {\n    },\n    events: {\n        afterInit(e) {\n            //\n        },\n        beforeSave(e) {\n            console.log(\"before save Team\", e.currentTarget.Name, e.currentTarget.Members);\n        }\n    }\n});\n\nTeam.Default = Team.findOne({_id:DefaultTeamID});\nif (typeof Team.Default === \"undefined\") {\n    Team.Default = new Team({\n        _id:DefaultTeamID,\n        Name: 'No Team',\n        Active: true\n    });\n    if (Meteor.isServer) {\n        Team.Default.CreatedBy = 'kkcDYH3ix4f4Lb5qk';\n        //console.log(Team.Default);\n        //Team.Default.save();\n    }\n}\n\nexport { Team,TeamIcon };\n","import { Class } from 'meteor/jagi:astronomy';\nimport { check } from 'meteor/check';\nimport { Mongo } from 'meteor/mongo';\nimport { MyersBriggsCategory } from '../questions/questions.js';\nimport { Category, CategoryManager } from '../categories/categories.js';\n\nconst ReadingRange = Class.create({\n    name: \"ReadingRange\",\n    fields: {\n        high: {\n            type: Number,\n            default: 50\n        },\n        low: {\n            type: Number,\n            default: 0\n        },\n        Delta: {\n            type: Number,\n            default: 50\n        }\n    },\n    helpers: {\n        in(val) {\n            return this.low <= val && val <= this.high;\n        },\n        setDelta() {\n            this.Delta = this.high - this.low;\n            return this;\n        }\n    }\n});\nReadingRange.Create = function(high, low) {\n    let m = new ReadingRange();\n    m.high = high;\n    m.low = low;\n    return m.setDelta();\n}\nReadingRange.FullHigh = function () {\n    return ReadingRange.Create(50, 0);\n}\nReadingRange.FullLow = function () {\n    return ReadingRange.Create(0, -50);\n}\nconst TypeReadingCategory = Class.create({\n    name: \"TypeReadingCategory\",\n    fields: {\n        MyersBriggsCategory: {\n            type: MyersBriggsCategory\n        },\n        Range: {\n            type: ReadingRange,\n            default: function () {\n                return ReadingRange.FullHigh;\n            }\n        }\n    }\n});\nconst TypeReadingCategories = Class.create({\n    name: \"TypeReadingCategories\",\n    fields: {\n        0: {\n            type:TypeReadingCategory,\n            optional: true\n        },\n        1: {\n            type:TypeReadingCategory,\n            optional: true\n        },\n        2: {\n            type:TypeReadingCategory,\n            optional: true\n        },\n        3: {\n            type:TypeReadingCategory,\n            optional: true\n        }\n    }\n});\nconst TypeReading = Class.create({\n    name: \"TypeReading\",\n    collection: new Mongo.Collection('type_readings'),\n    fields: {\n        TypeReadingCategories: {\n            type: TypeReadingCategories,\n            default: {}\n        },\n        Categories: {\n            type: CategoryManager,\n            default: function () {\n                return CategoryManager.OfType(\"TypeReading\");\n            }\n        },\n        Header: {\n            type: String,\n            default: \"\"\n        },\n        Body: {\n            type: String,\n            default: \"\"\n        },\n        CreatedBy: {\n            type: String,\n            default: function() { return Meteor.userId(); }\n        },\n        Enabled: {\n            type: Boolean,\n            default: false\n        }\n    },\n    helpers: {\n        toggle() {\n            this.Enabled = !this.Enabled;\n            this.save();\n        },\n        addTypeCategory(cat) {\n            this.TypeReadingCategories[cat.MyersBriggsCategory] = cat;\n        }\n    },\n    events: {\n        beforeSave(e) {\n            _.forEach(e.target.TypeReadingCategories, (reading) => { \n                if(reading == null) { return; }\n                reading.Range.setDelta();\n            });\n            if(e.target.Categories.length() < 1) {\n                e.target.Categories.addCategory(Category.Default);\n            }\n        }\n    }\n});\n\nexport { TypeReading, ReadingRange, TypeReadingCategory, TypeReadingCategories };","import { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\nimport { Class, Enum } from 'meteor/jagi:astronomy';\n\nconst UserFeedback = Class.create({\n    name: 'UserSegment',\n    collection: new Mongo.Collection('user_feedback'),\n    fields: {\n        userId: {\n            type: String,\n            default: ''\n        },\n        source: {\n            type: String,\n            default: ''\n        },\n        context: {\n            type: String,\n            default: ''\n        },\n        comment: {\n            type: String,\n            default: ''\n        },\n        dateCreated: {\n            type: Date,\n            default: function() { return new Date(); }\n        }\n    }\n});\n\nexport { UserFeedback };\n","import { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\nimport { Class, Enum } from 'meteor/jagi:astronomy';\nimport { User } from '../users/users.js';\nimport { Email } from 'meteor/email';\n\nlet UserNotify = Class.create({\n    name: \"UserNotify\",\n    collection: new Mongo.Collection('user_notify'),\n    fields: {\n        userId: {\n            type: String,\n            default: ''\n        },\n        isRead: {\n            type: Boolean,\n            default: false\n        },\n        isPushed: {\n            type: Boolean,\n            default: false\n        },\n        isEmailed: {\n            type: Boolean,\n            default: false\n        },\n        title: {\n            type: String,\n            default: ''\n        },\n        body: {\n            type: String,\n            default: ''\n        },\n        action: {\n            type: String,\n            default: ''\n        },\n        createdDate: {\n            type: Date,\n            default: function () { return new Date(); }\n        }\n    },\n    meteorMethods: {\n        markRead() {\n            this.isRead = true;\n            this.save();\n        },\n        markNotified() {\n            this.isPushed = true;\n            this.save();\n        }\n    },\n    helpers: {\n        test() {\n            console.log(\"123\");\n        },\n        pushNotify(opts) {\n            let noteOpts = {\n                body: this.body,\n                icon: '/img/panda.png',\n                data: this._id\n            }\n            let browserNote;\n\n            if (!(\"Notification\" in window)) {\n                alert(\"This browser does not support desktop notification\");\n            }\n\n            // Let's check whether notification permissions have already been granted\n            else if (Notification.permission === \"granted\") {\n                // If it's okay let's create a notification\n                browserNote = new Notification(this.title, noteOpts);\n            }\n\n            // Otherwise, we need to ask the user for permission\n            else if (Notification.permission !== \"denied\") {\n                Notification.requestPermission(function (permission) {\n                    // If the user accepts, let's create a notification\n                    if (permission === \"granted\") {\n                        browserNote = new Notification(this.title, noteOpts);\n                    }\n                });\n            }\n            if (Notification.permission === \"granted\" && typeof opts.onclick !== 'undefined') {\n                browserNote.onclick = opts.onclick;\n            }\n        }\n    },\n    events: {\n        beforeSave(e) {\n            if (Meteor.isServer) {\n                let note = e.currentTarget;\n                if (!note.isEmailed) {\n                    let u = User.findOne( {_id:note.userId} );\n                    if (u) {\n                        let addr = u.emails[0].address;\n                        Email.send({\n                            to: addr,\n                            from: \"wayne@paladinarcher.com\",\n                            subject: \"Developer Level Notification - \"+note.title,\n                            text: note.body\n                        });\n                    }\n                }\n            }\n        }\n    }\n});\n\nif (Meteor.isClient) {\n    //\n}\n\nUserNotify.add = function(opts) {\n    let notify = new UserNotify(opts);\n    notify.save();\n}\n\nexport { UserNotify };\n","import { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\nimport { Class, Enum } from 'meteor/jagi:astronomy';\n\nconst UserSegment = Class.create({\n    name: 'UserSegment',\n    collection: new Mongo.Collection('user_segments'),\n    fields: {\n        name: {\n            type: String,\n            default: 'Default user segment'\n        },\n        description: {\n            type: String,\n            default: 'The default user segment for relevant content'\n        }\n    }\n});\n\nexport { UserSegment };\n","import { Class } from 'meteor/jagi:astronomy';\nimport { check } from 'meteor/check';\nimport { MyersBriggsCategory, Question } from '../questions/questions.js';\nimport { Category, CategoryManager } from '../categories/categories.js';\nimport { Defaults } from '../../startup/both/defaults.js';\nimport { Team } from '../teams/teams.js';\nimport { UserSegment } from '../user_segments/user_segments.js';\n\nconst MyersBriggsBit = Class.create({\n    name: 'MyersBriggsBit',\n    fields: {\n        Value: {\n            type: Number,\n            default: 0\n        },\n        Totals: {\n            type: Number,\n            default: 0\n        },\n        QuestionCount: {\n            type: Number,\n            default: 0\n        }\n    },\n    helpers: {\n        addValue(value) {\n            this.Totals += value;\n            this.QuestionCount ++;\n            this.Value = (this.QuestionCount == 0 ? 0 :this.Totals / this.QuestionCount);\n        },\n        removeValue(value) {\n            this.QuestionCount --;\n            if(this.QuestionCount < 0) { this.QuestionCount = 0; }\n            if(this.QuestionCount == 0) { this.Totals = this.Value = 0; return; }\n            this.Totals -= value;\n            this.Value = this.Totals / this.QuestionCount;\n        },\n        reset() {\n            this.Totals = 0;\n            this.QuestionCount = 0;\n            this.Value = 0;\n        }\n    }\n});\nconst MyersBriggs = Class.create({\n    name: 'MyersBriggs',\n    fields: {\n        IE: {\n            type: MyersBriggsBit,\n            default: function () { return new MyersBriggsBit(); }\n        },\n        NS: {\n            type: MyersBriggsBit,\n            default: function () { return new MyersBriggsBit(); }\n        },\n        TF: {\n            type: MyersBriggsBit,\n            default: function () { return new MyersBriggsBit(); }\n        },\n        JP: {\n            type: MyersBriggsBit,\n            default: function () { return new MyersBriggsBit(); }\n        }\n    },\n    helpers: {\n        addByCategory(category, value) {\n            console.log(category, value);\n            let name = this.getIdentifierById(category);\n            this[name].addValue(value);\n        },\n        removeByCategory(category, value) {\n            let name = this.getIdentifierById(category);\n            this[name].removeValue(value);\n        },\n        getIdentifierById(categoryId) {\n            if(categoryId === 0) { return 'IE'; }\n            if(categoryId === 1) { return 'NS'; }\n            if(categoryId === 2) { return 'TF'; }\n            return 'JP';\n        },\n        getFourLetter() {\n            let IEL = (this.IE.Value === 0 ? '_' : (this.IE.Value < 0 ? 'I' : 'E'));\n            let NSL = (this.NS.Value === 0 ? '_' : (this.NS.Value < 0 ? 'N' : 'S'));\n            let TFL = (this.TF.Value === 0 ? '_' : (this.TF.Value < 0 ? 'T' : 'F'));\n            let JPL = (this.JP.Value === 0 ? '_' : (this.JP.Value < 0 ? 'J' : 'P'));\n            return `${IEL}${NSL}${TFL}${JPL}`;\n        },\n        reset() {\n            for(let i = 0; i < 4; i++) {\n                this[this.getIdentifierById(i)].reset();\n            }\n        }\n    }\n});\nconst Answer = Class.create({\n    name: 'Answer',\n    fields: {\n        Category: {\n            type:MyersBriggsCategory,\n            default:0\n        },\n        Categories: {\n            type: [MyersBriggsCategory],\n            default: []\n        },\n        QuestionID: {\n            type: String,\n            default:''\n        },\n        Reversed: {\n            type: Boolean,\n            default:false\n        },\n        Value: {\n            type: Number,\n            default:0\n        },\n        AnsweredAt: {\n            type: Date,\n            default: function () { return new Date(); }\n        }\n    },\n    helpers: {\n        getQuestion() {\n            let q = Question.findOne({_id:this.QuestionID});\n            return q;\n        },\n        unanswer() {\n            this.getQuestion().removeAnswer(this);\n        }\n    }\n});\nconst UserType = Class.create({\n    name: 'UserType',\n    fields: {\n        Personality: {\n            type: MyersBriggs,\n            default: function () { return new MyersBriggs(); }\n        },\n        AnsweredQuestions: {\n            type: [Answer],\n            default: function() { return []; }\n        },\n        TotalQuestions: {\n            type: Number,\n            default:0\n        }\n    },\n    helpers: {\n        getAnsweredQuestionsIDs() {\n            let qids = [];\n            _.each(this.AnsweredQuestions, function (ans) {\n                qids.push(ans.QuestionID);\n            });\n            return qids;\n        },\n        setTotalQuestions(totalQuestions) {\n            //console.log(\"user.js totalQuestions\", totalQuestions);\n            this.TotalQuestions = totalQuestions;\n            //console.log(\"user.js totalQuestions2\", this.TotalQuestions);\n        },\n        getTotalQuestions() {\n          return this.TotalQuestions;\n        },\n        answerQuestion(answer) {\n            this.AnsweredQuestions.push(answer);\n            console.log(this.AnsweredQuestions);\n            console.log(answer.Categories);\n            let contextThis = this;\n            _.each(answer.Categories, function (cat) {\n                contextThis.Personality.addByCategory(cat, answer.Value);\n            });\n            //this.Personality.addByCategory(answer.Category, answer.Value);\n        },\n        unAnswerQuestion(answer, skipSlice) {\n            let index = this.getAnswerIndexForQuestionID(answer.QuestionID);\n            let before = this.AnsweredQuestions.length;\n\n            if(index < 0) { return; }\n            console.log(index);\n            if(!skipSlice) {\n                if(index == 0) {\n                    this.AnsweredQuestions.shift();\n                } else if(index == this.AnsweredQuestions.length - 1) {\n                    this.AnsweredQuestions.pop();\n                } else {\n                    this.AnsweredQuestions = this.AnsweredQuestions.slice(0,index).concat(this.AnsweredQuestions.slice(index+1));\n                }\n            }\n            answer.unanswer();\n            _.each(answer.Categories, function (cat) {\n                this.Personality.removeByCategory(cat, answer.Value);\n            });\n            //this.Personality.removeByCategory(answer.Category, answer.Value);\n            console.log(\"User Answer Count: \"+before+\" => \"+this.AnsweredQuestions.length);\n        },\n        getAnswerIndexForQuestionID(questionId) {\n            for(let i = 0; i < this.AnsweredQuestions.length; i++) {\n                if(this.AnsweredQuestions[i].QuestionID == questionId) { return i; }\n            }\n            return -1;\n        },\n        getAnswerForQuestion(questionId) {\n            return _.find(this.AnsweredQuestions, function (ans, i) {\n                return ans.QuestionID == questionId;\n            });\n        },\n        reset() {\n            let self = this;\n            _.each(this.AnsweredQuestions, function (ans) {\n                self.unAnswerQuestion(ans, true);\n            });\n            this.Personality.reset();\n            this.AnsweredQuestions = [];\n        }\n    }\n});\n\nconst DashboardPane = Class.create({\n    name: 'DashboardPane',\n    fields: {\n        size: {\n            type: Number,\n            default: 4\n        },\n        name: {\n            type: String,\n            default: 'App_home'\n        },\n        title: {\n            type: String,\n            default: 'Personality Questions'\n        },\n        route: {\n            type: String,\n            default: '/'\n        }\n    }\n})\n\nconst Profile = Class.create({\n    name: 'Profile',\n    fields: {\n        firstName: {\n            type: String,\n            validators: [{\n              type: 'minLength',\n              param: 2\n            }]\n        },\n        lastName: {\n            type: String,\n            validators: [{\n              type: 'minLength',\n              param: 2\n            }]\n        },\n        UserType: {\n            type: UserType,\n            default: function () { return new UserType(); }\n        },\n        gender: {\n            type: Boolean,\n            default: false\n        },\n        birthDate: {\n            type: Date,\n            optional: true\n        },\n        Categories: {\n            type: CategoryManager,\n            default: function() {\n                return CategoryManager.OfType(\"User\");\n            }\n        },\n        dashboardPanes: {\n            type: [DashboardPane],\n            default: []\n        },\n        segments: {\n            type: [String],\n            default: []\n        }\n    },\n    helpers: {\n        calculateAge() {\n            if (this.birthDate) {\n                const diff = Date.now() - this.birthDate.getTime();\n                this.age = Math.abs((new Date(diff)).getUTCFullYear() - 1970);\n            }\n        },\n        fullName(param) {\n            var fullName = this.firstName + ' ' + this.lastName;\n            if (param === 'lower') { return fullName.toLowerCase(); }\n            else if (param === 'upper') { return fullName.toUpperCase(); }\n            return fullName;\n        }\n    },\n});\n\nconst User = Class.create({\n    name: 'User',\n    collection: Meteor.users,\n    fields:{\n        createdAt: Date,\n        emails: {\n            type: [Object],\n            default: function() { return []; }\n        },\n        MyProfile: {\n            type: Profile,\n            default: function() { return new Profile(); }\n        },\n        teams: {\n        \ttype: [String],\n        \tdefault: function() { return [ Team.Default.Name ]; }\n        },\n        roles: {\n            type: Object\n        }\n    },\n    resolveError({ nestedName, validator }) {\n        console.log(nestedName, validator);\n    },\n    events: {\n        afterInit(e) {\n            e.target.MyProfile.calculateAge();\n        },\n        beforeSave(e) {\n            if (e.currentTarget.MyProfile.Categories.length() === 0) {\n                e.currentTarget.MyProfile.Categories.addCategory(Category.Default);\n            }\n            if (e.currentTarget.teams.length === 0) {\n            \te.currentTarget.addTeam( Team.Default.Name );\n            }\n        }\n    },\n    meteorMethods: {\n        create() {\n            return this.save();\n        },\n        changeName(firstName, lastName) {\n            check(firstName, String);\n            check(lastName, String);\n            this.MyProfile.firstName = firstName;\n            this.MyProfile.lastName = lastName;\n            return this.save();\n        },\n        fullName(param) {\n            return this.MyProfile.fullName(param);\n        },\n        addTeam(teamName) {\n        \tlet teamDoc = Team.findOne({ \"Name\" : teamName});\n        \tif (typeof teamDoc !== \"undefined\") {\n                teamDoc.addUsers(this._id);\n        \t} else {\n                return false;\n            }\n        },\n        profileUpdate(uprofile) {\n            check(uprofile.firstName, String);\n            check(uprofile.lastName, String);\n            check(uprofile.gender, Boolean);\n\n            this.MyProfile.firstName = uprofile.firstName;\n            this.MyProfile.lastName = uprofile.lastName;\n            this.MyProfile.gender = uprofile.gender;\n            this.MyProfile.segments = uprofile.segments;\n            if (\"\" !== uprofile.birthDate) {\n                this.MyProfile.birthDate = new Date(uprofile.birthDate);\n            }\n            return this.save();\n        }\n    },\n    indexes: {\n    },\n    behaviors: {\n        slug: {\n            fieldName: 'email'\n        },\n        timestamp: {}\n    }\n});\n\nif (Meteor.isServer) {\n  User.extend({\n    fields: {\n      services: Object\n    }\n  });\n}\n\nexport { User, Profile, UserType, MyersBriggs, Answer };\n","import { User } from '/imports/api/users/users.js';\nimport { Team } from '/imports/api/teams/teams.js';\nimport { Defaults } from '/imports/startup/both/defaults.js';\n\nconst myPostLogout = function(){\n    //example redirect after logout\n    FlowRouter.go('/signin');\n};\nconst mySubmitFunc = function(error, state){\n  if (!error) {\n    if (state === \"signIn\") {\n      // Successfully logged in\n      // ...\n    }\n    if (state === \"signUp\") {\n      // Successfully registered\n      // ...\n    }\n  }\n};\nfunction myPreSubmitFunc()  { console.log(\"Pre:  \", arguments); }\n\nfunction myPostSubmitFunc(userId, info) {\n    Accounts.emailTemplates.siteName = \"DeveloperLevel\";\n    Accounts.emailTemplates.from     = \"DeveloperLevel <wayne@paladinarcher.com>\";\n\n    Accounts.emailTemplates.verifyEmail = {\n        subject() {\n            return \"[DeveloperLevel] Verify your email address\";\n        },\n        text( user, url ) {\n            let emailAddress   = user.emails[0].address,\n                urlWithoutHash = url.replace( '#/', '' ),\n                supportEmail   = \"support@developerlevel.com\",\n                emailBody      = `To verify your email address (${emailAddress}) visit the following link:\\n\\n${urlWithoutHash}\\n\\n If you did not request this verification, please ignore this email.`;\n\n            return emailBody;\n        }\n    };\n    Accounts.sendVerificationEmail( userId );\n    console.log(\"Post: \", arguments);\n}\n\nAccountsTemplates.configure({\n    // Behavior\n    confirmPassword: true,\n    enablePasswordChange: true,\n    forbidClientAccountCreation: false,\n    overrideLoginErrors: true,\n    sendVerificationEmail: false,\n    lowercaseUsername: false,\n    focusFirstInput: true,\n\n    // Appearance\n    showAddRemoveServices: false,\n    showForgotPasswordLink: true,\n    showLabels: true,\n    showPlaceholders: true,\n    showResendVerificationEmailLink: false,\n\n    // Client-side Validation\n\n    continuousValidation: false,\n    negativeFeedback: false,\n    negativeValidation: true,\n    positiveValidation: true,\n    positiveFeedback: true,\n    showValidating: true,\n\n\n    // Privacy Policy and Terms of Use\n    privacyUrl: 'privacy',\n    termsUrl: 'terms-of-use',\n\n    // Redirects\n    homeRoutePath: '/',\n    redirectTimeout: 4000,\n\n    // Routing\n\n    defaultTemplate: 'Auth_page',\n    defaultLayout: 'App_body',\n    defaultContentRegion: 'main',\n    defaultLayoutRegions: {},\n\n    // Hooks\n    onLogoutHook: myPostLogout,\n    onSubmitHook: mySubmitFunc,\n    preSignUpHook: myPreSubmitFunc,\n    postSignUpHook: myPostSubmitFunc,\n\n    // Texts\n    texts: {\n      button: {\n          signUp: \"Register Now!\"\n      },\n      socialSignUp: \"Register\",\n      socialIcons: {\n          \"meteor-developer\": \"fa fa-rocket\"\n      },\n      title: {\n          forgotPwd: \"Recover Your Password\"\n      },\n      inputIcons: {\n          isValidating: \"fa fa-spinner fa-spin\",\n          hasSuccess: \"fa fa-check\",\n          hasError: \"fa fa-times\",\n      }\n    },\n});\n\n// Define these routes in a file loaded on both client and server\nAccountsTemplates.configureRoute('signIn', {\n  name: 'signin',\n  path: '/signin'\n});\nAccountsTemplates.configureRoute('signUp', {\n  name: 'join',\n  path: '/join'\n});\nAccountsTemplates.configureRoute('forgotPwd');\nAccountsTemplates.configureRoute('resetPwd', {\n  name: 'resetPwd',\n  path: '/reset-password'\n});\n\nAccountsTemplates.addFields([{\n    _id: \"first_name\",\n    type: \"text\",\n    required: true,\n    displayName: \"First Name\",\n    func: function(value) {\n        //if(Meteor.isClient) {\n            console.log(\"Firstname validation: \", value);\n\n        //}\n        return false;\n    }},{\n    _id: \"last_name\",\n    type: \"text\",\n    required: true,\n    displayName: \"Last Name\",\n    func: function(value) {\n        //if(Meteor.isClient) {\n            console.log(\"Lastname validation: \", value);\n\n        //}\n        return false;\n    }},{\n    _id: \"gender\",\n    type: \"select\",\n    required: true,\n    displayName: \"Gender\",\n    select: [\n        {\n            text: \"Male\",\n            value: \"male\",\n        },\n        {\n            text: \"Female\",\n            value: \"female\",\n        },\n    ],\n}]);\nif(Meteor.isServer) {\n    Accounts.onCreateUser((options, user) => {\n        user.slug = options.email;\n        user.updateAt = user.createdAt;\n        user.MyProfile = {\n            firstName: options.profile.first_name,\n            lastName: options.profile.last_name,\n            gender: (options.profile.gender === \"female\"),\n            UserType: {\n                Personality: {\n                    IE: {},\n                    NS: {},\n                    TF: {},\n                    JP: {}\n                },\n                AnsweredQuestions: []\n            },\n            birthDate: undefined,\n            age: undefined\n        };\n        user.teams = [ Team.Default.Name ];\n        user.roles = {};\n        user.profile = options.profile;\n        if(options.isAdmin && options.username === 'admin') {\n            user.roles[Roles.GLOBAL_GROUP] = ['admin'];\n            Roles.addUsersToRoles(user._id, 'admin', Roles.GLOBAL_GROUP);\n        } else {\n            let t = Team.findOne( {Name: Team.Default.Name} );\n            user.roles[Team.Default.Name] = ['member', Defaults.role.name];\n            t.addUsers( user._id );\n\t\t}\n        return user;\n    });\n    Accounts.validateNewUser(function (user) {\n        var loggedInUser;\n        try { loggedInUser = Meteor.user(); }\n        catch(ex) {\n            console.log(ex);\n        }\n\n        if (!loggedInUser || Roles.userIsInRole(loggedInUser, ['admin','manage-users'], Roles.GLOBAL_GROUP)) {\n          // NOTE: This example assumes the user is not using groups.\n          return true;\n        }\n\n        throw new Meteor.Error(403, \"Not authorized to create new users\");\n    });\n}\n","const Defaults = {\n\t'user': {\n\t\t'username': 'admin',\n\t\t'email': 'admin@mydomain.com',\n\t\t'isAdmin': true,\n\t\t'profile': {\n\t\t\t'first_name': 'Admin',\n\t\t\t'last_name': 'Admin',\n\t\t\t'gender': 'female'\n\t\t}\n\t},\n\t'team': {\n\t\t'Name': \"No Team\",\n\t\t'Public': true,\n\t\t'Members': [],\n\t\t'Active': true,\n\t},\n\t'role': {\n\t\t'name': 'No-Permissions'\n\t}\n}\n\nexport { Defaults };","// Import modules used by both client and server through a single index entry point\n// e.g. useraccounts configuration file.\nif(Meteor.isClient) { Session.setDefault('refreshQuestions', Math.random()); }\nimport './at_config.js';","Meteor.subscribe('userData');\n/*Meteor.subscribe('teamsData', Meteor.userId(), {\n    onReady: function() {\n        console.log(\"teamsData subscription ready\");\n    }\n}); */\n","// Import client startup through a single index entry point\n\nimport './config.js';\nimport './routes.js';\n","import { FlowRouter } from 'meteor/kadira:flow-router';\nimport { BlazeLayout } from 'meteor/kadira:blaze-layout';\nimport { LearnShareSession } from '/imports/api/learn_share/learn_share.js';\nimport { UserNotify } from '/imports/api/user_notify/user_notify.js';\n\n// Import needed templates\nimport '../../ui/layouts/body/body.js';\nimport '../../ui/components/header/header.js';\nimport '../../ui/components/loading/loading.html';\nimport '../../ui/components/select_feedback/select_feedback.js';\nimport '../../ui/components/team_icon/team_icon.html';\nimport '../../ui/components/video_embed/video_embed.js';\nimport '../../ui/pages/home/home.js';\nimport '../../ui/pages/add_questions/add_questions.js';\nimport '../../ui/pages/add_readings/add_readings.js';\nimport '../../ui/pages/admin_teams/admin_teams.js';\nimport '../../ui/pages/learn_share/learn_share.js';\nimport '../../ui/pages/learn_share_list/learn_share_list.js';\nimport '../../ui/pages/team_goals/team_goals.js';\nimport '../../ui/pages/individual_goals/individual_goals.js';\nimport '../../ui/pages/user_dashboard/user_dashboard.js';\nimport '../../ui/pages/ask_questions/ask_questions.js';\nimport '../../ui/pages/dash_min/dash_min.js';\nimport '../../ui/pages/user_profile/user_profile.js';\nimport '../../ui/pages/not-found/not-found.js';\nimport '../../ui/pages/verify/verify.js';\nimport '../../ui/pages/user_segments/user_segments.js';\nimport '../../ui/layouts/login/login.js';\n\nlet ensureEmailVerified = function() {\n\tMeteor.setTimeout(() => {\n\t\tconsole.log(\"tttt\", Meteor.user(), Meteor.user().emails[0].verified);\n\t\tif ((typeof Meteor.user().username === \"undefined\" || Meteor.user().username !== \"admin\") && !Meteor.user().emails[0].verified) {\n\t\t\tFlowRouter.redirect(\"/verify/notverified\");\n\t\t}\n\t},500);\n}\n\n// Set up all routes in the app\nFlowRouter.route('/', {\n\ttriggersEnter: [AccountsTemplates.ensureSignedIn,ensureEmailVerified],\n    name: 'App.home',\n    action() {\n      FlowRouter.redirect(\"/dashboard\");\n    },\n});\nFlowRouter.route('/dashboard', {\n\ttriggersEnter: [AccountsTemplates.ensureSignedIn,ensureEmailVerified],\n    name: 'dashboard',\n    action() {\n      BlazeLayout.render('App_body', { top: 'header', main: 'dash_min' });\n    },\n});\nFlowRouter.route('/controlcenter', {\n\ttriggersEnter: [AccountsTemplates.ensureSignedIn,ensureEmailVerified],\n    name: 'controlcenter',\n    action() {\n      BlazeLayout.render('App_body', { top: 'header', main: 'user_dashboard' });\n    },\n});\nFlowRouter.route('/questions', {\n\ttriggersEnter: [AccountsTemplates.ensureSignedIn,ensureEmailVerified],\n    name: 'ask_questions',\n    action() {\n      BlazeLayout.render('App_body', { top: 'header', main: 'ask_questions' });\n    },\n});\nFlowRouter.route('/signin', {\n    name: 'signin',\n    action() {\n        BlazeLayout.render('Auth_page', { });\n    }\n});\nFlowRouter.route('/addQuestions/:category', {\n\ttriggersEnter: [AccountsTemplates.ensureSignedIn,ensureEmailVerified],\n    name: 'addQuestions',\n    action(params, queryParams) {\n        BlazeLayout.render('App_body', { top: 'header', main: 'add_questions' });\n    }\n});\nFlowRouter.route('/addTraitDescriptions', {\n\ttriggersEnter: [AccountsTemplates.ensureSignedIn,ensureEmailVerified],\n    name: 'addTraitDescriptions',\n    action(params, queryParams) {\n        BlazeLayout.render('App_body', { top: 'header', main: 'add_readings' });\n    }\n});\nFlowRouter.route('/adminTeams', {\n\ttriggersEnter: [AccountsTemplates.ensureSignedIn,ensureEmailVerified],\n    name: 'adminTeams',\n    action(params, queryParams) {\n        BlazeLayout.render('App_body', { top: 'header', main: 'admin_teams' });\n    }\n});\nFlowRouter.route('/adminTeams/:teamName', {\n\ttriggersEnter: [AccountsTemplates.ensureSignedIn,ensureEmailVerified],\n    name: 'adminTeams',\n    action(params, queryParams) {\n        BlazeLayout.render('App_body', { top: 'header', main: 'admin_teams' });\n    }\n});\nFlowRouter.route('/learnShareList', {\n\ttriggersEnter: [AccountsTemplates.ensureSignedIn,ensureEmailVerified],\n    name: 'learnShareList',\n    action(params, queryParams) {\n        BlazeLayout.render('App_body', { top: 'header', main: 'learn_share_list' });\n    }\n});\nFlowRouter.route('/learnShare/:lssid', {\n    //triggersEnter: [AccountsTemplates.ensureSignedIn],\n    name: 'learnShare',\n    action(params, queryParams) {\n        BlazeLayout.render('App_body', { top: 'header', main: 'learn_share' });\n    }\n});\nFlowRouter.route('/learnShare', {\n    //triggersEnter: [AccountsTemplates.ensureSignedIn],\n    name: 'learnShare',\n    action(params, queryParams) {\n\t\tif (sessionStorage.lastLearnShareId) {\n\t\t\tFlowRouter.go('/learnShare/'+sessionStorage.lastLearnShareId+location.hash);\n\t\t} else {\n\t\t\tBlazeLayout.render('App_body', { main: 'App_notFound' });\n\t\t}\n    }\n});\nFlowRouter.route('/teamGoals/:teamName', {\n\ttriggersEnter: [AccountsTemplates.ensureSignedIn,ensureEmailVerified],\n    name: 'teamGoals',\n    action(params, queryParams) {\n        BlazeLayout.render('App_body', { top: 'header', main: 'team_goals' });\n    }\n});\nFlowRouter.route('/teamGoals/:teamName/:goalId', {\n\ttriggersEnter: [AccountsTemplates.ensureSignedIn,ensureEmailVerified],\n    name: 'teamGoals',\n    action(params, queryParams) {\n        BlazeLayout.render('App_body', { top: 'header', main: 'team_goals' });\n    }\n});\nFlowRouter.route('/goals', {\n\ttriggersEnter: [AccountsTemplates.ensureSignedIn,ensureEmailVerified],\n    name: 'individualGoals',\n    action(params, queryParams) {\n        BlazeLayout.render('App_body', { top: 'header', main: 'individual_goals' });\n    }\n});\nFlowRouter.route('/goals/:userId', {\n\ttriggersEnter: [AccountsTemplates.ensureSignedIn,ensureEmailVerified],\n    name: 'individualGoals',\n    action(params, queryParams) {\n        BlazeLayout.render('App_body', { top: 'header', main: 'individual_goals' });\n    }\n});\nFlowRouter.route('/userSegments', {\n\ttriggersEnter: [AccountsTemplates.ensureSignedIn,ensureEmailVerified],\n    name: 'userSegments',\n    action(params, queryParams) {\n        BlazeLayout.render('App_body', { top: 'header', main: 'user_segments' });\n    }\n});\nFlowRouter.route('/profile', {\n\ttriggersEnter: [AccountsTemplates.ensureSignedIn,ensureEmailVerified],\n    name: 'profile',\n    action(params, queryParams) {\n        BlazeLayout.render('App_body', { top: 'header', main: 'user_profile' });\n    }\n});\nFlowRouter.route('/profile/:userId', {\n\ttriggersEnter: [AccountsTemplates.ensureSignedIn,ensureEmailVerified],\n    name: 'profile',\n    action(params, queryParams) {\n        BlazeLayout.render('App_body', { top: 'header', main: 'user_profile' });\n    }\n});\nFlowRouter.route( '/verify-email/:token', {\n\tname: 'verify-email',\n\taction( params ) {\n\t\tAccounts.verifyEmail( params.token, ( error ) =>{\n\t\t\tif ( error ) {\n\t\t\t\tUserNotify.add({\n\t\t\t\t\tuserId: Meteor.userId(),\n\t\t\t\t\ttitle: 'Verification Error',\n\t\t\t\t\tbody: 'Error: email address not verified',\n\t\t\t\t\taction: 'verify:error'\n\t\t\t\t});\n\t\t\t\tFlowRouter.go( '/verify/error' );\n\t\t\t} else {\n\t\t\t\tUserNotify.add({\n\t\t\t\t\tuserId: Meteor.userId(),\n\t\t\t\t\ttitle: 'Verification Success',\n\t\t\t\t\tbody: 'Success: your email address has been verified',\n\t\t\t\t\taction: 'verify:success'\n\t\t\t\t});\n\t\t\t\tFlowRouter.go( '/' );\n\t\t\t}\n\t\t});\n\t}\n});\nFlowRouter.route('/verify/:vparam', {\n\ttriggersEnter: [AccountsTemplates.ensureSignedIn],\n\taction(params, queryParams) {\n\t\tBlazeLayout.render('verify');\n\t}\n});\nFlowRouter.notFound = {\n    action() {\n        BlazeLayout.render('App_body', { main: 'App_notFound' });\n    },\n};\n","// Client entry point, imports all client code\n\nimport '/imports/startup/both';\nimport '/imports/startup/client';\n"]}